if("undefined"===typeof Recite||!Recite)var Recite={};
Recite=function(){function e(b,a){"undefined"===typeof a&&(a=Recite);Recite.Util.each(b,function(b,c){var d=a[b];"undefined"!==typeof d&&(d.setOptions?d.setOptions(c):e(c,d))})}function h(b){var a,f={persist:!0,autoEnable:!1,observeDom:!0,selectionMethod:"tooltip",rootNode:document.body,css:Recite.baseUrl+"/assets/"+Recite.version+"/css/recite.css",enableButton:".recite-enable",enableFragment:"#recite-enable",enableButtonToggle:!1,buttonDeactivateContent:"Deactivate Recite",buttonDeactivateContentElement:".recite-enable",
parser:Recite.Parser.Html,autoCache:!0,defaultLanguage:null,showBrand:!0,classname:null,button:null,wrapTag:null,mode:null};a=b||{};a=Recite.Util.merge(f,a);e(a);c=a;Recite.Debug.log("Recite","(Version "+Recite.version+") Load called with options:",b);b=Recite.Sizzle(c.enableButton);Recite.Event.publish("Recite:load");a=Recite.Storage.Cookie.load("Recite.Persist");null!==c.enableFragment&&window.location.hash===c.enableFragment&&Recite.enable();(c.autoEnable&&!1!==a||c.persist&&!0===a)&&Recite.enable();
null!==c.enableButton&&Recite.DomEvent.add(b,"click",function(){c.enableButtonToggle?d?Recite.disable():Recite.enable():Recite.enable()});Recite.Event.subscribe("Recite:ModuleEvent",function(a,b){Recite.Tracker.track(b.name,b.event)})}var d=!1,c={};return{namespace:function(){var b=arguments,a=null,c,d,i;for(c=0;c<b.length;c+=1){i=(""+b[c]).split(".");a=Recite;for(d="Recite"===i[0]?1:0;d<i.length;d+=1)a[i[d]]=a[i[d]]||{},a=a[i[d]]}return a},load:function(b){"complete"===document.readyState||"interactive"===
document.readyState?h(b):Recite.DomEvent.add(window,"load",function(){h(b)})},enable:function(){if(d)return Recite.Debug.log("Recite","Already enabled, not re-enabling."),null;c.persist&&Recite.Storage.Cookie.save("Recite.Persist",!0);if(c.enableButtonToggle){var b=Recite.Sizzle(c.buttonDeactivateContentElement);Recite.Util.each(b,function(a,b){b.innerHTML=c.buttonDeactivateContent})}Recite.AssetLoader.css(c.css,function(){Recite.Debug.log("Recite","Recite CSS loaded");Recite.Controls.load(document)});
Recite.Event.subscribe("Controls:loaded",function(){Recite.Preferences.load();Recite.Controls.Desktop.applyTabOrder();Recite.Util.each(Recite.Sizzle(".recite-version"),function(a,b){b.innerHTML="Ver: "+Recite.version})});Recite.Event.subscribe("Recite.Parser:parsed",function(){c.observeDom&&Recite.Dom.Observer.observe(document.getElementById("recite-wrapper"))});Recite.Event.subscribe("Preferences:load",function(){null!==c.defaultLanguage&&null===Recite.Preferences.get("language")&&Recite.Preferences.set("language",
c.defaultLanguage)});"tooltip"===c.selectionMethod?window.setTimeout(function(){if(null!==c.rootNode){var a=c.parser.parse(c.rootNode);Recite.PlayerControls.invoke(a)}},0):"highlight"===c.selectionMethod&&(c.observeDom=!1,Recite.Selection.setOptions({playOnSelection:!0}));Recite.FrameUpdater.enabled()&&Recite.FrameUpdater.load();Recite.Docreader.enabled()&&Recite.Docreader.load();Recite.Language.Translate.init();Recite.Event.publish("Recite:enable");Recite.Debug.log("Recite","Recite enabled (Version:"+
Recite.version+")");Recite.Tracker.track("enable");d=!0;Recite.Storage.Cookie.save("Recite.Persist",!0)},disable:function(b){var a=Recite.Controls.disableOverlay();"undefined"!=typeof b?(Recite.Event.publish("Recite:disable"),Recite.Storage.Cookie.save("Recite.Persist",!1),window.location.reload()):Recite.Gui.Modal.show("About to close!","You are about to close the Recite Me toolbar.  Are you sure you wish to continue? This will cause the page to be refreshed and you will lose any unsaved data.",
"OK","Cancel",function(){Recite.Event.publish("Recite:disable");Recite.Storage.Cookie.save("Recite.Persist",!1);window.location.reload()},function(){Recite.Gui.Notification.show("Close operation canceled");Recite.Controls.reEnableOverlay(a)})},isEnabled:function(){return d},getOptions:function(b){if("undefined"===typeof b)return c;var a,f,b=b.split(".");a=c;for(f=0;f<b.length;f++)if(a=a[b[f]],"undefined"===typeof a)return null;return a},version:"3.2.38",baseUrl:"https://api.reciteme.com"}}();
null!==null&&null();Recite.namespace("Recite.Util");
Recite.Util=function(){var e=[],h=Object.prototype.toString,d=null;e["[object Boolean]"]="boolean";e["[object Number]"]="number";e["[object String]"]="string";e["[object Function]"]="function";e["[object Array]"]="array";e["[object Date]"]="date";e["[object RegExp]"]="regexp";e["[object Object]"]="object";String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},String.prototype.ltrim=function(){return this.replace(/^\s+/,"")},String.prototype.rtrim=
function(){return this.replace(/\s+$/,"")},String.prototype.fulltrim=function(){return this.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," ")});return{isFunction:function(c){return"function"===Recite.Util.type(c)},isArray:Array.isArray||function(c){return"array"===Recite.Util.type(c)},isWindow:function(c){return c&&"object"===typeof c&&"setInterval"in c},isNumeric:function(c){return!isNaN(parseFloat(c))&&isFinite(c)},type:function(c){return null==c?String(c):e[h.call(c)]||"object"},clone:function(c){return ReciteJSON.parse(ReciteJSON.stringify(c))},
guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var b=16*Math.random()|0;return("x"==c?b:b&3|8).toString(16)})},each:function(c,b,a){var f,d=0,i=c.length,k=void 0===i;if(a)if(k)for(f in c){if(!1===b.apply(c[f],a))break}else for(;d<i&&!1!==b.apply(c[d++],a););else if(k)for(f in c){if(!1===b.call(c[f],f,c[f]))break}else for(;d<i&&!1!==b.call(c[d],d,c[d++]););return c},merge:function(c,b){for(var a in b)try{c[a]=b[a].constructor===Object?Recite.Util.merge(c[a],
b[a]):b[a]}catch(d){c[a]=b[a]}return c},inArray:function(c,b,a){var d;if(b){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(b,c,a);d=b.length;for(a=a?0>a?Math.max(0,d+a):a:0;a<d;a++)if(a in b&&b[a]===c)return a}return-1},getWindowLocationOrigin:function(c){return c.location.origin||c.location.protocol+"//"+c.location.host},buildQueryString:function(c){var b="";Recite.Util.each(c,function(a,c){b+="&"+a+"="+encodeURIComponent(c)});return b="?"+b.substring(1)},unSetIFramePointerEvents:function(){if(null==
d){var c=Recite.Sizzle("iframe");d=[];Recite.Util.each(c,function(b,a){d.push({frame:a,state:void 0==a.style.pointerEvents?"all":a.style.pointerEvents})})}Recite.Util.each(d,function(b,a){a.frame.style.pointerEvents="none"})},reSetIFramePointerEvents:function(){null!==d&&Recite.Util.each(d,function(c,b){b.frame.style.pointerEvents=b.state})}}}();Recite.namespace("Event");
Recite.Event=function(){var e={},h=-1;return{publish:function(d,c){if(!e[d])return!1;setTimeout(function(){for(var b=e[d],a=b?b.length:0;a--;)b[a].func(d,c)},0);return!0},subscribe:function(d,c){e[d]||(e[d]=[]);var b=(++h).toString();e[d].push({token:b,func:c});return b},unsubscribe:function(d){for(var c in e)if(e[c])for(var b=0,a=e[c].length;b<a;b++)if(e[c][b].token===d)return e[c].splice(b,1),d;return!1}}}();Recite.namespace("Debug");
Recite.Debug=function(){var e={log:!1};return{setOptions:function(h){e=Recite.Util.merge(e,h)},enable:function(){e.log=!0},log:function(h){null===h&&(h="Recite.Debug");arguments[0]="["+h+"]";e.log&&window.console&&Function.apply.call(console.log,console,arguments)}}}();Recite.namespace("Recite.DomEvent");
Recite.DomEvent=function(){return{add:function(e,h,d){e=Recite.Util.isArray(e)?e:[e];Recite.Util.each(e,function(c,b){b.addEventListener?b.addEventListener(h,d,!1):b.attachEvent&&(b["e"+h+d]=d,b[h+d]=function(){var a=window.event;a.target=a.target||a.srcElement;b["e"+h+d](a)},b.attachEvent("on"+h,b[h+d]))})},remove:function(e,h,d){e=Recite.Util.isArray(e)?e:[e];Recite.Util.each(e,function(c,b){b.removeEventListener?b.removeEventListener(h,d,!1):b.detachEvent&&"undefined"!==typeof b[h+d]&&(b.detachEvent("on"+
h,b[h+d]),b[h+d]=null,b["e"+h+d]=null)})}}}();Recite.namespace("XDM");
Recite.XDM=function(){var e,h,d=1,c;return{postMessage:function(b,a,c){a&&(c=c||parent,window.postMessage?c.postMessage(b,a.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):a&&(c.location=a.replace(/#.*$/,"")+"#"+ +new Date+d++ +"&"+b))},receiveMessage:function(b,a){window.postMessage?(b&&(c=function(c){if("string"===typeof a&&c.origin!==a||"[object Function]"===Object.prototype.toString.call(a)&&!1===a(c.origin))return!1;b(c)}),Recite.DomEvent.add(window,"message",c)):(e&&clearInterval(e),e=null,b&&(e=setInterval(function(){var a=
document.location.hash,c=/^#?\d+&/;a!==h&&c.test(a)&&(h=a,b({data:a.replace(c,"")}))},100)))}}}();
(function(){function e(a,b,d,f,g,k){for(var g=0,i=f.length;g<i;g++){var j=f[g];if(j){for(var e=!1,j=j[a];j;){if(j[c]===d){e=f[j.sizset];break}1===j.nodeType&&!k&&(j[c]=d,j.sizset=g);if(j.nodeName.toLowerCase()===b){e=j;break}j=j[a]}f[g]=e}}}function h(a,b,d,f,g,k){for(var g=0,i=f.length;g<i;g++){var j=f[g];if(j){for(var e=!1,j=j[a];j;){if(j[c]===d){e=f[j.sizset];break}if(1===j.nodeType)if(k||(j[c]=d,j.sizset=g),"string"!==typeof b){if(j===b){e=!0;break}}else if(0<m.filter(b,[j]).length){e=j;break}j=
j[a]}f[g]=e}}}var d=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,c="sizcache"+(Math.random()+"").replace(".",""),b=0,a=Object.prototype.toString,f=!1,g=!0,i=/\\/g,k=/\r\n/g,j=/\W/;[0,0].sort(function(){g=!1;return 0});var m=function(b,c,f,g){var f=f||[],k=c=c||document;if(1!==c.nodeType&&9!==c.nodeType)return[];if(!b||"string"!==typeof b)return f;var i,j,e,y,h,l=!0,q=m.isXML(c),n=[],A=b;do if(d.exec(""),i=d.exec(A))if(A=
i[3],n.push(i[1]),i[2]){y=i[3];break}while(i);if(1<n.length&&v.exec(b))if(2===n.length&&p.relative[n[0]])j=L(n[0]+n[1],c,g);else for(j=p.relative[n[0]]?[c]:m(n.shift(),c);n.length;)b=n.shift(),p.relative[b]&&(b+=n.shift()),j=L(b,j,g);else if(!g&&(1<n.length&&9===c.nodeType&&!q&&p.match.ID.test(n[0])&&!p.match.ID.test(n[n.length-1]))&&(i=m.find(n.shift(),c,q),c=i.expr?m.filter(i.expr,i.set)[0]:i.set[0]),c){i=g?{expr:n.pop(),set:s(g)}:m.find(n.pop(),1===n.length&&("~"===n[0]||"+"===n[0])&&c.parentNode?
c.parentNode:c,q);j=i.expr?m.filter(i.expr,i.set):i.set;for(0<n.length?e=s(j):l=!1;n.length;)i=h=n.pop(),p.relative[h]?i=n.pop():h="",null==i&&(i=c),p.relative[h](e,i,q)}else e=[];e||(e=j);e||m.error(h||b);if("[object Array]"===a.call(e))if(l)if(c&&1===c.nodeType)for(b=0;null!=e[b];b++)e[b]&&(!0===e[b]||1===e[b].nodeType&&m.contains(c,e[b]))&&f.push(j[b]);else for(b=0;null!=e[b];b++)e[b]&&1===e[b].nodeType&&f.push(j[b]);else f.push.apply(f,e);else s(e,f);y&&(m(y,k,f,g),m.uniqueSort(f));return f};
m.uniqueSort=function(a){if(u&&(f=g,a.sort(u),f))for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1);return a};m.matches=function(a,b){return m(a,null,null,b)};m.matchesSelector=function(a,b){return 0<m(b,null,null,[a]).length};m.find=function(a,b,c){var d,f,g,k,j,e;if(!a)return[];f=0;for(g=p.order.length;f<g;f++)if(j=p.order[f],k=p.leftMatch[j].exec(a))if(e=k[1],k.splice(1,1),"\\"!==e.substr(e.length-1)&&(k[1]=(k[1]||"").replace(i,""),d=p.find[j](k,b,c),null!=d)){a=a.replace(p.match[j],"");
break}d||(d="undefined"!==typeof b.getElementsByTagName?b.getElementsByTagName("*"):[]);return{set:d,expr:a}};m.filter=function(a,b,c,d){for(var f,g,i,k,j,e,h,y,l=a,s=[],n=b,q=b&&b[0]&&m.isXML(b[0]);a&&b.length;){for(i in p.filter)if(null!=(f=p.leftMatch[i].exec(a))&&f[2])if(e=p.filter[i],j=f[1],g=!1,f.splice(1,1),"\\"!==j.substr(j.length-1)){n===s&&(s=[]);if(p.preFilter[i])if(f=p.preFilter[i](f,n,c,s,d,q)){if(!0===f)continue}else g=k=!0;if(f)for(h=0;null!=(j=n[h]);h++)j&&(k=e(j,f,h,n),y=d^k,c&&null!=
k?y?g=!0:n[h]=!1:y&&(s.push(j),g=!0));if(void 0!==k){c||(n=s);a=a.replace(p.match[i],"");if(!g)return[];break}}if(a===l)if(null==g)m.error(a);else break;l=a}return n};m.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};var l=m.getText=function(a){var b,c;b=a.nodeType;var d="";if(b)if(1===b||9===b||11===b){if("string"===typeof a.textContent)return a.textContent;if("string"===typeof a.innerText)return a.innerText.replace(k,"");for(a=a.firstChild;a;a=a.nextSibling)d+=l(a)}else{if(3===
b||4===b)return a.nodeValue}else for(b=0;c=a[b];b++)8!==c.nodeType&&(d+=l(c));return d},p=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,
POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c="string"===typeof b,d=c&&!j.test(b),c=c&&!d;d&&(b=b.toLowerCase());for(var d=0,f=a.length,g;d<f;d++)if(g=a[d]){for(;(g=g.previousSibling)&&1!==g.nodeType;);
a[d]=c||g&&g.nodeName.toLowerCase()===b?g||!1:g===b}c&&m.filter(b,a,!0)},">":function(a,b){var c,d="string"===typeof b,f=0,g=a.length;if(d&&!j.test(b))for(b=b.toLowerCase();f<g;f++){if(c=a[f])c=c.parentNode,a[f]=c.nodeName.toLowerCase()===b?c:!1}else{for(;f<g;f++)(c=a[f])&&(a[f]=d?c.parentNode:c.parentNode===b);d&&m.filter(b,a,!0)}},"":function(a,c,d){var f,g=b++,i=h;"string"===typeof c&&!j.test(c)&&(f=c=c.toLowerCase(),i=e);i("parentNode",c,g,a,f,d)},"~":function(a,c,d){var f,g=b++,i=h;"string"===
typeof c&&!j.test(c)&&(f=c=c.toLowerCase(),i=e);i("previousSibling",c,g,a,f,d)}},find:{ID:function(a,b,c){if("undefined"!==typeof b.getElementById&&!c)return(a=b.getElementById(a[1]))&&a.parentNode?[a]:[]},NAME:function(a,b){if("undefined"!==typeof b.getElementsByName){for(var c=[],d=b.getElementsByName(a[1]),f=0,g=d.length;f<g;f++)d[f].getAttribute("name")===a[1]&&c.push(d[f]);return 0===c.length?null:c}},TAG:function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a[1])}},
preFilter:{CLASS:function(a,b,c,d,f,g){a=" "+a[1].replace(i,"")+" ";if(g)return a;for(var g=0,k;null!=(k=b[g]);g++)k&&(f^(k.className&&0<=(" "+k.className+" ").replace(/[\t\n\r]/g," ").indexOf(a))?c||d.push(k):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(i,"")},TAG:function(a){return a[1].replace(i,"").toLowerCase()},CHILD:function(a){if("nth"===a[1]){a[2]||m.error(a[0]);a[2]=a[2].replace(/^\+|\s*/g,"");var c=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===a[2]&&"2n"||"odd"===a[2]&&"2n+1"||
!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=c[1]+(c[2]||1)-0;a[3]=c[3]-0}else a[2]&&m.error(a[0]);a[0]=b++;return a},ATTR:function(a,b,c,d,f,g){b=a[1]=a[1].replace(i,"");!g&&p.attrMap[b]&&(a[1]=p.attrMap[b]);a[4]=(a[4]||a[5]||"").replace(i,"");"~="===a[2]&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(a,b,c,f,g){if("not"===a[1])if(1<(d.exec(a[3])||"").length||/^\w/.test(a[3]))a[3]=m(a[3],null,null,b);else return a=m.filter(a[3],b,c,1^g),c||f.push.apply(f,a),!1;else if(p.match.POS.test(a[0])||p.match.CHILD.test(a[0]))return!0;
return a},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return!1===a.disabled&&"hidden"!==a.type},disabled:function(a){return!0===a.disabled},checked:function(a){return!0===a.checked},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),
c=a.type;return"input"===a.nodeName.toLowerCase()&&"text"===c&&(b===c||null===b)},radio:function(a){return"input"===a.nodeName.toLowerCase()&&"radio"===a.type},checkbox:function(a){return"input"===a.nodeName.toLowerCase()&&"checkbox"===a.type},file:function(a){return"input"===a.nodeName.toLowerCase()&&"file"===a.type},password:function(a){return"input"===a.nodeName.toLowerCase()&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"submit"===a.type},
image:function(a){return"input"===a.nodeName.toLowerCase()&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return 0===b},last:function(a,b,c,d){return b===d.length-
1},even:function(a,b){return 0===b%2},odd:function(a,b){return 1===b%2},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var f=b[1],g=p.filters[f];if(g)return g(a,c,b,d);if("contains"===f)return 0<=(a.textContent||a.innerText||l([a])||"").indexOf(b[3]);if("not"===f){b=b[3];c=0;for(d=b.length;c<d;c++)if(b[c]===a)return!1;return!0}m.error(f)},CHILD:function(a,b){var d,
f,g,i,k,j;d=b[1];j=a;switch(d){case "only":case "first":for(;j=j.previousSibling;)if(1===j.nodeType)return!1;if("first"===d)return!0;j=a;case "last":for(;j=j.nextSibling;)if(1===j.nodeType)return!1;return!0;case "nth":d=b[2];f=b[3];if(1===d&&0===f)return!0;g=b[0];if((i=a.parentNode)&&(i[c]!==g||!a.nodeIndex)){k=0;for(j=i.firstChild;j;j=j.nextSibling)1===j.nodeType&&(j.nodeIndex=++k);i[c]=g}j=a.nodeIndex-f;return 0===d?0===j:0===j%d&&0<=j/d}},ID:function(a,b){return 1===a.nodeType&&a.getAttribute("id")===
b},TAG:function(a,b){return"*"===b&&1===a.nodeType||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return-1<(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)},ATTR:function(a,b){var c=b[1],c=m.attr?m.attr(a,c):p.attrHandle[c]?p.attrHandle[c](a):null!=a[c]?a[c]:a.getAttribute(c),d=c+"",f=b[2],g=b[4];return null==c?"!="===f:!f&&m.attr?null!=c:"="===f?d===g:"*="===f?0<=d.indexOf(g):"~="===f?0<=(" "+d+" ").indexOf(g):!g?d&&!1!==c:"!="===f?d!==g:"^="===f?0===d.indexOf(g):"$="===
f?d.substr(d.length-g.length)===g:"|="===f?d===g||d.substr(0,g.length+1)===g+"-":!1},POS:function(a,b,c,d){var f=p.setFilters[b[2]];if(f)return f(a,c,b,d)}}},v=p.match.POS,n=function(a,b){return"\\"+(b-0+1)},q;for(q in p.match)p.match[q]=RegExp(p.match[q].source+/(?![^\[]*\])(?![^\(]*\))/.source),p.leftMatch[q]=RegExp(/(^(?:.|\r|\n)*?)/.source+p.match[q].source.replace(/\\(\d+)/g,n));p.match.globalPOS=v;var s=function(a,b){a=Array.prototype.slice.call(a,0);return b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(document.documentElement.childNodes,
0)[0].nodeType}catch(t){s=function(b,c){var d=0,f=c||[];if("[object Array]"===a.call(b))Array.prototype.push.apply(f,b);else if("number"===typeof b.length)for(var g=b.length;d<g;d++)f.push(b[d]);else for(;b[d];d++)f.push(b[d]);return f}}var u,r;document.documentElement.compareDocumentPosition?u=function(a,b){return a===b?(f=!0,0):!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition?-1:1:a.compareDocumentPosition(b)&4?-1:1}:(u=function(a,b){if(a===b)return f=!0,0;if(a.sourceIndex&&
b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,g=[],i=[];c=a.parentNode;d=b.parentNode;var j=c;if(c===d)return r(a,b);if(c){if(!d)return 1}else return-1;for(;j;)g.unshift(j),j=j.parentNode;for(j=d;j;)i.unshift(j),j=j.parentNode;c=g.length;d=i.length;for(j=0;j<c&&j<d;j++)if(g[j]!==i[j])return r(g[j],i[j]);return j===c?r(a,i[j],-1):r(g[j],b,1)},r=function(a,b,c){if(a===b)return c;for(a=a.nextSibling;a;){if(a===b)return-1;a=a.nextSibling}return 1});n=document.createElement("div");q="script"+
(new Date).getTime();var B=document.documentElement;n.innerHTML="<a name='"+q+"'/>";B.insertBefore(n,B.firstChild);document.getElementById(q)&&(p.find.ID=function(a,b,c){if("undefined"!==typeof b.getElementById&&!c)return(b=b.getElementById(a[1]))?b.id===a[1]||"undefined"!==typeof b.getAttributeNode&&b.getAttributeNode("id").nodeValue===a[1]?[b]:void 0:[]},p.filter.ID=function(a,b){var c="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id");return 1===a.nodeType&&c&&c.nodeValue===b});
B.removeChild(n);B=n=null;n=document.createElement("div");n.appendChild(document.createComment(""));0<n.getElementsByTagName("*").length&&(p.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if("*"===a[1]){for(var d=[],f=0;c[f];f++)1===c[f].nodeType&&d.push(c[f]);c=d}return c});n.innerHTML="<a href='#'></a>";n.firstChild&&("undefined"!==typeof n.firstChild.getAttribute&&"#"!==n.firstChild.getAttribute("href"))&&(p.attrHandle.href=function(a){return a.getAttribute("href",2)});n=null;if(document.querySelectorAll){var x=
m,n=document.createElement("div");n.innerHTML="<p class='TEST'></p>";if(!(n.querySelectorAll&&0===n.querySelectorAll(".TEST").length)){var m=function(a,b,c,d){b=b||document;if(!d&&!m.isXML(b)){var f=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(a);if(f&&(1===b.nodeType||9===b.nodeType)){if(f[1])return s(b.getElementsByTagName(a),c);if(f[2]&&p.find.CLASS&&b.getElementsByClassName)return s(b.getElementsByClassName(f[2]),c)}if(9===b.nodeType){if("body"===a&&b.body)return s([b.body],c);if(f&&f[3]){var g=
b.getElementById(f[3]);if(g&&g.parentNode){if(g.id===f[3])return s([g],c)}else return s([],c)}try{return s(b.querySelectorAll(a),c)}catch(j){}}else if(1===b.nodeType&&"object"!==b.nodeName.toLowerCase()){var f=b,i=(g=b.getAttribute("id"))||"__sizzle__",k=b.parentNode,e=/^\s*[+~]/.test(a);g?i=i.replace(/'/g,"\\$&"):b.setAttribute("id",i);e&&k&&(b=b.parentNode);try{if(!e||k)return s(b.querySelectorAll("[id='"+i+"'] "+a),c)}catch(h){}finally{g||f.removeAttribute("id")}}}return x(a,b,c,d)},A;for(A in x)m[A]=
x[A];n=null}}A=document.documentElement;var K=A.matchesSelector||A.mozMatchesSelector||A.webkitMatchesSelector||A.msMatchesSelector;if(K){var y=!K.call(document.createElement("div"),"div"),M=!1;try{K.call(document.documentElement,"[test!='']:sizzle")}catch(N){M=!0}m.matchesSelector=function(a,b){b=b.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!m.isXML(a))try{if(M||!p.match.PSEUDO.test(b)&&!/!=/.test(b)){var c=K.call(a,b);if(c||!y||a.document&&11!==a.document.nodeType)return c}}catch(d){}return 0<
m(b,null,null,[a]).length}}A=document.createElement("div");A.innerHTML="<div class='test e'></div><div class='test'></div>";A.getElementsByClassName&&0!==A.getElementsByClassName("e").length&&(A.lastChild.className="e",1!==A.getElementsByClassName("e").length&&(p.order.splice(1,0,"CLASS"),p.find.CLASS=function(a,b,c){if("undefined"!==typeof b.getElementsByClassName&&!c)return b.getElementsByClassName(a[1])},A=null));m.contains=document.documentElement.contains?function(a,b){return a!==b&&(a.contains?
a.contains(b):!0)}:document.documentElement.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:function(){return!1};m.isXML=function(a){return(a=(a?a.ownerDocument||a:0).documentElement)?"HTML"!==a.nodeName:!1};var L=function(a,b,c){for(var d,f=[],g="",b=b.nodeType?[b]:b;d=p.match.PSEUDO.exec(a);)g+=d[0],a=a.replace(p.match.PSEUDO,"");a=p.relative[a]?a+"*":a;d=0;for(var i=b.length;d<i;d++)m(a,b[d],f,c);return m.filter(g,f)};window.Recite.Sizzle=m})();
(function(){function e(s,n){var y,r,t,u,z,s=s?s:"",n=n||{};if("object"==typeof s&&s.hasOwnProperty("_tc_id"))return s;r=s;z=u=t=0;var I=1,G=y=!1;if("string"==typeof r)a:{r=r.replace(i,"").replace(k,"").toLowerCase();var H=!1;if(q[r])r=q[r],H=!0;else if("transparent"==r){r={r:0,g:0,b:0,a:0,format:"name"};break a}var w;r=(w=x.rgb.exec(r))?{r:w[1],g:w[2],b:w[3]}:(w=x.rgba.exec(r))?{r:w[1],g:w[2],b:w[3],a:w[4]}:(w=x.hsl.exec(r))?{h:w[1],s:w[2],l:w[3]}:(w=x.hsla.exec(r))?{h:w[1],s:w[2],l:w[3],a:w[4]}:
(w=x.hsv.exec(r))?{h:w[1],s:w[2],v:w[3]}:(w=x.hex6.exec(r))?{r:parseInt(w[1],16),g:parseInt(w[2],16),b:parseInt(w[3],16),format:H?"name":"hex"}:(w=x.hex3.exec(r))?{r:parseInt(w[1]+""+w[1],16),g:parseInt(w[2]+""+w[2],16),b:parseInt(w[3]+""+w[3],16),format:H?"name":"hex"}:!1}"object"==typeof r&&(r.hasOwnProperty("r")&&r.hasOwnProperty("g")&&r.hasOwnProperty("b")?(t=255*a(r.r,255),u=255*a(r.g,255),z=255*a(r.b,255),y=!0,G="%"===String(r.r).substr(-1)?"prgb":"rgb"):r.hasOwnProperty("h")&&r.hasOwnProperty("s")&&
r.hasOwnProperty("v")?(r.s=g(r.s),r.v=g(r.v),y=r.h,u=r.s,z=r.v,y=6*a(y,360),u=a(u,100),z=a(z,100),t=m.floor(y),w=y-t,y=z*(1-u),G=z*(1-w*u),w=z*(1-(1-w)*u),H=t%6,t=255*[z,G,y,y,w,z][H],u=255*[w,z,z,G,y,y][H],z=255*[y,y,w,z,z,G][H],y=!0,G="hsv"):r.hasOwnProperty("h")&&(r.hasOwnProperty("s")&&r.hasOwnProperty("l"))&&(r.s=g(r.s),r.l=g(r.l),t=r.h,y=r.s,z=r.l,u=function(a,b,c){0>c&&(c+=1);1<c&&(c-=1);return c<1/6?a+6*(b-a)*c:0.5>c?b:c<2/3?a+6*(b-a)*(2/3-c):a},t=a(t,360),y=a(y,100),z=a(z,100),0===y?y=z=
G=z:(G=0.5>z?z*(1+y):z+y-z*y,w=2*z-G,y=u(w,G,t+1/3),z=u(w,G,t),G=u(w,G,t-1/3)),t=255*y,u=255*z,z=255*G,y=!0,G="hsl"),r.hasOwnProperty("a")&&(I=r.a));I=b(I);r=r.format||G;t=p(255,v(t,0));u=p(255,v(u,0));z=p(255,v(z,0));var C=t,D=u,E=z,F=I,J=l(100*F)/100,I=n.format||r;1>C&&(C=l(C));1>D&&(D=l(D));1>E&&(E=l(E));return{ok:y,format:I,_tc_id:j++,alpha:F,getAlpha:function(){return F},setAlpha:function(a){F=b(a);J=l(100*F)/100},toHsv:function(){var a=d(C,D,E);return{h:360*a.h,s:a.s,v:a.v,a:F}},toHsvString:function(){var a=
d(C,D,E),b=l(360*a.h),c=l(100*a.s),a=l(100*a.v);return 1==F?"hsv("+b+", "+c+"%, "+a+"%)":"hsva("+b+", "+c+"%, "+a+"%, "+J+")"},toHsl:function(){var a=h(C,D,E);return{h:360*a.h,s:a.s,l:a.l,a:F}},toHslString:function(){var a=h(C,D,E),b=l(360*a.h),c=l(100*a.s),a=l(100*a.l);return 1==F?"hsl("+b+", "+c+"%, "+a+"%)":"hsla("+b+", "+c+"%, "+a+"%, "+J+")"},toHex:function(a){return c(C,D,E,a)},toHexString:function(a){return"#"+c(C,D,E,a)},toRgb:function(){return{r:l(C),g:l(D),b:l(E),a:F}},toRgbString:function(){return 1==
F?"rgb("+l(C)+", "+l(D)+", "+l(E)+")":"rgba("+l(C)+", "+l(D)+", "+l(E)+", "+J+")"},toPercentageRgb:function(){return{r:l(100*a(C,255))+"%",g:l(100*a(D,255))+"%",b:l(100*a(E,255))+"%",a:F}},toPercentageRgbString:function(){return 1==F?"rgb("+l(100*a(C,255))+"%, "+l(100*a(D,255))+"%, "+l(100*a(E,255))+"%)":"rgba("+l(100*a(C,255))+"%, "+l(100*a(D,255))+"%, "+l(100*a(E,255))+"%, "+J+")"},toName:function(){return 0===F?"transparent":B[c(C,D,E,!0)]||!1},toFilter:function(a){var b=c(C,D,E),d=b,g=Math.round(255*
parseFloat(F)).toString(16),i=g,j=n&&n.gradientType?"GradientType = 1, ":"";a&&(a=e(a),d=a.toHex(),i=Math.round(255*parseFloat(a.alpha)).toString(16));return"progid:DXImageTransform.Microsoft.gradient("+j+"startColorstr=#"+f(g)+b+",endColorstr=#"+f(i)+d+")"},toString:function(a){var b=!!a,a=a||this.format,c=!1,b=!b&&(1>F&&0<F)&&("hex"===a||"hex6"===a||"hex3"===a||"name"===a);"rgb"===a&&(c=this.toRgbString());"prgb"===a&&(c=this.toPercentageRgbString());if("hex"===a||"hex6"===a)c=this.toHexString();
"hex3"===a&&(c=this.toHexString(!0));"name"===a&&(c=this.toName());"hsl"===a&&(c=this.toHslString());"hsv"===a&&(c=this.toHsvString());return b?this.toRgbString():c||this.toHexString()}}}function h(b,c,d){var b=a(b,255),c=a(c,255),d=a(d,255),f=v(b,c,d),g=p(b,c,d),i,j=(f+g)/2;if(f==g)i=g=0;else{var k=f-g,g=0.5<j?k/(2-f-g):k/(f+g);switch(f){case b:i=(c-d)/k+(c<d?6:0);break;case c:i=(d-b)/k+2;break;case d:i=(b-c)/k+4}i/=6}return{h:i,s:g,l:j}}function d(b,c,d){var b=a(b,255),c=a(c,255),d=a(d,255),f=v(b,
c,d),g=p(b,c,d),i,j=f-g;if(f==g)i=0;else{switch(f){case b:i=(c-d)/j+(c<d?6:0);break;case c:i=(d-b)/j+2;break;case d:i=(b-c)/j+4}i/=6}return{h:i,s:0===f?0:j/f,v:f}}function c(a,b,c,d){a=[f(l(a).toString(16)),f(l(b).toString(16)),f(l(c).toString(16))];return d&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function b(a){a=parseFloat(a);if(isNaN(a)||0>a||1<a)a=1;return a}function a(a,b){"string"==
typeof a&&(-1!=a.indexOf(".")&&1===parseFloat(a))&&(a="100%");var c="string"===typeof a&&-1!=a.indexOf("%"),a=p(b,v(0,parseFloat(a)));c&&(a=parseInt(a*b,10)/100);return 1E-6>m.abs(a-b)?1:a%b/parseFloat(b)}function f(a){return 1==a.length?"0"+a:""+a}function g(a){1>=a&&(a=100*a+"%");return a}var i=/^[\s,#]+/,k=/\s+$/,j=0,m=Math,l=m.round,p=m.min,v=m.max,n=m.random;e.fromRatio=function(a,b){if("object"==typeof a){var c={},d;for(d in a)a.hasOwnProperty(d)&&(c[d]="a"===d?a[d]:g(a[d]));a=c}return e(a,
b)};e.equals=function(a,b){return!a||!b?!1:e(a).toRgbString()==e(b).toRgbString()};e.random=function(){return e.fromRatio({r:n(),g:n(),b:n()})};e.desaturate=function(a,b){var b=0===b?0:b||10,c=e(a).toHsl();c.s-=b/100;c.s=p(1,v(0,c.s));return e(c)};e.saturate=function(a,b){var b=0===b?0:b||10,c=e(a).toHsl();c.s+=b/100;c.s=p(1,v(0,c.s));return e(c)};e.greyscale=function(a){return e.desaturate(a,100)};e.lighten=function(a,b){var b=0===b?0:b||10,c=e(a).toHsl();c.l+=b/100;c.l=p(1,v(0,c.l));return e(c)};
e.darken=function(a,b){var b=0===b?0:b||10,c=e(a).toHsl();c.l-=b/100;c.l=p(1,v(0,c.l));return e(c)};e.complement=function(a){a=e(a).toHsl();a.h=(a.h+180)%360;return e(a)};e.triad=function(a){var b=e(a).toHsl(),c=b.h;return[e(a),e({h:(c+120)%360,s:b.s,l:b.l}),e({h:(c+240)%360,s:b.s,l:b.l})]};e.tetrad=function(a){var b=e(a).toHsl(),c=b.h;return[e(a),e({h:(c+90)%360,s:b.s,l:b.l}),e({h:(c+180)%360,s:b.s,l:b.l}),e({h:(c+270)%360,s:b.s,l:b.l})]};e.splitcomplement=function(a){var b=e(a).toHsl(),c=b.h;return[e(a),
e({h:(c+72)%360,s:b.s,l:b.l}),e({h:(c+216)%360,s:b.s,l:b.l})]};e.analogous=function(a,b,c){var b=b||6,c=c||30,d=e(a).toHsl(),c=360/c,a=[e(a)];for(d.h=(d.h-(c*b>>1)+720)%360;--b;)d.h=(d.h+c)%360,a.push(e(d));return a};e.monochromatic=function(a,b){for(var b=b||6,c=e(a).toHsv(),d=c.h,f=c.s,c=c.v,g=[],i=1/b;b--;)g.push(e({h:d,s:f,v:c})),c=(c+i)%1;return g};e.readability=function(a,b){var c=e(a).toRgb(),d=e(b).toRgb(),f=(299*c.r+587*c.g+114*c.b)/1E3,g=(299*d.r+587*d.g+114*d.b)/1E3,c=Math.max(c.r,d.r)-
Math.min(c.r,d.r)+Math.max(c.g,d.g)-Math.min(c.g,d.g)+Math.max(c.b,d.b)-Math.min(c.b,d.b);return{brightness:Math.abs(f-g),color:c}};e.readable=function(a,b){var c=e.readability(a,b);return 125<c.brightness&&500<c.color};e.mostReadable=function(a,b){for(var c=null,d=0,f=!1,g=0;g<b.length;g++){var i=e.readability(a,b[g]),j=125<i.brightness&&500<i.color,i=3*(i.brightness/125)+i.color/500;if(j&&!f||j&&f&&i>d||!j&&!f&&i>d)f=j,d=i,c=e(b[g])}return c};var q=e.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",
aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",
darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",
grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",
lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",
palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",
tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},s=e,t=q,u={},r;for(r in t)t.hasOwnProperty(r)&&(u[t[r]]=r);var B=s.hexNames=u,x;x={rgb:RegExp("rgb[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),rgba:RegExp("rgba[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),
hsl:RegExp("hsl[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),hsla:RegExp("hsla[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),hsv:RegExp("hsv[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),
hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};"undefined"!==typeof module&&module.exports?module.exports=e:"undefined"!==typeof define&&define(function(){return e});window.Recite.Tinycolor=e})(this);
(function(e){function h(a,b){for(var c=a.length;c--;)if(a[c]===b)return c;return-1}function d(a){var d,f,g,e,m,q;d=a.keyCode;-1==h(v,d)&&v.push(d);if(93==d||224==d)d=91;if(d in j)for(g in j[d]=!0,l)l[g]==d&&(c[g]=!0);else{for(i in j)j[i]=a[n[i]];if(c.filter.call(this,a)&&d in k){q=b();for(e=0;e<k[d].length;e++)if(f=k[d][e],f.scope==q||"all"==f.scope){m=0<f.mods.length;for(g in j)if(!j[g]&&-1<h(f.mods,+g)||j[g]&&-1==h(f.mods,+g))m=!1;if((0==f.mods.length&&!j[16]&&!j[18]&&!j[17]&&!j[91]||m)&&!1===f.method(a,
f))a.preventDefault?a.preventDefault():a.returnValue=!1,a.stopPropagation&&a.stopPropagation(),a.cancelBubble&&(a.cancelBubble=!0)}}}}function c(b,c,d){var g,i;g=a(b);void 0===d&&(d=c,c="all");for(var j=0;j<g.length;j++)i=[],b=g[j].split("+"),1<b.length&&(i=f(b),b=[b[b.length-1]]),b=b[0],b=p[b]||b.toUpperCase().charCodeAt(0),b in k||(k[b]=[]),k[b].push({shortcut:g[j],scope:c,method:d,key:g[j],mods:i})}function b(){return m||"all"}function a(a){a=a.replace(/\s/g,"");a=a.split(",");""==a[a.length-1]&&
(a[a.length-2]+=",");return a}function f(a){for(var a=a.slice(0,a.length-1),b=0;b<a.length;b++)a[b]=l[a[b]];return a}function g(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,function(){c(window.event)})}var i,k={},j={16:!1,18:!1,17:!1,91:!1},m="all",l={"\u21e7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,command:91},p={backspace:8,tab:9,clear:12,enter:13,"return":13,esc:27,escape:27,space:32,left:37,up:38,right:39,
down:40,del:46,"delete":46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},v=[];for(i=1;20>i;i++)p["f"+i]=111+i;var n={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};for(i in l)c[i]=!1;g(document,"keydown",function(a){d(a)});g(document,"keyup",function(a){var a=a.keyCode,b,d=h(v,a);0<=d&&v.splice(d,1);if(93==a||224==a)a=91;if(a in j)for(b in j[a]=!1,l)l[b]==a&&(c[b]=!1)});g(window,"focus",function(){for(i in j)j[i]=
!1;for(i in l)c[i]=!1});var q=e.key;e.key=c;e.key.setScope=function(a){m=a||"all"};e.key.getScope=b;e.key.deleteScope=function(a){var b,c,d;for(b in k){c=k[b];for(d=0;d<c.length;)c[d].scope===a?c.splice(d,1):d++}};e.key.filter=function(a){a=(a.target||a.srcElement).tagName;return!("INPUT"==a||"SELECT"==a||"TEXTAREA"==a)};e.key.isPressed=function(a){"string"==typeof a&&(a=p[a]||a.toUpperCase().charCodeAt(0));return-1!=h(v,a)};e.key.getPressedKeyCodes=function(){return v.slice(0)};e.key.noConflict=
function(){var a=e.key;e.key=q;return a};e.key.unbind=function(c,d){var g,i,j=[],e,h;g=a(c);for(h=0;h<g.length;h++){i=g[h].split("+");1<i.length&&(j=f(i),c=i[i.length-1]);c=p[c]||c.toUpperCase().charCodeAt(0);void 0===d&&(d=b());if(!k[c])break;for(e in k[c]){i=k[c][e];var m;if(m=i.scope===d)a:if(i=i.mods,i.length!=j.length)m=!1;else{for(m=0;m<i.length;m++)if(i[m]!==j[m]){m=!1;break a}m=!0}m&&(k[c][e]={})}}};"undefined"!==typeof module&&(module.exports=key);window.Recite.Key=key})(this);
Recite.AssetLoader=function(e){function h(a,b){var c=e.createElement(a),d;for(d in b)b.hasOwnProperty(d)&&c.setAttribute(d,b[d]);c.setAttribute("data-recite-skip","true");return c}function d(a){var b=i[a],d,f;b&&(d=b.callback,f=b.urls,f.shift(),k=0,f.length||(d&&d.call(b.context,b.obj),i[a]=null,j[a].length&&c(a)))}function c(c,k,m,n,q){var s=function(){d(c)},t="css"===c,u=[],r,B,x,A;f||(r=navigator.userAgent,f={async:!0===e.createElement("script").async},(f.webkit=/AppleWebKit\//.test(r))||(f.ie=
/MSIE|Trident/.test(r))||(f.opera=/Opera/.test(r))||(f.gecko=/Gecko\//.test(r))||(f.unknown=!0));if(k)if(k="string"===typeof k?[k]:k.concat(),t||f.async||f.gecko||f.opera)j[c].push({urls:k,callback:m,obj:n,context:q});else{r=0;for(B=k.length;r<B;++r)j[c].push({urls:[k[r]],callback:r===B-1?m:null,obj:n,context:q})}if(!i[c]&&(A=i[c]=j[c].shift())){g||(g=e.head||e.getElementsByTagName("head")[0]);k=A.urls;r=0;for(B=k.length;r<B;++r)m=k[r],t?x=f.gecko?h("style"):h("link",{href:m,rel:"stylesheet"}):(x=
h("script",{src:m}),x.async=!1),x.className="lazyload",x.setAttribute("charset","utf-8"),f.ie&&!t&&"onreadystatechange"in x&&!("draggable"in x)?x.onreadystatechange=function(){/loaded|complete/.test(x.readyState)&&(x.onreadystatechange=null,s())}:t&&(f.gecko||f.webkit)?f.webkit?(A.urls[r]=x.href,a()):(x.innerHTML='@import "'+m+'";',b(x)):x.onload=x.onerror=s,u.push(x);r=0;for(B=u.length;r<B;++r)g.appendChild(u[r])}}function b(a){var c;try{c=!!a.sheet.cssRules}catch(f){k+=1;200>k?setTimeout(function(){b(a)},
50):c&&d("css");return}d("css")}function a(){var b=i.css,c;if(b){for(c=m.length;0<=--c;)if(m[c].href===b.urls[0]){d("css");break}k+=1;b&&(200>k?setTimeout(a,50):d("css"))}}var f,g,i={},k=0,j={css:[],js:[]},m=e.styleSheets;return{css:function(a,b,d,f){c("css",a,b,d,f)},js:function(a,b,d,f){c("js",a,b,d,f)}}}(this.document);Recite.namespace("Preset");Recite.namespace("preset");
Recite.Preset=Recite.preset=function(){return{square24:{background:Recite.baseUrl+"img/buttons/square24.gif",width:"24px",height:"24px"},square36:{background:Recite.baseUrl+"img/buttons/square36.gif",width:"36px",height:"36px"},hor24_recite:{background:Recite.baseUrl+"img/buttons/recite_hor24.gif",width:"83px",height:"24px"},hor24_recite_red:{background:Recite.baseUrl+"img/buttons/recite_hor24_red.gif",width:"83px",height:"24px"},hor48_recite:{background:Recite.baseUrl+"img/buttons/recite_hor48.gif",
width:"166px",height:"48px"},hor48_recite_red:{background:Recite.baseUrl+"img/buttons/recite_hor48_red.gif",width:"166px",height:"48px"},ver24_recite:{background:Recite.baseUrl+"img/buttons/recite_ver24.gif",width:"24px",height:"109px"},ver24_recite_red:{background:Recite.baseUrl+"img/buttons/recite_ver24_red.gif",width:"24px",height:"109px"},ver48_recite:{background:Recite.baseUrl+"img/buttons/recite_ver48.gif",width:"48px",height:"217px"},ver48_recite_red:{background:Recite.baseUrl+"img/buttons/recite_ver48_red.gif",
width:"48px",height:"217px"},hor24_speak:{background:Recite.baseUrl+"img/buttons/speak_hor24.gif",width:"79px",height:"24px"},hor24_speak_red:{background:Recite.baseUrl+"img/buttons/speak_hor24_red.gif",width:"79px",height:"24px"},hor48_speak:{background:Recite.baseUrl+"img/buttons/speak_hor48.gif",width:"158px",height:"48px"},hor48_speak_red:{background:Recite.baseUrl+"img/buttons/speak_hor48_red.gif",width:"158px",height:"48px"},ver24_speak:{background:Recite.baseUrl+"img/buttons/speak_ver24.gif",
width:"24px",height:"109px"},ver24_speak_red:{background:Recite.baseUrl+"img/buttons/speak_ver24_red.gif",width:"24px",height:"109px"},ver48_speak:{background:Recite.baseUrl+"img/buttons/speak_ver48.gif",width:"48px",height:"217px"},ver48_speak_red:{background:Recite.baseUrl+"img/buttons/speak_ver48_red.gif",width:"48px",height:"217px"},square24_png:{background:Recite.baseUrl+"img/buttons/24x24.png",width:"24px",height:"24px"},square36_png:{background:Recite.baseUrl+"img/buttons/36x36.png",width:"36px",
height:"36px"},hor24_recite_png:{background:Recite.baseUrl+"img/buttons/recite_hor24.png",width:"83px",height:"24px"},hor24_recite_red_png:{background:Recite.baseUrl+"img/buttons/recite_hor24_red.png",width:"83px",height:"24px"},hor48_recite_png:{background:Recite.baseUrl+"img/buttons/recite_hor48.png",width:"166px",height:"48px"},hor48_recite_red_png:{background:Recite.baseUrl+"img/buttons/recite_hor48_red.png",width:"166px",height:"48px"},ver24_recite_png:{background:Recite.baseUrl+"img/buttons/recite_ver24.png",
width:"24px",height:"109px"},ver24_recite_red_png:{background:Recite.baseUrl+"img/buttons/recite_ver24_red.png",width:"24px",height:"109px"},ver48_recite_png:{background:Recite.baseUrl+"img/buttons/recite_ver48.png",width:"48px",height:"217px"},ver48_recite_red_png:{background:Recite.baseUrl+"img/buttons/recite_ver48_red.png",width:"48px",height:"217px"},hor24_speak_png:{background:Recite.baseUrl+"img/buttons/speak_hor24.png",width:"79px",height:"24px"},hor24_speak_red_png:{background:Recite.baseUrl+
"img/buttons/speak_hor24_red.png",width:"79px",height:"24px"},hor48_speak_png:{background:Recite.baseUrl+"img/buttons/speak_hor48.png",width:"158px",height:"48px"},hor48_speak_red_png:{background:Recite.baseUrl+"img/buttons/speak_hor48_red.png",width:"158px",height:"48px"},ver24_speak_png:{background:Recite.baseUrl+"img/buttons/speak_ver24.png",width:"24px",height:"109px"},ver24_speak_red_png:{background:Recite.baseUrl+"img/buttons/speak_ver24_red.png",width:"24px",height:"109px"},ver48_speak_png:{background:Recite.baseUrl+
"img/buttons/speak_ver48.png",width:"48px",height:"217px"},ver48_speak_red_png:{background:Recite.baseUrl+"img/buttons/speak_ver48_red.png",width:"48px",height:"217px"}}}();Recite.namespace("Ajax");
Recite.Ajax=function(){function e(a){var c=Recite.Util.clone(b);return Recite.Util.merge(c,a)}function h(a){var b="";if(a.getResponseHeader)b=/^application\/json/.test(a.getResponseHeader("Content-Type"))?ReciteJSON.parse(a.responseText):a.responseText;else if(0<a.responseText.length)try{b=ReciteJSON.parse(a.responseText)}catch(c){b=a.responseText}return b}function d(a,b){var b=e(b),c=window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");"GET"===b.method&&(null!==
b.data&&"undefined"!==typeof b.data)&&(a+=Recite.Util.buildQueryString(b.data));c.open(b.method,a,b.async,b.user,b.password);c.timeout=b.timeout;c.setRequestHeader("Content-Type",b.contentType);c.onreadystatechange=function(){if(4===c.readyState){var a=h(c);200===c.status?b.success(c,a):b.error(c,a)}};null!==b.beforeSend&&b.beforeSend(c);c.send(b.data)}function c(a,b){var c=new flensed.flXHR({autoUpdatePlayer:!1,instanceId:"recite-proxy",xmlResponseText:!1,onreadystatechange:function(a){if(4===a.readyState){var c=
h(a);200===a.status?b.success(a,c):b.error(a,c)}}});c.open(b.method,a);null!==b.beforeSend&&b.beforeSend(c);c.send(b.data)}var b={method:"POST",contentType:"application/x-www-form-urlencoded",async:!0,username:null,password:null,success:function(){},error:function(){},beforeSend:null,data:null,timeout:1E4};return{get:function(a,b,c){Recite.Debug.log("Recite.Ajax","Making AJAX request to: "+a);this.ajax(a,{method:"GET",data:b,success:c})},post:function(a,b,c){this.ajax(a,{method:"POST",data:b,success:c})},
ajax:function(a,b){"undefined"!==typeof b.data&&("POST"==b.method&&"object"==Recite.Util.type(b.data))&&(b.data=ReciteJSON.stringify(b.data));if(String(window.location).substr(0,Recite.baseUrl.length)==Recite.baseUrl)return d(a,b);if("withCredentials"in(window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP")))d(a,b);else if("undefined"!==typeof window.XDomainRequest){var g=a,i=b,i=e(i),k=new XDomainRequest;"GET"===i.method&&(null!==i.data&&"undefined"!==typeof i.data)&&
(g+=Recite.Util.buildQueryString(i.data));k.onload=function(){var a=h(k);i.success(k,a)};k.onerror=function(){var a=h(k);i.error(k,a)};k.open(i.method,g);k.timeout=i.timeout;null!==i.beforeSend&&i.beforeSend(k);k.send(i.data)}else"undefined"===typeof window.flensed?Recite.AssetLoader.js(Recite.baseUrl+"/js/flxhr/flXHR.js",function(){c(b)}):c(a,b)},nativeXDomainSupported:function(){return"undefined"!==typeof(new XMLHttpRequest).withCredentials||"undefined"!==typeof window.XDomainRequest?!0:!1}}}();
Recite.namespace("Api");
Recite.Api=function(){function e(c,b){var a=d.endpoint+c,f=Recite.Util.merge({access_token:b.access_token,v:Recite.version},b.data);return a+Recite.Util.buildQueryString(f)}function h(c,b,a){var f=d.endpoint+c,f=f+Recite.Util.buildQueryString({access_token:a.access_token,v:Recite.version});Recite.Ajax.ajax(f,{method:b,data:a.data,contentType:a.contentType,success:function(b,c){a.success&&a.success(c)},error:function(d,i){Recite.Debug.log("Recite.Api","Error occured during API call to: "+f,i);if("undefined"!==
typeof i.error)if("invalid_grant"===i.error)Recite.Debug.log("Recite.Api","Requesting a new token."),Recite.Auth.clear(),Recite.Api.call(c,b,a);else{if("invalid_token"===i.error||"invalid_referrer"===i.error||"invalid_ip"===i.error)alert("We have detected invalid usage of Recite and we have disabled future access. If you think this is an error please contact support@reciteme.com"),window.location.reload();a.error&&a.error(i)}}})}var d={endpoint:Recite.baseUrl+"/api/"};return{setOptions:function(c){d=
Recite.Util.merge(d,c)},call:function(c,b,a){a.contentType=a.contentType||"application/x-www-form-urlencoded";"undefined"===typeof a.authRequired&&(a.authRequired=!0);a.authRequired?Recite.Auth.getStatus(function(d){"authorized"===d.state&&(a.access_token=d.access_token,h(c,b,a))}):h(c,b,a)},getUri:function(c,b){"undefined"===typeof b.authRequired&&(b.authRequired=!0);b.authRequired?Recite.Auth.getStatus(function(a){"authorized"===a.state&&(b.access_token=a.access_token,b.success&&b.success(e(c,b)))}):
b.success&&b.success(e(c,b))}}}();Recite.namespace("Recite.Dom");
Recite.Dom=function(){function e(d){if(d.nodeType===Node.TEXT_NODE)return d.textContent;try{var c=getComputedStyle(d);if(c&&"none"===c.display)return"";for(var c="",b=0;b<d.childNodes.length;b++)c+=e(d.childNodes[b]);return c}catch(a){return Recite.Debug.log("Recite.Dom","Unable to get getComputedStyle() of element: "+d),Recite.Debug.log("Recite.Dom",a),""}}var h={word_filters:{}};return{getPosition:function(d){var c=0,b=0;if(d.offsetParent){do"BODY"!==d.tagName&&(c+=d.offsetLeft,b+=d.offsetTop);
while(d=d.offsetParent)}return{left:c,top:b}},isCurrent:function(d){var c=Recite.Dom.getPosition(d),d=d.currentStyle;return 0!==c.left&&0!==c.top&&0<d.width&&0<d.height?!0:!1},getScroll:function(d){"undefined"===typeof d&&(d=window);var c=d.document,b,a;d.pageYOffset?(a=d.pageYOffset,b=d.pageXOffset):c.documentElement&&c.documentElement.scrollTop?(a=c.documentElement.scrollTop,b=c.documentElement.scrollLeft):c.body&&(a=c.body.scrollTop,b=c.body.scrollLeft);return{x:b,y:a}},getStyle:function(d,c){var b;
d.currentStyle?(c=c.replace(/(\-[a-z])/g,function(a){return a.toUpperCase().replace("-","")}),b=d.currentStyle[c]):window.getComputedStyle&&(b=document.defaultView.getComputedStyle(d,null).getPropertyValue(c));return b},getStyles:function(d){var c;d.currentStyle?c=d.currentStyle:window.getComputedStyle&&(c=document.defaultView.getComputedStyle(d,null));return c},getText:function(d,c){var b="";if("undefined"==typeof d)return"";if("undefined"!==typeof c)return 0===d.childNodes.length&&(b+=c.call(d)),
Recite.Util.each(d.childNodes,function(a,d){b+=c.call(d)}),b.trim();"IMG"===d.tagName?b=d.getAttribute("alt"):3===d.nodeType?b=d.data:"INPUT"===d.tagName||"TEXTAREA"===d.tagName?""==d.value&&(b=d.getAttribute("placeholder")):b=e(d);null==b&&(b="");for(var a in h.word_filters)b=b.toLowerCase().replace(a,h.word_filters[a]);return null!=b?b.trim():""},getAllWindows:function(d,c){c||(c=[]);d||(d=window);0===c.length&&c.push(d);for(var b=d.frames,a=0;a<b.length;a++)try{b[a].document.body,c.push(b[a]),
0<b[a].frames.length&&c.concat(c,Recite.Dom.getAllWindows(b[a],c))}catch(f){}return c},prepend:function(d,c){if("string"===Recite.Util.type(d)){var b=c.ownerDocument.createElement("div");b.innerHTML=d;for(var a=0;a<b.childNodes.length;a++)c.insertBefore(b.childNodes[0],c.childNodes[0])}else c.insertBefore(d,c.childNodes[0])},append:function(d,c){if("string"===Recite.Util.type(d)){var b=c.ownerDocument.createElement("div");b.innerHTML=d;for(var a=0;a<b.childNodes.length;a++)c.appendChild(b.childNodes[a])}else c.appendChild(d)},
getSelected:function(){var d="";"undefined"!==typeof window.getSelection?d=window.getSelection().toString():"undefined"!==typeof document.selection&&"Text"===document.selection.type&&(d=document.selection.createRange().text);return d.replace(/^\s+|\s+$/g,"")},isDescendant:function(d,c){for(;d;){if(d===c)return!0;d=d.parentNode}return!1},getAncestors:function(d){for(var c=null,b=[];void 0!==d&&null!==(c=d.parentNode)&&!(void 0!==c&&1!==c.nodeType);)b.push(c),d=c;return b},getWindowDimensions:function(d){var c=
d.document,b,a;if("number"===typeof d.innerWidth)b=d.innerWidth,a=d.innerHeight;else if(c.documentElement&&(c.documentElement.clientWidth||c.documentElement.clientHeight))b=c.documentElement.clientWidth,a=c.documentElement.clientHeight;else if(c.body&&(c.body.clientWidth||c.body.clientHeight))b=c.body.clientWidth,a=c.body.clientHeight;return{width:b,height:a}},getLanguage:function(d){var c=null;if(void 0===d)return c;if(1===d.nodeType&&""!==d.lang)return d.lang;var b=d.childNodes;if(void 0!==b&&(void 0!=
b.length&&0<b.length)&&(Recite.Util.each(b,function(a,b){for(;null!==b;){if(3!==b.nodeType&&void 0!==b.lang&&""!==b.lang){c=b.lang;break}b=0<b.childNodes.length?b.childNodes[0]:null}}),null!==c))return c;var d=Recite.Dom.getAncestors(d),a;for(a in d){b=d[a];if(void 0!==b&&b.lang&&0!==b.lang.length){c=b.lang;break}if(void 0!==b&&1===b.nodeType&&null!==b.getAttribute("xml:lang")&&""!==b.getAttribute("xml:lang")){c=b.getAttribute("xml:lang");break}}null===c&&(a=Recite.Sizzle('meta[http-equiv="Content-Language"]'),
0<a.length&&(c=a[0].getAttribute("content")));return null!==c&&"string"===typeof c?c.toLowerCase():null},detectLanguage:function(d,c){!d||0==d.length?void 0!=c&&c(null):(Recite.Debug.log("Recite.Dom","Auto detecting language"),Recite.Api.call("language-detect","POST",{data:{q:d},contentType:"application/json",success:function(b){Recite.Debug.log("Recite.Dom","Language detected: "+b.lang);void 0!=c&&c(null!=b.lang?b.lang.toLowerCase():null)},error:function(){void 0!=c&&c(null)}}))},getNextElement:function(d,
c){"undefined"==typeof c&&(c=!1);var b="recite, [data-recite-ele] "+(Recite.FrameUpdater.isActive()?", iframe":""),b=Recite.Sizzle(b);if("undefined"===d||null===d)return Recite.Debug.log("Recite.DOM","Current element is null - probably been removed from DOM"),b[0];for(var a=null,f=0;f<b.length;f++)if(b[f]===d||null===d||null!==a){if(null===d)a=b[0];else if("undefined"!==typeof b[f+1])a=b[f+1];else break;var g=Recite.Dom.getPosition(a);if(0>g.left||0>g.top||0==g.top&&0==g.left)d=a;else{if("IFRAME"==
a.nodeName&&!c)Recite.Event.publish("FrameUpdater:EnterFrame",{element:a,direction:"next"});else return a;break}}return null},getPreviousElement:function(d,c){"undefined"==typeof c&&(c=!1);var b="recite, [data-recite-ele] "+(Recite.FrameUpdater.isActive()?", iframe":""),a=Recite.Sizzle(b);if("undefined"===d||null===d)return Recite.Debug.log("Recite.DOM","getPreviousElement return 1st ele"),a[0];for(var b=null,f=a.length;0<f;f--)if(a[f]==d||null==d||null!==b){if(null==d)b=a[0];else if("undefined"!==
typeof a[f-1])b=a[f-1];else break;a=Recite.Dom.getPosition(b);if(0>a.left||0>a.top||0==a.top&&0==a.left)return d=b;if("IFRAME"==b.nodeName&&!c)Recite.Event.publish("FrameUpdater:EnterFrame",{element:b,direction:"prev"});else return b;break}return null},getLastElement:function(){var d="recite, [data-recite-ele] "+(Recite.FrameUpdater.isActive()?", iframe":""),d=Recite.Sizzle(d);return d[d.length-1]},getFirstElement:function(){var d="recite, [data-recite-ele] "+(Recite.FrameUpdater.isActive()?", iframe":
"");return Recite.Sizzle(d)[0]},isVisible:function(d){var c=Recite.Dom.getScroll(d.ownerDocument.defaultView),b=Recite.Dom.getPosition(d);Recite.PlayerControls.getProvider().getOptions();var a=Recite.Dom.getWindowDimensions(window),d=b.top-d.offsetHeight+200,f=b.left,g=!1;d<a.height+c.y&&(b.top>d&&0<f&&f<a.width+c.x)&&(g=!0);return g},scrollTo:function(d){var c=Recite.Dom.getPosition(d);window.scrollTo(c.left,c.top-d.offsetHeight)},getIndex:function(d){if("undefined"===typeof d||null===d)return null;
for(var c=d.parentElement||d.parentNode,b=-1,a;c&&(a=c.childNodes[++b]);)if(a==d)return b;return-1},getPath:function(d){var c,b=[],a=Recite.Dom.getIndex(d),f=0;if("undefined"===typeof d||null===d)return null;for(;c=d.parentNode;){++f;if(-1>=a)break;d=c;b.push(a);a=Recite.Dom.getIndex(c)}return b.reverse()},getNode:function(d){var c=document.documentElement,b=0,a;if("undefined"===typeof c||null===c)return null;for(b=1;b<d.length;)a=d[b],"undefined"!==typeof c&&(c=c.childNodes[a]),++b;return c},setOptions:function(d){h=
Recite.Util.merge(h,d)}}}();Recite.namespace("Dom.Traverser");Recite.Dom.Traverser=function(){return{traverse:function(e,h){for(var d=e.childNodes[0];null!==d;){var c=h(d);if(d.hasChildNodes()&&c)d=d.firstChild;else{for(;null===d.nextSibling&&d!==e;)d=d.parentNode;d=d===e?null:d.nextSibling}}}}};Recite.namespace("Recite.Dom.Observer");
Recite.Dom.Observer=function(){var e=null,h=[],d={pollTime:1500,useMutations:!0};return{setOptions:function(c){d=Recite.Util.merge(d,c)},observe:function(c){h.push(c);null===e&&(Recite.Debug.log("Recite.Dom.Observer","Setting up body length polling."),e=setInterval(function(){Recite.Util.each(h,function(b,a){var c=a.innerHTML.length;"undefined"===typeof a.prevLength&&(a.prevLength=c);a.prevLength!==c&&(c=Recite.Parser.Html.parse(a),Recite.Event.publish("Recite.Dom.Observor:change",{affectedElements:c}),
a.prevLength=a.innerHTML.length)})},d.pollTime))}}}();var ReciteJSON;ReciteJSON||(ReciteJSON={});
(function(){function e(a){return 10>a?"0"+a:a}function h(a){b.lastIndex=0;return b.test(a)?'"'+a.replace(b,function(a){var b=g[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function d(b,c){var g,e,p,v,n=a,q,s=c[b];s&&("object"===typeof s&&"function"===typeof s.toReciteJSON)&&(s=s.toReciteJSON(b));"function"===typeof i&&(s=i.call(c,b,s));switch(typeof s){case "string":return h(s);case "number":return isFinite(s)?String(s):"null";case "boolean":case "null":return String(s);
case "object":if(!s)return"null";a+=f;q=[];if("[object Array]"===Object.prototype.toString.apply(s)){v=s.length;for(g=0;g<v;g+=1)q[g]=d(g,s)||"null";p=0===q.length?"[]":a?"[\n"+a+q.join(",\n"+a)+"\n"+n+"]":"["+q.join(",")+"]";a=n;return p}if(i&&"object"===typeof i){v=i.length;for(g=0;g<v;g+=1)"string"===typeof i[g]&&(e=i[g],(p=d(e,s))&&q.push(h(e)+(a?": ":":")+p))}else for(e in s)Object.prototype.hasOwnProperty.call(s,e)&&(p=d(e,s))&&q.push(h(e)+(a?": ":":")+p);p=0===q.length?"{}":a?"{\n"+a+q.join(",\n"+
a)+"\n"+n+"}":"{"+q.join(",")+"}";a=n;return p}}"function"!==typeof Date.prototype.toReciteJSON&&(Date.prototype.toReciteJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"Z":null},String.prototype.toReciteJSON=Number.prototype.toReciteJSON=Boolean.prototype.toReciteJSON=function(){return this.valueOf()});var c=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
b=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,a,f,g={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},i;"function"!==typeof ReciteJSON.stringify&&(ReciteJSON.stringify=function(b,c,g){var e;f=a="";if("number"===typeof g)for(e=0;e<g;e+=1)f+=" ";else"string"===typeof g&&(f=g);if((i=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==typeof c.length))throw Error("ReciteJSON.stringify");
return d("",{"":b})});"function"!==typeof ReciteJSON.parse&&(ReciteJSON.parse=function(a,b){function d(a,c){var f,g,i=a[c];if(i&&"object"===typeof i)for(f in i)Object.prototype.hasOwnProperty.call(i,f)&&(g=d(i,f),void 0!==g?i[f]=g:delete i[f]);return b.call(a,c,i)}var f,a=String(a);c.lastIndex=0;c.test(a)&&(a=a.replace(c,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return f=eval("("+a+")"),"function"===typeof b?d({"":f},""):f;throw new SyntaxError("ReciteJSON.parse");})})();Recite.namespace("Auth");
Recite.Auth=function(){function e(a,b){"undefined"===typeof b&&(b={});var d=c.authorization_endpoint+"?response_type="+a+"&client_id="+c.client_id;null!==c.redirect_uri&&(d+="&redirect_uri="+encodeURIComponent(c.redirect_uri));null!==c.required_scope&&(d+="&scope="+c.required_scope);Recite.Util.each(b,function(a,b){d+="&"+a+"="+b});return d}var h=!1,d={state:null,access_token:null,expires:null},c={authorization_endpoint:Recite.baseUrl+"/oauth/authorize",token_endpoint:Recite.baseUrl+"/oauth/token",
client_id:"a8ff7b3fe4b4934db6a6863ae36168699d6d0a80",redirect_uri:Recite.baseUrl+"/oauth/callback/?uri="+Recite.Util.getWindowLocationOrigin(window),required_scope:null,type:"iframe",popup:{status:"yes",toolbar:"no",location:"no",menubar:"no",directories:"no",resizable:"no",scrollbars:"no",width:850,height:600,top:"120"}},b=[],a=[],f=[],g=!1,i=[];Recite.XDM.receiveMessage(function(c){Recite.Debug.log("Recite.Auth","Message received:",c);c=ReciteJSON.parse(c.data);if(null!==c&&"undefined"!==typeof c.access_token&&-1!==Recite.Util.inArray(c.state,
i)){i.splice(Recite.Util.inArray(c.state,i),1);var j=new Date;d.access_token=c.access_token;d.expires=Math.ceil(j.getTime()/1E3)+parseInt(c.expires_in,10);d.state="authorized";Recite.Event.publish("Auth:authorize",d);h&&Recite.Event.publish("Auth:reauthorize",d);h=!0;Recite.Util.each(f,function(a,b){b(d)});f=[];g=!1;"undefined"!==typeof a[c.state]&&(j=a[c.state],j.parentNode.removeChild(j),delete a[c.state]);"undefined"!==typeof b[c.state]&&(b[c.state].close(),delete b[c.state])}},Recite.baseUrl);
return{setOptions:function(a){c=Recite.Util.merge(c,a)},isAuthorized:function(){return"authorized"===d.state},clear:function(){d.state=null;d.access_token=null;d.expires=null},getStatus:function(b,c){if(!c&&this.isAuthorized())b(d);else if(f.push(b),!g){g=!0;var h=Recite.Util.guid();i.push(h);var l=e("token",{createGuest:1,display:0,state:h}),p=document.createElement("iframe");p.id=h;p.src=l;p.frameborder=0;p.width=0;p.height=0;a[h]=p;Recite.Debug.log("Recite.Auth","Adding iframe to dom");document.body.appendChild(p)}},
authPopup:function(){var d=Recite.Util.guid();i.push(d);var f=e("token",{state:d});if("iframe"===c.type){var g=document.createElement("div");g.setAttribute("class","recite_auth_iframe_wrapper");g.style.top=parseInt(c.popup.top)+"px";g.style.left="50%";g.style.marginLeft=0-parseInt(c.popup.width)/2+"px";g.style.height=Recite.Dom.getWindowDimensions(window).height/1.5;g.style.width=c.popup.width;var h=document.createElement("iframe");h.src=f;h.frameborder=0;h.width=c.popup.width;h.style.border=0;h.height=
Recite.Dom.getWindowDimensions(window).height/1.5;f=document.createElement("div");f.setAttribute("class","recite_auth_iframe_close recite-sprite-auth-close");f.setAttribute("data-recite-state",d);g.appendChild(f);g.appendChild(h);document.body.appendChild(g);Recite.DomEvent.add(h,"load",function(){Recite.DomEvent.add(Recite.Sizzle(".recite_auth_iframe_close")[0],"click",function(b){b=b.target.getAttribute("data-recite-state");a[b].parentNode.removeChild(a[b]);delete a[b]})});a[d]=g}else{var p="";
Recite.Util.each(c.popup,function(a,b){p+=a+"="+b+","});p=p.substr(0,p.length-1);g=Math.ceil(screen.width/2)-c.popup.width/2;h=Math.ceil(screen.height/2)-c.popup.height/2;p+=",left="+g+",top="+h;b[d]=window.open(f,d,p)}}}}();Recite.namespace("Storage.Cookie");
Recite.Storage.Cookie=function(){function e(e,d,c){if(c){var b=new Date;b.setTime(b.getTime()+864E5*c);c="; expires="+b.toGMTString()}else c="";document.cookie=e+"="+encodeURIComponent(d)+c+"; path=/"}return{save:function(h,d){var c=ReciteJSON.stringify(d);e(h,c)},load:function(e,d){var c;a:{c=e+"=";for(var b=document.cookie.split(";"),a=0;a<b.length;a++){for(var f=b[a];" "==f.charAt(0);)f=f.substring(1,f.length);if(0==f.indexOf(c)){c=decodeURIComponent(f.substring(c.length,f.length));break a}}c=
null}c=ReciteJSON.parse(c);d&&d(c);return c},clear:function(h){e(h,"",-1)},supported:function(){return!0}}}();Recite.namespace("Storage.LocalStorage");
Recite.Storage.LocalStorage=function(){return{save:function(e,h){_supported()&&window.localStorage.setItem(e,h)},load:function(e,h){if(_supported()){var d=window.localStorage.getItem(e);"undefined"!==typeof h&&h(d);return d}return null},clear:function(e){_supported()&&window.localStorage.removeItem(e)},supported:function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}}}}();Recite.namespace("Storage.Api");
Recite.Storage.Api=function(){var e=["Recite.Preferences"];return{save:function(h,d){if(!h in e)throw{name:"InvalidNamespace",message:"The provided namespace is invalid."};"Recite.Preferences"===h?Recite.Api.call("preferences","POST",{data:d,contentType:"application/json",success:function(){Recite.Debug.log("Recite.Storage.Api","Preferences Saved.")}}):Recite.Storage.Cookie.save(h,d)},load:function(h,d){!h in e||("Recite.Preferences"===h?Recite.Api.call("preferences","GET",{success:d,error:d}):Recite.Storage.Cookie.load(h,
d))},clear:function(){},supported:function(){return!0}}}();Recite.namespace("Preferences");
Recite.Preferences=function(){var e={storageEngine:Recite.Storage.Api,autoSave:!0},h={style:{backgroundColor:null,font:{color:null,face:null,size:null},link:{color:null},marginSize:null,textAlign:null,ruler:{enabled:!1,color:null},screenMask:{enabled:!1,color:null},lineHeight:null,charSpacing:null},dictionary:{enabled:!1},player:{autoplay:!0,continuePlay:!1},textMode:{enabled:!1},playerControls:{enabled:!0},language:null,voices:{en:"Serena"},magnifier:{enabled:!1}},d=Recite.Util.clone(h);Recite.Event.subscribe("Auth:reauthorize",
function(){e.storageEngine===Recite.Storage.Api&&Recite.Preferences.load()});return{setOptions:function(c){var b=!1;Recite.Util.each(c,function(a){"storageEngine"===a&&(b=!0)});e=Recite.Util.merge(e,c);b&&Recite.Preferences.load()},save:function(){Recite.Debug.log("Recite.Preferences","Saving preferences.");e.storageEngine.save("Recite.Preferences",h);Recite.Gui.Notification.show("Your preferences have been saved.  To reset them press the reset button",{read:!1})},load:function(){Recite.Debug.log("Recite.Preferences",
"Loading preferences.");e.storageEngine.load("Recite.Preferences",function(c){if(null!==c){var b=Recite.Util.clone(d);Recite.Debug.log("Recite.Preferences","Found user preferences");h=Recite.Util.merge(b,c)}Recite.Event.publish("Preferences:load",c)})},get:function(c){if("undefined"===typeof c)return h;var b,a,c=c.split(".");b=h;for(a=0;a<c.length;a++)if(b=b[c[a]],"undefined"===typeof b)return null;return b},set:function(c,b){var a={};"object"===Recite.Util.type(c)?a=c:a[c]=b;("player.autoplay"==
c||"playerControls.enabled"==c||"player.continuePlay"==c)&&Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Preferences",event:c+": "+b});Recite.Util.each(a,function(a,b){var c,d,j;c=a.split(".");d=h;for(j=0;j<c.length-1;j++)if(d=d[c[j]],"undefined"===typeof d)return null;d[c[j]]=b});Recite.Event.publish("Preferences:set",a);e.autoSave&&Recite.Preferences.save();return null},reset:function(c){Recite.Debug.log("Recite.Preferences","Reset."+c);var b,a,f,g;b=c.split(".");a=h;g=d;for(f=0;f<b.length-
1;f++)a=a[b[f]],g=g[b[f]];var i=g[b[f]];"object"===Recite.Util.type(i)&&(i=Recite.Util.clone(i));a[b[f]]=i;Recite.Event.publish("Preferences:reset",{key:c,value:g});e.autoSave&&Recite.Preferences.save()},resetAll:function(){Recite.Debug.log("Recite.Preferences","ResetAll.");Recite.Event.publish("Preferences:reset");var c=e.autoSave;e.autoSave=!1;Recite.Util.each(d,function(b){Recite.Preferences.reset(b)});e.autoSave=c;e.autoSave&&Recite.Preferences.save();Recite.Gui.Notification.show("Your preferences have been reset.");
Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Preferences",event:"resetAll"})}}}();Recite.namespace("UI.Toggle");
Recite.UI.Toggle=function(){return{invoke:function(e){e=Recite.Util.isArray(e)?e:[e];Recite.Util.each(e,function(e,d){var c=d.ownerDocument?d.ownerDocument:document;d.setAttribute("class","recite-ui-toggle");c=c.createElement("div");c.setAttribute("class","recite-ui-toggle-slider");c.setAttribute("data-recite-tabbable","");d.appendChild(c);Object.defineProperty?Object.defineProperty(d,"checked",{get:function(){return this._checked},set:function(b){(this._checked=b)?this.setAttribute("class",this.getAttribute("class")+
" recite-ui-toggle-active"):this.setAttribute("class",this.getAttribute("class").replace(" recite-ui-toggle-active",""));this.fireEvent?this.fireEvent("onClick"):(b=document.createEvent("Event"),b.initEvent("change",!0,!0),this.dispatchEvent(b))}}):Recite.Debug.log("Recite.UI.Toggle","defineProperty not found");d.checked=!0;Recite.DomEvent.add(d.childNodes[0],"click",function(b){b=b.target.parentNode;b.checked=!b.checked})})}}}();Recite.namespace("UI.Dropdown");
Recite.UI.Dropdown=function(){function e(c,b){if(!(1!==c.nodeType&&3!==c.nodeType)){var a=c.getAttribute("class")||"";for(c.setAttribute("class",a.replace(" recite-active",""));-1!==(a=Recite.Util.inArray(c,d[b]));)d[b].splice(a,1);a=Recite.Sizzle(".recite-dropdown-invoke, .recite-dropdown-invoke-active, .recite-dropdown-invoke .recite-button",document);Recite.Util.each(a,function(a,b){b.setAttribute("class",b.getAttribute("class").replace("-active",""))});Recite.Event.publish("DropDown:menuHidden",
c)}}function h(){for(var c in d)for(var b in d[c])e(d[c][b],c)}var d={};Recite.Event.subscribe("Recite:Style:wrappedElements",function(){var c=Recite.Sizzle("#recite-wrapper")[0];Recite.DomEvent.add(c,"touchstart",h);Recite.DomEvent.add(c,"click",h)});return{loaded:function(){return!1},invoke:function(c){c=Recite.Util.isArray(c)?c:[c];Recite.Util.each(c,function(b,a){Recite.DomEvent.add(a,"click",function(a){var b=a.target,c=Recite.Sizzle(b.getAttribute("data-target"))[0],k=b.getAttribute("data-group")||
"default";if("undefined"!==typeof c){Recite.DomEvent.add(c,"click",function(a){"undefined"!==typeof a.stopPropagation?a.stopPropagation():a.cancelBubble=!0});if(/recite-active/g.test(c.getAttribute("class")))e(c,k),b.setAttribute("class",b.getAttribute("class").replace("-active",""));else{var j=k,j=j||"default";"undefined"===typeof d[j]&&(d[j]=[]);k=c.getAttribute("class")||"";c.setAttribute("class",k+" recite-active");var k=Recite.Sizzle(".recite-controls")[0],h=Recite.Dom.getPosition(b);c.style.left=
h.left-k.scrollLeft+"px";d[j].push(c);"default"!==j&&Recite.Util.each(d[j],function(a,b){"undefined"!==typeof b&&b!==c&&e(b,j)});Recite.Event.publish("DropDown:menuShown",c);b.setAttribute("class",b.getAttribute("class")+"-active")}"undefined"!==typeof a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}})})},hideGroup:function(c){var c=c||null,b;for(b in d)null!==c&&c!==b||Recite.Util.each(d[b],function(a,b){e(b)})}}}();Recite.namespace("UI.ColorPicker");
Recite.UI.ColorPicker=function(){function e(a){var b=a.clientY-(n+j.offsetTop),b=255<b?255:b,c=Math.abs(360*(b-0)/255+0-360);m.style.top=b+"px";b=Recite.Tinycolor("hsl("+Math.ceil(c)+", 100%, 50%)");l.style.backgroundColor=b.toRgbString();b=g.getColor().toHsv();b.h=Math.ceil(c);g.setColor(b,a)}function h(a){var b=a.clientY-(n+l.offsetTop),c=a.clientX-(q+l.offsetLeft),b=252<b?252:b,c=252<c?252:c,b=3>b?3:b,c=3>c?3:c,d=g.getColor().toHsv();d.v=Math.ceil(100*(Math.abs(b-255)/255));d.s=Math.ceil(100*(c/
255));g.setColor(d,a);v.style.top=b+s.selectorAdjust.top+"px";v.style.left=c+s.selectorAdjust.left+"px"}function d(a){var b=100*(Math.abs(a-360)/360);m.style.top=b+"%";a=Recite.Tinycolor("hsl("+Math.ceil(a)+", 100%, 50%)");l.style.backgroundColor=a.toRgbString()}function c(a){var b=parseInt(Recite.Dom.getStyle(l,"width")),a=Math.ceil(b/100*100*a);v.style.left=a+s.selectorAdjust.left+"px"}function b(a){var a=Math.abs(100*a-100),b=parseInt(Recite.Dom.getStyle(l,"height")),a=Math.ceil(b/100*a);v.style.top=
a+s.selectorAdjust.top+"px"}function a(){Recite.UI.ColorPicker.hide()}var f=!1,g=null,i=!1,k=null,j=null,m=null,l=null,p=null,v=null,n=0,q=0,s={selectorAdjust:{left:-5,top:-5},markup:'<div id="recite-ui-colorpicker">                    <div class="recite-colorbox-close">Close</div>                    <div class="recite-colorbox recite-sprite-colorpicker-mask">                        <div class="recite-colorselector recite-sprite-colorpicker-selector"></div>                    </div>                    <div class="recite-huebox recite-sprite-colorpicker-hue">                        <div class="recite-hueslider"></div>                    </div>                </div>'};
return{setOptions:function(a){s=Recite.Util.merge(s,a)},init:function(){Recite.DomEvent.add(document.body,"mousedown",function(){f=!0});Recite.DomEvent.add(document.body,"mouseup",function(){f=!1});Recite.DomEvent.add(document.body,"click",a);Recite.Dom.append(s.markup,document.body);k=Recite.Sizzle("#recite-ui-colorpicker")[0];p=Recite.Sizzle(".recite-colorbox-close")[0];l=Recite.Sizzle(".recite-colorbox")[0];v=Recite.Sizzle(".recite-colorselector")[0];j=Recite.Sizzle(".recite-huebox")[0];m=Recite.Sizzle(".recite-hueslider")[0];
Recite.DomEvent.add(k,"click",function(a){"undefined"!==typeof a.stopPropagation?a.stopPropagation():a.cancelBubble=!0});i=!0;Recite.DomEvent.add(l,"mousedown",function(a){h(a)});Recite.DomEvent.add(l,"mouseup",function(a){h(a)});Recite.DomEvent.add(l,"mousemove",function(a){f&&h(a)});Recite.DomEvent.add(j,"mousedown",function(a){e(a)});Recite.DomEvent.add(j,"mouseup",function(a){e(a)});Recite.DomEvent.add(j,"mousemove",function(a){f&&e(a)});Recite.DomEvent.add(p,"click",function(){k.style.display=
"none"})},invoke:function(a,f){f=f||{};a=Recite.Util.isArray(a)?a:[a];i||this.init();Recite.Util.each(a,function(a,i){var j="INPUT"===i.tagName?"focus":"click";i.colorPicker={};i.setColor=function(a,f,i,j){var e=void 0==f||"mouseup"==f.type;if(e||!Recite.Tinycolor.equals(a,this.getColor()))i=!1===i?!1:!0,j=!1===j?!1:!0,a=Recite.Tinycolor(a),a.ok&&(this.colorPicker.color=a,"INPUT"===this.tagName?i&&(this.value=this.colorPicker.color.toHexString()):this.innerText=this.colorPicker.color.toHexString(),
"undefined"!==typeof this.colorPicker.callback&&(j||e)&&this.colorPicker.callback(g,a,f),g===this&&(f=this.colorPicker.color.toHsv(),d(f.h),c(f.s),b(f.v)))};i.getColor=function(){return this.colorPicker.color};var e=Recite.Tinycolor(i.style.backgroundColor);e.ok?i.setColor(e):i.setColor(Recite.Tinycolor("#000"));Recite.DomEvent.add(i,j,function(a){Recite.UI.ColorPicker.show();g=a.target;var b=Recite.Dom.getPosition(g),c=Recite.Dom.getStyle(g,"width"),d=Recite.Sizzle("#recite-colors-advanced")[0],
f=parseInt(Recite.Dom.getPosition(d).top),d=parseInt(Recite.Dom.getStyle(d,"height")),f=f+d+50,d=parseInt(Recite.Dom.getStyle(k,"height"));n=b.top;n+d>f&&(n=f-d);q=parseInt(b.left)+parseInt(c);k.style.top=n+"px";k.style.left=q+"px";Recite.UI.ColorPicker.invalidate();"undefined"!==typeof a.stopPropagation?a.stopPropagation():a.cancelBubble=!0});"undefined"!==typeof f.callback&&(i.colorPicker.callback=f.callback);"INPUT"===i.tagName&&Recite.DomEvent.add(i,"keyup",function(a){this.setColor(a.target.value,
a,!1,!0);"undefined"!==typeof a.stopPropagation?a.stopPropagation():a.cancelBubble=!0})})},show:function(){k.style.display="block"},hide:function(){k.style.display="none"},invalidate:function(){var a=g.colorPicker.color.toHsv();d(a.h);c(a.s);b(a.v)}}}();Recite.namespace("UI.AdvancedColors");
Recite.UI.AdvancedColors=function(){function e(a,b,c){var d=a.getAttribute("data-key"),e=b.toRgbString();h(a,b);a=Recite.Preferences.get(d);if(e!=a&&void 0!=c&&("mouseup"==c.type||"blur"==c.type))Recite.Debug.log("Recite.UI.AdvancedColors"," set "+d+" to "+e),Recite.Preferences.set(d,e)}function h(a,b){var c=null!=b?b.toRgbString():"transparent";a.parentNode.style.borderColor=c;switch(a.getAttribute("data-key")){case "style.backgroundColor":var d=Recite.Sizzle("#advanced_colors_background,#advanced_colors_text,#advanced_colors_links");
Recite.Util.each(d,function(a,b){b.style.backgroundColor=c});break;case "style.font.color":d=Recite.Sizzle("#advanced_colors_background,#advanced_colors_text,#advanced_colors_ruler,#advanced_colors_mask");Recite.Util.each(d,function(a,b){b.style.color=c});break;case "style.link.color":d=Recite.Sizzle("#advanced_colors_links");Recite.Util.each(d,function(a,b){b.style.color=c});break;case "style.screenMask.color":case "style.ruler.color":a.style.backgroundColor=c}a.value=null!=b?b.toHexString():""}
function d(a,c){if(void 0===a||"style"==a||"Preferences:reset"==a&&void 0!=c&&"style"==c.key||"Preferences:set"==a||"Preferences:load"==a)Recite.Debug.log("AdvancedColors","Update Color Pickers"),Recite.Util.each(b,function(a,b){var c=Recite.Preferences.get(a);void 0!=c&&"null"!=c&&""!=c.trim()?(c=Recite.Tinycolor(c),b.value!=c.toHexString()&&h(b,c)):h(b,null)})}var c={enabled:!0},b={};return{setOptions:function(a){Recite.Debug.log("UI.AdvancedColors",a);c=Recite.Util.merge(c,a)},invoke:function(a,
f){Recite.Debug.log("UI.AdvancedColors","invoke "+c.enabled);if(c.enabled){var g=Recite.Sizzle(a,f);Recite.Util.each(g,function(a,c){var d=c.getAttribute("data-key");b[d]=c});Recite.UI.ColorPicker.invoke(g,{callback:function(a,b,c){e(a,b,c)}});Recite.Util.each(g,function(a,b){Recite.DomEvent.add(b,"blur",function(a){var c=Recite.Tinycolor(b.value);e(b,c,a)})});Recite.Event.subscribe("Preferences:load",d);Recite.Event.subscribe("Preferences:reset",d);Recite.Event.subscribe("Preferences:set",d);Recite.Event.subscribe("DropDown:menuHidden",
function(){Recite.UI.ColorPicker.hide()})}else g=Recite.Sizzle("#recite-themes-advanced")[0],g.parentNode.removeChild(g)}}}();Recite.namespace("Controls");
Recite.Controls=function(){function e(a,b){Recite.Debug.log("Controls","Setting up custom guser guide for lang: "+a);Recite.Util.each(Recite.Sizzle(".recite-sprite-button-userguide"),function(a,c){c.setAttribute("href",b)})}function h(){var b=Recite.Dom.getLanguage(Recite.Sizzle("html")[0]);Recite.Util.each(a.languageOverrides.userGuide.languages,function(c,d){c.toLowerCase()==b.toLowerCase()?e(c,d.src):"undefined"!=typeof d.additionalLangs?Recite.Util.each(d.additionalLangs,function(a,c){c.toLowerCase()==
b.toLowerCase()&&e(c,d.src)}):e(c,a.languageOverrides.userGuide["default"].src)})}function d(){var b=Recite.Dom.getLanguage(Recite.Sizzle("html")[0]);Recite.Util.each(a.modules,function(a,c){null!==b&&"undefined"!=typeof c.localize&&c.localize(b)})}function c(c){a.enabled&&(0===a.modules.length&&(a.modules=[Recite.Controls.Desktop,Recite.Controls.Core]),Recite.Debug.log("Recite.Controls","Loading controls"),Recite.Debug.log("Recite.Controls","Getting controls content"),Recite.Ajax.get(a.url,null,
function(i,e){if(a.enabled){Recite.Debug.log("Recite.Controls","Got controls content");var j=document.createElement("div");j.innerHTML=e;f=j.childNodes[0];j=Recite.Sizzle("body",c)[0];Recite.Dom.prepend(f,j);Recite.Browser.isMobile()&&(Recite.Util.each(Recite.Sizzle(".recite-sprite-button-magnifier"),function(a,b){b.style.display="none"}),Recite.Util.each(Recite.Sizzle(".recite-sprite-button-ruler"),function(a,b){b.style.display="none"}),Recite.Util.each(Recite.Sizzle(".recite-sprite-button-mp3"),
function(a,b){b.style.display="none"}),Recite.Util.each(Recite.Sizzle(".recite-sprite-button-dictionary"),function(a,b){b.style.display="none"}));Recite.Util.each(a.modules,function(a,b){b.init();b.invoke(f)});d();Recite.Debug.log("Recite.Controls","Controls loaded");b=!0;Recite.Event.publish("Controls:loaded")}}))}var b=!1,a={enabled:!0,url:Recite.baseUrl+"/assets/"+Recite.version+"/html/header.htm",modules:[],languageOverrides:{userGuide:{languages:{cy:{src:"http://reciteme.com/user-guides/welsh.pdf"},
ar:{src:"https://api.reciteme.com/common/user_guide_ar.pdf",additionalLangs:["ar-UAE","ar-AE"]}},"default":{src:"http://reciteme.com/user-guide"}}}};Recite.Event.subscribe("Translate:restore_complete",function(){d();h()});Recite.Event.subscribe("Translate:complete",function(){h()});Recite.Event.subscribe("Controls:loaded",function(){h()});var f=null;return{setOptions:function(b){Recite.Debug.log("Recite.Controls","Setting options");a=Recite.Util.merge(a,b);Recite.Controls.Mobile.setOptions(b.Mobile);
Recite.Controls.Core.setOptions(b.Core);Recite.Controls.Desktop.setOptions(b.Desktop)},load:function(a){window.self!=window.top?setTimeout(function(){c(a)},2E3):c(a)},disableOverlay:function(){var a=0;Recite.Magnifier.isEnabled()&&(a=1,Recite.Magnifier.disable());Recite.Ruler.isEnabled()&&(a=2,Recite.Ruler.disable());Recite.ScreenMask.isEnabled()&&(a=3,Recite.ScreenMask.disable());return a},reEnableOverlay:function(a){switch(a){case 1:Recite.Magnifier.enable();break;case 2:Recite.Ruler.enable();break;
case 3:Recite.ScreenMask.enable()}},disableInstanceOverlay:function(){Recite.Magnifier.disableInstance();Recite.Ruler.disableInstance();Recite.ScreenMask.disableInstance()},loaded:b,disable:function(){b&&Recite.Util.each(a.modules,function(a,b){"undefined"!=typeof b.disable&&b.disable()});a.enabled=!1}}}();Recite.namespace("Controls.Core");
Recite.Controls.Core=function(){function e(){c();Recite.Util.each(Recite.Sizzle(".recite-ui-toggle",document),function(a,b){var c=b.getAttribute("data-preference");"undefined"!==Recite.Preferences.get(c)&&(Recite.Preferences.get(c)?b.setAttribute("class",b.getAttribute("class").replace("recite-ui-toggle-active","")+" recite-ui-toggle-active"):b.setAttribute("class",b.getAttribute("class").replace("recite-ui-toggle-active","")))});var a=Recite.Preferences.get("voices");("undefined"!=typeof a.en&&null!=
a.en||"undefined"!=typeof a["en-gb"]&&null!=a["en-gb"])&&Recite.Util.each(Recite.Sizzle(".recite-voice",document),function(b,c){var d=c.getAttribute("data-value");c.setAttribute("class",c.getAttribute("class").replace("active",""));-1!==d.indexOf(a.en)&&c.setAttribute("class",c.getAttribute("class")+" active");c})}function h(){Recite.Api.call("user","GET",{success:function(a){g.user=a;c()}})}function d(a){if("undefined"===typeof a)return g;var b,c,a=a.split(".");b=g;for(c=0;c<a.length;c++)if(b=b[a[c]],
"undefined"===typeof b)return null;return b}function c(){Recite.Util.each(f,function(b,c){if("undefined"!==typeof c.text){var f=c.text,g;a.tagPattern.lastIndex=0;for(var e=f;null!==(g=a.tagPattern.exec(f));)var h=d(g[1])||"",e=e.replace(g[0],h);c.node.nodeValue=e}"undefined"!==typeof c.attributes&&Recite.Util.each(c.attributes,function(b,f){var g;a.tagPattern.lastIndex=0;for(var i=f.value;null!==(g=a.tagPattern.exec(f.value));){var e=d(g[1]);"undefined"===typeof e&&(e=null);i=i.replace(g[0],e)}c.node.setAttribute(f.name,
i)})})}function b(b,c){var d=c.target?c.target:c.srcElement;Recite.Debug.log("event",c);var f=d.getAttribute("data-key").split(" "),g=d.getAttribute("data-value").split(" ");if(f.length!==g.length)Recite.Debug.log("Recite.Controls.Core","Warning: Number of \n                keys does not match number of values.",d);else{for(var d={},e=0;e<f.length;e++){var h=f[e],n=("-"===g[e].charAt(0)?"-":"")+g[e].replace(/-/g," ");"toggle"===n&&(n=!Recite.Preferences.get(h));if(/\+|\-/.test(n[0])){var q="+"===
n[0],s=parseInt(n.replace(/[^0-9]/g,""),10),t=Recite.Preferences.get(h);if(null===t)a:if("undefined"===typeof h)n=100;else{for(var u=t=n=void 0,n=h.split("."),t=a.defaults,u=0;u<n.length;u++)if(t=t[n[u]],"undefined"===typeof t){n=100;break a}n=t}else n=t;var t=n,n=q?t+s:t-s,u=h.replace("style.","").split("."),r="";Recite.Util.each(u,function(a,b){r+=b.charAt(0).toUpperCase()+b.slice(1)});var u=a.hasOwnProperty("max"+r+"Percentage")?a["max"+r+"Percentage"]:a.hasOwnProperty("max"+r)?a["max"+r]:a.defaultMax,
B=a.hasOwnProperty("min"+r+"Percentage")?a["min"+r+"Percentage"]:a.hasOwnProperty("min"+r)?a["min"+r]:a.defaultMin;n>u&&(n=u);n<B&&(n=B);"style.font.size"==h&&(u=Recite.Preferences.get("style.zoom"),u=null===u?100:u,q=q?u+s:u-s,q>a.maxFontSizePercentage&&(q=a.maxFontSizePercentage),q<a.minFontSizePercentage&&(q=a.minFontSizePercentage),t>=a.zoomThreshold&&100<q?(d["style.font.size"]=a.zoomThreshold,h="style.zoom",n=q):100!=u&&(d["style.zoom"]=100));if(0===n.length||"null"===n)n=null}d[h]=n}Recite.Preferences.set(d)}}
var a={tagPattern:/{{([A-Za-z._]+)}}/g,defaultMax:200,defaultMin:30,maxFontSizePercentage:200,minFontSizePercentage:30,zoomThreshold:150,minLineHeight:50,maxLineHeight:300,minCharSpacing:0,maxCharSpacing:20,defaults:{style:{charSpacing:0}}},f=[],g={links:{logout:Recite.baseUrl+"/user/logout"},preferences:null};return{setOptions:function(b){a=Recite.Util.merge(a,b)},init:function(){Recite.Debug.log("Recite.Controls.Core","Core controls invoked");Recite.Event.subscribe("Preferences:load",e);Recite.Event.subscribe("Preferences:set",
e);Recite.Event.subscribe("Preferences:reset",e);Recite.Event.subscribe("Auth:reauthorize",h);Recite.Event.subscribe("Controls:affect",b)},invoke:function(b){for(var c=b;null!==c;){if(3===c.nodeType&&0<c.nodeValue.trim().length){var g=c.nodeValue;if(a.tagPattern.test(g)){var e;a.tagPattern.lastIndex=0;for(var l=g;null!==(e=a.tagPattern.exec(g));)var p=d(e[1])||"",l=l.replace(e[0],p);c.nodeValue=l;f.push({node:c,text:g})}}if(1===c.nodeType){var v=[];Recite.Util.each(c.attributes,function(b,c){var f=
c.value;if(a.tagPattern.test(f)){var g;a.tagPattern.lastIndex=0;for(v.push({name:c.name,value:c.value});null!==(g=a.tagPattern.exec(f));)f=d(g[1]),"undefined"===typeof f&&(f=null),c.value=c.value.replace(g[0],f)}});0<v.length&&f.push({node:c,attributes:v})}if(c.hasChildNodes())c=c.firstChild;else{for(;null===c.nextSibling&&c!==b;)c=c.parentNode;c=c===b?null:c.nextSibling}}Recite.Util.each(Recite.Sizzle(".recite-ui-toggle",b),function(a,b){Recite.UI.Toggle.invoke(b);Recite.DomEvent.add(b,"click",function(a){a=
a.currentTarget?a.currentTarget:a.srcElement;Recite.Preferences.set(a.getAttribute("data-preference"),a.checked)})});Recite.Util.each(Recite.Sizzle(".recite-slider"),function(a,b){var c=b.getAttribute("data-type");Recite.UI.Slider.invoke(b,function(a){Recite.Event.publish("Slider:"+c,a)})});c=Recite.Sizzle(".recite-preference-set",b);Recite.DomEvent.add(c,"click",function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;Recite.Event.publish("Controls:affect",a)});c=Recite.Sizzle(".recite-save",
b);Recite.DomEvent.add(c,"click",function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;Recite.Preferences.save()});c=Recite.Sizzle(".recite-reset",b);Recite.DomEvent.add(c,"click",function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;Recite.Preferences.resetAll()});c=Recite.Sizzle("#recite-toolbar-button-guide");Recite.DomEvent.add(c,"click",function(a){a.preventDefault&&(a.preventDefault?a.preventDefault():a.returnValue=!1);"undefined"!=typeof a.target&&window.open(a.target.getAttribute("href"))});
Recite.DomEvent.add(Recite.Sizzle(".recite-language-set",b),"click",function(a){var b=(a.currentTarget?a.currentTarget:a.srcElement).getAttribute("data-language");"default"===b?(Recite.Language.Translate.restore(),Recite.Preferences.set("language",null)):Recite.Preferences.set("language",b);Recite.Util.each(Recite.Sizzle(".recite-language-set"),function(a,c){c.getAttribute("data-language")===b?c.setAttribute("class",c.getAttribute("class")+" recite-active"):c.setAttribute("class",c.getAttribute("class").replace(" recite-active",
""))})});h()}}}();Recite.namespace("Controls.Desktop");
Recite.Controls.Desktop=function(){function e(a,b){if("play"===b||"stopped"===a.getAttribute("data-status")&&"undefined"===b)return a.setAttribute("class",a.getAttribute("class").replace("recite-sprite-button-play","recite-sprite-button-stop")),a.setAttribute("data-status","playing"),"playing";if("stop"===b||"playing"===a.getAttribute("data-status")&&"undefined"===b)return a.setAttribute("class",a.getAttribute("class").replace("recite-sprite-button-stop","recite-sprite-button-play")),a.setAttribute("data-status",
"stopped"),"stopped"}function h(c){a.tabEnabled&&(null==b&&(b=a.tabIndexStartValue),c=Recite.Sizzle("[data-recite-tabbable]",c),Recite.Util.each(c,function(a,c){if("undefined"!=typeof c.getAttribute("data-tabbable-offset"))var d=parseInt(c.getAttribute("data-tabbable-offset"));if(null==c.getAttribute("tabindex")){var f=b;isNaN(d)||(f+=d);c.setAttribute("tabindex",f);b++;-1<(" "+c.className+" ").replace(/[\n\t]/g," ").indexOf(" recite-dropdown-invoke ")&&(d=Recite.Sizzle(c.getAttribute("data-target"))[0],
h(d));c.onfocus=function(a){var b="undefined"!=typeof a.target?a.target:a.srcElement;Recite.Util.each(Recite.Sizzle(".recite-dropdown-invoke-active"),function(a,b){var c=Recite.Sizzle(b.getAttribute("data-target"))[0];Recite.Dom.isDescendant(document.activeElement,c)||b.click()});Recite.Util.each(Recite.Sizzle(".recite-dropdown"),function(a,c){if(Recite.Dom.isDescendant(b,c)){var d=Recite.Sizzle("[data-target='#"+c.getAttribute("id")+"']")[0];if("undefined"!=d&&-1==(" "+d.className+" ").replace(/[\n\t]/g,
" ").indexOf(" recite-dropdown-invoke-active ")){var f=parseInt(d.getAttribute("tabindex")),g=0;Recite.Util.each(Recite.Sizzle(".recite-button-primary"),function(a,b){var c=parseInt(b.getAttribute("tabindex"));if(c>f&&(0==g||c<g))g=c});Recite.Sizzle("[tabindex="+g+"]")[0].focus()}}})}}}))}function d(){0<a.disabledButtons.length&&Recite.Util.each(a.disabledButtons,function(a,b){if(c.hasOwnProperty(b)){var d=c[b];if(d.hasOwnProperty("buttonClass")){var e=Recite.Sizzle(d.buttonClass);Recite.Util.each(e,
function(a,b){b.style.display="none"})}d.hasOwnProperty("module")&&(Recite.hasOwnProperty(d.module)&&"function"==typeof Recite[d.module].disable&&"function"==typeof Recite[d.module].isEnabled&&Recite[d.module].isEnabled())&&(Recite[d.module].disable(),Recite.Debug.log("Recite.Controls.Desktop","Disable button : "+d.module))}})}var c={previous:{buttonClass:".recite-sprite-button-back"},play:{buttonClass:".recite-sprite-button-play"},forward:{buttonClass:".recite-sprite-button-forward"},fontMinus:{buttonClass:".recite-sprite-button-font-minus"},
font:{buttonClass:".recite-sprite-button-font"},fontPlus:{buttonClass:".recite-sprite-button-font-plus"},themes:{buttonClass:".recite-sprite-button-themes"},ruler:{buttonClass:".recite-sprite-button-ruler",module:"Ruler",preferences:{"style.ruler.enabled":!1}},screenMask:{buttonClass:".recite-sprite-button-screenmask",module:"ScreenMask",preferences:{"style.screenMask.enabled":!1}},dictionary:{buttonClass:".recite-sprite-button-dictionary",module:"Dictionary"},translate:{buttonClass:".recite-sprite-button-translate"},
textMode:{buttonClass:".recite-sprite-button-textmode"},margin:{buttonClass:".recite-sprite-button-margin"},alignment:{buttonClass:".recite-sprite-button-alignment"},mp3:{buttonClass:".recite-sprite-button-mp3"},magnifier:{buttonClass:".recite-sprite-button-magnifier",module:"Magnifier",preferences:{"magnifier.enabled":!1}},settings:{buttonClass:".recite-sprite-button-settings"},reset:{buttonClass:".recite-sprite-button-reset"},guide:{buttonClass:".recite-sprite-button-userguide"}},b=null,a={promptBeforeLeave:!0,
tabEnabled:!0,tabIndexStartValue:1,autoIncrementTabIndex:!0,disabledButtons:[],fonts:[{name:"Default",font:"Default"},{name:"Arial",font:"Arial"},{name:"Verdana",font:"Verdana"},{name:"Comic-Sans-MS",font:"Comic Sans MS"},{name:"Georgia",font:"Georgia"},{name:"Tahoma",font:"Tahoma"},{name:"Trebuchet",font:"Trebuchet"},{name:"Tiresias",font:"Tiresias"},{name:"Open-Dyslexic",font:"Open Dyslexic"}],swatches:[{backgroundColor:null,color:null,linkColor:null,rulerColor:"",maskColor:""},{backgroundColor:"#000",
color:"#fff",linkColor:"#C00",rulerColor:"#fff",maskColor:"#fff"},{backgroundColor:"#000",color:"#FCED20",linkColor:"#C00",rulerColor:"#FCED20",maskColor:"#FCED20"},{backgroundColor:"#343A3F",color:"#CACFD3",linkColor:"#C00",rulerColor:"#CACFD3",maskColor:"#CACFD3"},{backgroundColor:"#CACFD3",color:"#343A3F",linkColor:"#C00",rulerColor:"#343A3F",maskColor:"#343A3F"},{backgroundColor:"#F05924",color:"#FFF",linkColor:"#00C"},{backgroundColor:"#37B64B",color:"#fff",linkColor:"#2fc2ef"},{backgroundColor:"#0201FF",
color:"#fff",linkColor:"#9c0001"},{backgroundColor:"#0000FE",color:"#FCED20",linkColor:"#2fc2ef",rulerColor:"#FCED20",maskColor:"#FCED20"},{backgroundColor:"#fff",color:"#C3272A",linkColor:"#2fc2ef",rulerColor:"#C3272A",maskColor:"#C3272A"},{backgroundColor:"#fff",color:"#F05924",linkColor:"#2fc2ef",rulerColor:"#F05924",maskColor:"#F05924"},{backgroundColor:"#fff",color:"#37B64B",linkColor:"#C00",rulerColor:"#37B64B",maskColor:"#37B64B"},{backgroundColor:"#fff",color:"#0201FF",linkColor:"#C00",rulerColor:"#0201FF",
maskColor:"#0201FF"},{backgroundColor:"#F4EED9",color:"#1D1916",linkColor:"#C00",rulerColor:"#1D1916",maskColor:"#1D1916"},{backgroundColor:"#fff",color:"#000",linkColor:"#C00",rulerColor:"#000",maskColor:"#000"},{backgroundColor:"#FCED20",color:"#000",linkColor:"#C00",rulerColor:"#000",maskColor:"#000"}],languages:{"default":{name:"Default",native_name:"Reset",audible:!1,flag:null},af:{name:"Afrikaans",native_name:"Afrikaans",audible:!1,flag:"sa"},sq:{name:"Albanian",native_name:"shqip",audible:!1,
flag:"al"},am:{name:"Amharic",native_name:"\u12a3\u121b\u122d\u129b",audible:!1,flag:null},ar:{name:"Arabic",native_name:"\u0639\u0631\u0628\u064a",audible:!0,flag:"dz"},hy:{name:"Armenian",native_name:"\u0540\u0561\u0575\u0565\u0580\u0567\u0576",audible:!1,flag:null},az:{name:"Azerbaijani",native_name:"\u0622\u0630\u0631\u0628\u0627\u064a\u062c\u0627\u0646\u062c\u0627 \u062f\u064a\u0644\u064a",audible:!1,flag:"az"},eu:{name:"Basque",native_name:"euskara",audible:!0,flag:null},bn:{name:"Bengali",
native_name:"\u09ac\u09be\u0982\u09b2\u09be (ba\u025b\u1e45l\u0101)",audible:!1,flag:"bd"},be:{name:"Belarusian",native_name:"\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f \u043c\u043e\u0432\u0430",audible:!1,flag:"by"},bs:{name:"Bosnian",native_name:"bosanski",audible:!1,flag:null},bg:{name:"Bulgarian",native_name:"\u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438 (b\u00e3lgarski)",audible:!1,flag:"bg"},ca:{name:"Catalan",native_name:"catal\u00e0",audible:!0,flag:"ad"},ceb:{name:"Cebuano",
native_name:"Sinugboanon",audible:!1,flag:null},ny:{name:"Chichewa",native_name:"Chiche\u0175a",audible:!1,flag:null},"zh-CN":{name:"Chinese Simplified",native_name:"\u4e2d\u56fd\u7b80\u5316",audible:!0,flag:"cn"},"zh-TW":{name:"Chinese Traditional",native_name:"\u4e2d\u570b\u50b3\u7d71",audible:!0,flag:"cn"},co:{name:"Corsican",native_name:"corsu",audible:!1,flag:null},hr:{name:"Croatian",native_name:"Hrvatski",audible:!1,flag:"hr"},cs:{name:"Czech",native_name:"\u010de\u0161tina",audible:!0,flag:"cz"},
da:{name:"Danish",native_name:"dansk",audible:!0,flag:"dk"},nl:{name:"Dutch",native_name:"Nederlands",audible:!0,flag:"nl"},en:{name:"English",native_name:"English",audible:!0,flag:"gb"},eo:{name:"Esperanto",native_name:"Esperanto",audible:!1,flag:null},et:{name:"Estonian",native_name:"eesti keel",audible:!1,flag:"ee"},tl:{name:"Filipino",native_name:"filipino",audible:!1,flag:"ph"},fi:{name:"Finnish",native_name:"suomi",audible:!0,flag:"fi"},fr:{name:"French",native_name:"fran\u00e7ais",audible:!0,
flag:"fr"},fy:{name:"Frisian (West)",native_name:"Frysk",audible:!1,flag:null},gl:{name:"Galician",native_name:"Galego",audible:!0,flag:"gl"},ka:{name:"Georgian",native_name:"\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8 (k\u02bbart\u02bbuli)",audible:!1,flag:"ge"},de:{name:"German",native_name:"Deutsch",audible:!0,flag:"de"},el:{name:"Greek",native_name:"\u03b5\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac ",audible:!0,flag:"gr"},gu:{name:"Gujarati",native_name:"\t\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0 ",
audible:!1,flag:"gu"},ht:{name:"Haitian Creole",native_name:"Krey\u00f2l ayisyen",audible:!1,flag:"ht"},ha:{name:"Hausa",native_name:"\u062d\u064e\u0648\u0652\u0633",audible:!1,flag:null},haw:{name:"Hawaiian",native_name:"\u02bb\u014dlelo Hawai\u02bbi",audible:!1,flag:null},iw:{name:"Hebrew",native_name:"\u05e2\u05b4\u05d1\u05b0\u05e8\u05b4\u05d9\u05ea",audible:!0,flag:"il"},hi:{name:"Hindi",native_name:"\u0939\u093f\u0928\u094d\u0926\u0940",audible:!0,flag:"in"},hmn:{name:"Hmong",native_name:"Hmong",
audible:!1,flag:null},hu:{name:"Hungarian",native_name:"Hungarian magyaChichewar",audible:!0,flag:"hu"},is:{name:"Icelandic",native_name:"\u00cdslenska",audible:!1,flag:"is"},ig:{name:"Igbo",native_name:"Igbo",audible:!1,flag:null},id:{name:"Indonesian",native_name:"Bahasa Indonesia",audible:!0,flag:"id"},ga:{name:"Irish (Gaelic)",native_name:"Gaeilge",audible:!1,flag:"ie"},it:{name:"Italian",native_name:"italiano",audible:!0,flag:"it"},ja:{name:"Japanese",native_name:"\u65e5rus\u672c\u8a9e",audible:!0,
flag:"jp"},jv:{name:"Javanese",native_name:"ba\u1e63a Jawa",audible:!1,flag:null},kn:{name:"Kannada",native_name:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1 ",audible:!1,flag:"id"},kk:{name:"Kazakh",native_name:"\u049a\u0430\u0437\u0430\u049b \u0442\u0456\u043b\u0456 ",audible:!1,flag:null},km:{name:"Khmer",native_name:"\t\u1797\u17b6\u179f\u17b6\u1781\u17d2\u1798\u17c2\u179a ",audible:!1,flag:null},ko:{name:"Korean",native_name:"\ud55c\uad6d\uc5b4 ",audible:!0,flag:"kr"},ku:{name:"Kurdish",native_name:"Kurmanji ",
audible:!1,flag:null},ky:{name:"Kyrgyz",native_name:"\u0642\u0649\u0631\u0639\u0649\u0632 ",audible:!1,flag:null},lo:{name:"Lao",native_name:"\u0e9e\u0eb2\u0eaa\u0eb2\u0ea5\u0eb2\u0ea7 ",audible:!1,flag:null},la:{name:"Latin",native_name:"Lingua Latina",audible:!1,flag:"va"},lv:{name:"Latvian",native_name:"\tlatvie\u0161u valoda",audible:!1,flag:"lv"},lt:{name:"Lithuanian",native_name:"lietuvi\u0173 kalba",audible:!1,flag:"lt"},lb:{name:"Luxembourgish",native_name:"L\u00ebtzebuergesch",audible:!1,
flag:null},mk:{name:"Macedonian",native_name:"\u043c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438",audible:!1,flag:"mk"},mg:{name:"Malagasy",native_name:"Fiteny Malagasy",audible:!1,flag:null},ms:{name:"Malay",native_name:"Bahasa melayu",audible:!1,flag:"my"},ml:{name:"Malayalam",native_name:"\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02 ",audible:!1,flag:null},mt:{name:"Maltese",native_name:"Malti",audible:!1,flag:"mt"},mi:{name:"Maori",native_name:"\tte Reo M\u0101ori",audible:!1,flag:null},mr:{name:"Marathi",
native_name:"\u092e\u0930\u093e\u0920\u0940",audible:!1,flag:null},mn:{name:"Mongolian",native_name:"\u041c\u043e\u043d\u0433\u043e\u043b",audible:!1,flag:null},my:{name:"Myanmar (Burmese)",native_name:"\t\u1017\u1019\u102c\u1005\u1000\u102c\u1038 ",audible:!1,flag:null},ne:{name:"Nepali",native_name:"\u0928\u0947\u092a\u093e\u0932\u0940",audible:!1,flag:null},no:{name:"Norwegian",native_name:"norsk",audible:!0,flag:"no"},ps:{name:"Pashto",native_name:"\u067e\u069a\u062a\u0648",audible:!1,flag:null},
fa:{name:"Persian",native_name:"\u0641\u0627\u0631\u0633\u0649",audible:!1,flag:"ir"},pl:{name:"Polish",native_name:"polski",audible:!0,flag:"pl"},pt:{name:"Portuguese",native_name:"portugu\u00eas",audible:!0,flag:"pt"},pa:{name:"Punjabi",native_name:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40",audible:!1,flag:null},ro:{name:"Romanian",native_name:"limba",audible:!0,flag:"ro"},ru:{name:"Russian",native_name:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a ",audible:!0,flag:"ru"},sm:{name:"Samoan",
native_name:"Gagana Samoa",audible:!1,flag:null},gd:{name:"Scots Gaelic",native_name:"G\u00e0idhlig",audible:!1,flag:null},sr:{name:"Serbian",native_name:"\u0441\u0440\u043f\u0441\u043a\u0438",audible:!1,flag:"rs"},nso:{name:"Sesotho",native_name:"seSotho",audible:!1,flag:null},sn:{name:"Shona",native_name:"chiShona",audible:!1,flag:null},sd:{name:"Sindhi",native_name:"\u0633\u0646\u068c\u064a",audible:!1,flag:null},si:{name:"Sinhala",native_name:"\u0dc3\u0dd2\u0d82\u0dc4\u0dbd",audible:!1,flag:null},
sk:{name:"Slovak",native_name:"sloven\u010dina",audible:!0,flag:"sk"},sl:{name:"Slovenian",native_name:"sloven\u0161\u010dina",audible:!1,flag:"sk"},so:{name:"Somali",native_name:"af Soomaali",audible:!1,flag:null},es:{name:"Spanish",native_name:"espa\u00f1ol",audible:!0,flag:"es"},su:{name:"Sundanese",native_name:"Basa Sunda",audible:!1,flag:null},sw:{name:"Swahili",native_name:"Kiswahili",audible:!1,flag:"ke"},sv:{name:"Swedish",native_name:"svenska",audible:!0,flag:"se"},ta:{name:"Tamil",native_name:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd ",
audible:!1,flag:"in"},tg:{name:"Tajik",native_name:"\u0442\u043e\u04b7\u0438\u043a\u0438",audible:!1,flag:null},te:{name:"Telugu",native_name:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41",audible:!1,flag:"in"},th:{name:"Thai",native_name:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",audible:!0,flag:"th"},tr:{name:"Turkish",native_name:"T\u00fcrk\u00e7e",audible:!0,flag:"tr"},uk:{name:"Ukrainian",native_name:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430",audible:!1,flag:"ua"},ur:{name:"Urdu",
native_name:"\u0627\u0631\u062f\u0648",audible:!1,flag:"pk"},uz:{name:"Uzbek",native_name:"\t\u0623\u06c7\u0632\u0628\u06d0\u0643 \ufe97\ufef4\ufee0\u06cc o'zbek tili \u045e\u0437\u0431\u0435\u043a \u0442\u0438\u043b\u0438",audible:!1,flag:null},vi:{name:"Vietnamese",native_name:"ti\u1ebfng vi\u1ec7t",audible:!1,flag:"vn"},cy:{name:"Welsh",native_name:"Cymraeg",audible:!0,flag:"wales"},yi:{name:"Yiddish",native_name:"\u05f2\u05b4\u05d3\u05d9\u05e9",audible:!1,flag:"ua"},xh:{name:"Xhosa",native_name:"isiXhosa",
audible:!1,flag:null},yo:{name:"Yoruba",native_name:"Yor\u00f9b\u00e1",audible:!1,flag:null},zu:{name:"Zulu",native_name:"isiZulu",audible:!1,flag:null}},margins:[{name:"Default",value:null,icon:null},{name:"Large",value:"5%",icon:"recite-sprite-margin-large"},{name:"Medium",value:"15%",icon:"recite-sprite-margin-medium"},{name:"Small",value:"30%",icon:"recite-sprite-margin-small"}],alignments:[{name:"Default",value:null,icon:null},{name:"Left aligned",value:"left",icon:null},{name:"Right aligned",
value:"right",icon:null},{name:"Centered",value:"center",icon:null},{name:"Justified",value:"justify",icon:null}],simplifiedControls:!0,showLogo:!0,customLogo:!1,customLogoLink:!1,customLogoTitle:!1,customCloseTitle:!1,repositionBackground:!0};Recite.Event.subscribe("Preferences:load",d);Recite.Event.subscribe("Preferences:set",d);Recite.Event.subscribe("Preferences:reset",d);return{setOptions:function(b){a=Recite.Util.merge(a,b)},getOptions:function(){return a},init:function(){},localize:function(a){Recite.Debug.log("Recite.Controls.Desktop",
"Localizing controls: "+a);Recite.Language.Translate.translate(Recite.Sizzle("#recite-header")[0],a)},applyTabOrder:function(){if(a.autoIncrementTabIndex){var b=Recite.Sizzle("[tabindex]");Recite.Util.each(b,function(b,c){var d=parseInt(c.getAttribute("tabindex"));d>=a.tabIndexStartValue&&c.setAttribute("tabindex",d+200)})}h();Recite.Key("enter",function(){if(null!=document.activeElement.getAttribute("data-recite-tabbable"))return document.activeElement.click(),!1});Recite.Key("space",function(){if(null!=
document.activeElement.getAttribute("data-recite-tabbable"))return document.activeElement.click(),!1});Recite.Key("shift+tab",function(){var a=parseInt(document.activeElement.getAttribute("tabindex"))-1,b=Recite.Sizzle("[tabindex="+a+"]")[0],c=!1;Recite.Util.each(Recite.Sizzle(".recite-dropdown"),function(a,d){if(Recite.Dom.isDescendant(b,d)){var f=Recite.Sizzle("[data-target='#"+d.getAttribute("id")+"']")[0];-1==(" "+f.className+" ").replace(/[\n\t]/g," ").indexOf(" recite-dropdown-invoke-active ")&&
(c=!0,f.focus())}});if(c)return!1})},disable:function(){},invoke:function(b){var c=document.body;if(a.simplifiedControls){b.setAttribute("class",b.getAttribute("class")+" recite-controls-simplified");var i=Recite.Sizzle(".recite-sprite-logo")[0],h=Recite.Sizzle("#recite-logo-header")[0];if(Recite.Browser.isMobile()){i.setAttribute("class","recite-sprite-logo-icon");h.setAttribute("class",h.getAttribute("class")+" recite-header-logo-icon");var i=Recite.Sizzle(".recite-sprite-button-magnifier")[0],
h=Recite.Sizzle(".recite-sprite-button-ruler")[0],j=Recite.Sizzle(".recite-sprite-button-screenmask")[0];i.style.display="none";h.style.display="none";j.style.display="none"}else i.setAttribute("class","recite-sprite-logo-small")}d();var m=Recite.Dom.getStyle(b,"height"),m=parseInt(m.replace("px",""),10);if("tooltip"===Recite.getOptions().selectionMethod)try{Recite.PlayerControls.getProvider().setTopProtection(m)}catch(l){}if(a.repositionBackground)if(i=Recite.Dom.getStyle(c,"background-position-y"),
"0%"===i)c.setAttribute("style","background-position-y:"+m+" px !important");else if(i.match(/px/i)||"top"===i)i=i.replace("px",""),i=parseInt(i,10)+parseInt(m,10),c.setAttribute("style","background-position-y:"+i+" px !important");c.style.setProperty?(c.style.setProperty("position","absolute","important"),c.style.setProperty("top",m+"px","important"),c.style.setProperty("width","100%","important")):(c.style.width="100%",c.style.position="absolute",c.style.top=m+"px");Recite.Util.each(Recite.Sizzle("*"),
function(a,b){if(!/recite/.test(b.getAttribute("id"))&&!/recite/.test(b.getAttribute("class"))&&"fixed"===Recite.Dom.getStyle(b,"position")){var c=b.offsetTop;c<m&&(b.style.top=m+c+"px")}});var p=Recite.Sizzle("#recite-fonts")[0];Recite.Util.each(a.fonts,function(a,b){var c=document.createElement("div");c.setAttribute("class","recite-font recite-preference-set");c.setAttribute("data-key","style.font.face");"Default"!==b?(c.setAttribute("data-value",b.name),c.style.fontFamily=b.font):c.setAttribute("data-value",
"null");c.innerText=b.name;c.textContent=b.name;c.setAttribute("data-recite-tabbable","");p.appendChild(c)});var v=Recite.Sizzle("#recite-swatches")[0];Recite.Util.each(a.swatches,function(a,b){var c=document.createElement("div");c.setAttribute("class","recite-swatch recite-preference-set");c.setAttribute("data-recite-translate-skip","true");null===b.backgroundColor&&null===b.color&&null===b.linkColor?(c.setAttribute("class",c.getAttribute("class")+" recite-swatch-default"),c.textContent="Default",
c.innerText="Default"):(c.textContent="A",c.innerText="A");var d="style.backgroundColor style.font.color style.link.color",f=b.backgroundColor+" "+b.color+" "+b.linkColor;b.hasOwnProperty("rulerColor")&&(d+=" style.ruler.color",f+=" "+b.rulerColor);b.hasOwnProperty("maskColor")&&(d+=" style.screenMask.color",f+=" "+b.maskColor);c.setAttribute("data-key",d);c.setAttribute("data-value",f);c.setAttribute("data-recite-tabbable","");c.style.color=b.color;c.style.backgroundColor=b.backgroundColor;v.appendChild(c)});
var n=Recite.Sizzle("#recite-languages")[0];Recite.Util.each(a.languages,function(a,b){var c=document.createElement("li"),d=document.createElement("div"),f=document.createElement("div");b.audible&&(f.setAttribute("class","recite_language_audible recite-sprite-audible"),c.appendChild(f));c.appendChild(document.createTextNode(b.name));"undefined"!=typeof b.native_name&&(c.appendChild(document.createElement("br")),d.setAttribute("class","recite_language_native_name_str"),d.setAttribute("data-recite-translate-skip",
"false"),d.appendChild(document.createTextNode(b.native_name)),c.appendChild(d));c.setAttribute("class","recite-language-set");c.setAttribute("data-language",a);c.setAttribute("data-recite-tabbable","");c.setAttribute("data-recite-translate-skip","false");n.appendChild(c)});var q=Recite.Sizzle("#recite-margins")[0];Recite.Util.each(a.margins,function(a,b){var c=document.createElement("div");c.setAttribute("class","recite-margin recite-preference-set");c.setAttribute("data-key","style.marginSize");
c.setAttribute("data-value",b.value);var d=b.icon||null;if(null!==d){var f=document.createElement("div");f.setAttribute("class",d);f.style.margin="0 auto";f.setAttribute("data-key","style.marginSize");f.setAttribute("data-value",b.value);c.appendChild(f)}else c.textContent=b.name,c.innerText=b.name;q.appendChild(c)});var s=Recite.Sizzle(".recite-sprite-button-margin")[0];s.style.display="none";Recite.Event.subscribe("TextMode:enabled",function(){s.style.display="block"});Recite.Event.subscribe("TextMode:disabled",
function(){s.style.display="none"});var t=Recite.Sizzle("#recite-alignments")[0];Recite.Util.each(a.alignments,function(a,b){var c=document.createElement("div");c.setAttribute("class","recite-alignment recite-preference-set");c.setAttribute("data-key","style.textAlign");c.setAttribute("data-value",b.value);var d=b.icon||null;if(null!==d){var f=document.createElement("div");f.setAttribute("class",d);f.style.margin="0 auto";f.setAttribute("data-key","style.text-align");f.setAttribute("data-value",b.value);
c.appendChild(f)}else c.textContent=b.name,c.innerText=b.name;t.appendChild(c)});var u=Recite.Sizzle(".recite-sprite-button-alignment")[0];u&&(u.style.display="none",Recite.Event.subscribe("TextMode:enabled",function(){u.style.display="block"}),Recite.Event.subscribe("TextMode:disabled",function(){u.style.display="none"}));c=Recite.Sizzle(".recite-button",b);Recite.UI.Dropdown.invoke(c);Recite.Debug.log("Recite.Desktop","launch advanced");Recite.UI.AdvancedColors.invoke(".recite-colorpicker",b);var r=
Recite.Sizzle(".recite-sprite-button-play")[0];Recite.DomEvent.add(r,"click",function(){"stopped"===r.getAttribute("data-status")?Recite.PlayerControls.play():Recite.PlayerControls.stop()});Recite.Event.subscribe("Audio:ended",function(){e(r,"stop")});Recite.Event.subscribe("Audio:started",function(){e(r,"play")});if(!a.showLogo||!Recite.getOptions("showBrand"))b=Recite.Sizzle(".recite-logo")[0],b.innerHTML="",b.setAttribute("class","custom-logo");!1!=a.customLogo&&(b=Recite.Sizzle(".recite-logo")[0],
b.setAttribute("class","custom-logo"),b.innerHTML='<img src="'+a.customLogo+'" />',!1!=a.customLogoLink&&(b.href=a.customLogoLink),!1!=a.customLogoTitle&&(b.title=a.customLogoTitle));!1!=a.customCloseTitle&&(b=Recite.Sizzle("a.recite-close"),Recite.Util.each(b,function(b,c){c.title=a.customCloseTitle}));!1===Recite.AudioDownload.getOptions().enabled&&(b=Recite.Sizzle(".recite-sprite-button-mp3")[0],b.outerHTML="");b=Recite.Sizzle(".recite-close");Recite.getOptions("showBrand")||Recite.Util.each(b,
function(a,b){b.setAttribute("title","Close Accessibility Toolbar")});Recite.DomEvent.add(b,"click",function(a){a.preventDefault()});Recite.DomEvent.add(Recite.Sizzle("#recite-logo-header"),"click",function(b){if(a.promptBeforeLeave){b.preventDefault();var c=Recite.Controls.disableOverlay();Recite.Gui.Modal.show("Leaving Website","You are about to leave this website to go to http://www.reciteme.com. Click OK or hit <em>enter</em> key to continue. Press esc key or hit <em>cancel</em> to stay on this page.",
"OK","Cancel",function(){window.location.href=Recite.Sizzle("#recite-logo-header")[0].getAttribute("href")},function(){Recite.Gui.Notification.show("Close operation canceled");Recite.Controls.reEnableOverlay(c)})}})}}}();Recite.namespace("Controls.Mobile");
Recite.Controls.Mobile=function(){function e(d,c){if("play"===c||"stopped"===d.getAttribute("data-status")&&"undefined"===c)return d.setAttribute("class",d.getAttribute("class").replace("recite-sprite-button-top-play-mobile","recite-sprite-button-top-stop-mobile")),d.setAttribute("data-status","playing"),"playing";if("stop"===c||"playing"===d.getAttribute("data-status")&&"undefined"===c)return d.setAttribute("class",d.getAttribute("class").replace("recite-sprite-button-top-stop-mobile","recite-sprite-button-top-play-mobile")),
d.setAttribute("data-status","stopped"),"stopped"}var h={fonts:"Default Arial Verdana Georgia Tahoma Trebuchet Tiresias".split(" "),swatches:[{backgroundColor:null,color:null,linkColor:null},{backgroundColor:"#000",color:"#fff",linkColor:"#C00"},{backgroundColor:"#C3272A",color:"#FFF",linkColor:"#00C"},{backgroundColor:"#F05924",color:"#FFF",linkColor:"#00C"},{backgroundColor:"#37B64B",color:"#fff",linkColor:"#2fc2ef"},{backgroundColor:"#0201FF",color:"#fff",linkColor:"#9c0001"},{backgroundColor:"#0000FE",
color:"#FCED20",linkColor:"#2fc2ef"},{backgroundColor:"#FCED20",color:"#0000FE",linkColor:"#2fc2ef"},{backgroundColor:"#fff",color:"#C3272A",linkColor:"#2fc2ef"},{backgroundColor:"#fff",color:"#F05924",linkColor:"#2fc2ef"},{backgroundColor:"#fff",color:"#37B64B",linkColor:"#C00"},{backgroundColor:"#fff",color:"#0201FF",linkColor:"#C00"},{backgroundColor:"#1DFF16",color:"#F4EED9",linkColor:"#C00"},{backgroundColor:"#CACFD3",color:"#343A3F",linkColor:"#C00"},{backgroundColor:"#F4EED9",color:"#1D1916",
linkColor:"#C00"},{backgroundColor:"#343A3F",color:"#CACFD3",linkColor:"#C00"},{backgroundColor:"#fff",color:"#000",linkColor:"#C00"}],languages:{"default":{name:"Default",flag:null},af:{name:"Afrikaans",flag:"sa"},sq:{name:"Albanian",flag:"al"},ar:{name:"Arabic",flag:"dz"},az:{name:"Azerbaijani",flag:"az"},eu:{name:"Basque",flag:null},bn:{name:"Bengali",flag:"bd"},be:{name:"Belarusian",flag:"by"},bg:{name:"Bulgarian",flag:"bg"},ca:{name:"Catalan",flag:"ad"},"zh-CN":{name:"Chinese Simplified",flag:"cn"},
"zh-TW":{name:"Chinese Traditional",flag:"cn"},hr:{name:"Croatian",flag:"hr"},cs:{name:"Czech",flag:"cz"},da:{name:"Danish",flag:"dk"},nl:{name:"Dutch",flag:"nl"},en:{name:"English",flag:"gb"},eo:{name:"Esperanto",flag:null},et:{name:"Estonian",flag:"ee"},tl:{name:"Filipino",flag:"ph"},fi:{name:"Finnish",flag:"fi"},fr:{name:"French",flag:"fr"},gl:{name:"Galician",flag:"gl"},ka:{name:"Georgian",flag:"ge"},de:{name:"German",flag:"de"},el:{name:"Greek",flag:"gr"},gu:{name:"Gujarati",flag:"gu"},ht:{name:"Haitian Creole",
flag:"ht"},iw:{name:"Hebrew",flag:"il"},hi:{name:"Hindi",flag:"in"},hu:{name:"Hungarian",flag:"hu"},is:{name:"Icelandic",flag:"is"},id:{name:"Indonesian",flag:"id"},ga:{name:"Irish",flag:"ie"},it:{name:"Italian",flag:"it"},ja:{name:"Japanese",flag:"jp"},kn:{name:"Kannada",flag:"id"},ko:{name:"Korean",flag:"kr"},la:{name:"Latin",flag:"va"},lv:{name:"Latvian",flag:"lv"},lt:{name:"Lithuanian",flag:"lt"},mk:{name:"Macedonian",flag:"mk"},ms:{name:"Malay",flag:"my"},mt:{name:"Maltese",flag:"mt"},no:{name:"Norwegian",
flag:"no"},fa:{name:"Persian",flag:"ir"},pl:{name:"Polish",flag:"pl"},pt:{name:"Portuguese",flag:"pt"},ro:{name:"Romanian",flag:"ro"},ru:{name:"Russian",flag:"ru"},sr:{name:"Serbian",flag:"rs"},sk:{name:"Slovak",flag:"sk"},sl:{name:"Slovenian",flag:"sk"},es:{name:"Spanish",flag:"es"},sw:{name:"Swahili",flag:"ke"},sv:{name:"Swedish",flag:"se"},ta:{name:"Tamil",flag:"in"},te:{name:"Telugu",flag:"in"},th:{name:"Thai",flag:"th"},tr:{name:"Turkish",flag:"tr"},uk:{name:"Ukrainian",flag:"ua"},ur:{name:"Urdu",
flag:"pk"},vi:{name:"Vietnamese",flag:"vn"},cy:{name:"Welsh",flag:"wales"},yi:{name:"Yiddish",flag:"ua"}}};return{setOptions:function(d){Recite.Debug.log("Recite.Controls.Mobile","Setting options");h=Recite.Util.merge(h,d)},init:function(){},localize:function(d){Recite.Debug.log("Recite.Controls.Desktop","Localizing controls: "+d)},invoke:function(d){var c=document.body,b=Recite.Dom.getStyle(d,"height"),b=parseInt(b.replace("px",""),10)+10;c.style.position="absolute";c.style.paddingBottom=b+"px";
c.style.top=b+"px";c.style.width="100%";var a=Recite.Sizzle("#recite-fonts-list")[0];Recite.Util.each(h.fonts,function(b,c){var d=document.createElement("li"),f=document.createTextNode(c);d.setAttribute("class","recite-font recite-preference-set");d.setAttribute("data-key","style.font.face");d.setAttribute("data-value",c);d.style.fontFamily=c;d.appendChild(f);a.appendChild(d)});var f=Recite.Sizzle("#recite-languages")[0];Recite.Util.each(h.languages,function(a,b){var c=document.createElement("li"),
d=document.createTextNode(b.name);c.setAttribute("class","recite-language-set");c.setAttribute("data-language",a);c.appendChild(d);f.appendChild(c)});var g=Recite.Sizzle("#recite-swatches")[0];Recite.Util.each(h.swatches,function(a,b){var c=document.createElement("div");c.setAttribute("class","recite-swatch recite-preference-set");null===b.backgroundColor&&null===b.color&&null===b.linkColor?(c.setAttribute("class",c.getAttribute("class")+" recite-swatch-default"),c.textContent="/",c.innerText="/"):
(c.textContent="A",c.innerText="A");c.setAttribute("data-key","style.backgroundColor style.font.color style.link.color");c.setAttribute("data-value",b.backgroundColor+" "+b.color+" "+b.linkColor);c.style.setProperty("color",b.color,"important");c.style.backgroundColor=b.backgroundColor;g.appendChild(c)});d=Recite.Sizzle(".recite-dropdown-invoke",d);Recite.UI.Dropdown.invoke(d);d=Recite.Sizzle(".recite-language-set");Recite.DomEvent.add(d,"click",function(){Recite.UI.Dropdown.hideGroup("main")});d=
Recite.Sizzle(".recite-sprite-button-share-mobile")[0];Recite.DomEvent.add(d,"click",function(){ReciteAndroidInterface.sharePage(document.URL)});d=Recite.Sizzle(".recite-sprite-button-favourite-mobile")[0];Recite.DomEvent.add(d,"click",function(){ReciteAndroidInterface.addToFavourites(document.URL)});var i=Recite.Sizzle(".recite-sprite-button-top-play-mobile")[0];Recite.DomEvent.add(i,"click",function(){"stopped"===i.getAttribute("data-status")?Recite.PlayerControls.play():Recite.PlayerControls.stop()});
Recite.Event.subscribe("Audio:ended",function(){e(i,"stop")});Recite.Event.subscribe("Audio:started",function(){e(i,"play")})}}}();Recite.namespace("Recite.Parser.Html");
Recite.Parser.Html=function(){function e(b){var a=null;if(0<b.length){var c=0,g=!1;Recite.Util.each(b,function(b,e){c+=Recite.Dom.getText(e).trim().length;if("IMG"==e.nodeName||"INPUT"==e.nodeName||"TEXTAREA"==e.nodeName)g=!0,e.setAttribute(d.elementAttribute,"true"),a=e});if(c>=d.minCharacters&&!g){var e=!1;Recite.Util.each(Recite.Dom.getAncestors(b[0]),function(c,d){if(/ui-datepicker/g.test(d.getAttribute("class"))&&3===b[0].nodeType){e=!0;a=b[0].parentNode;var f=b[0].parentNode.getAttribute("class");
f&&(f=f.replace(" recite-ele",""));b[0].parentNode.setAttribute("class",f+" recite-ele")}});if(!e){var h=b[0].ownerDocument.createElement(d.wrapTag);h.className="recite-ele recite-ele-style";h.style.display="inline";if(d.debug.highlightElements){var j=Math.floor(256*Math.random()),m=Math.floor(256*Math.random()),l=Math.floor(256*Math.random());try{h.style.backgroundColor="rgba("+j+","+m+","+l+",0.4)"}catch(p){h.style.backgroundColor="rgb("+j+","+m+","+l+")"}}a=h;b[0].parentNode.insertBefore(a,b[0]);
for(h=0;h<b.length;h++)j=b[h].parentNode.removeChild(b[h]),a.appendChild(j)}}}return a}function h(b,a,f){"undefined"===typeof f&&(f=[[]]);var g=!1,e=!1;if(1===b.nodeType&&/recite-ele/g.test(b.getAttribute("class")))return f;if(b){if(1===b.nodeType&&(0<=Recite.Util.inArray(b.tagName,d.skipElements)||"true"===b.getAttribute("data-recite-skip"))||1===b.nodeType&&0<c.length&&"BR"===b.tagName&&"BR"===c[c.length-1].tagName)return f;3===b.nodeType&&Recite.Dom.getText(b).replace(/^\s*/,"").replace(/\s*$/,
"");if(1===b.nodeType){var k=[],j=[];Recite.Util.each(d.concatenateElementExceptions,function(a,b){k.push(b.toLowerCase())});Recite.Util.each(d.concatenateTypes,function(a,b){j.push(b.toLowerCase())});Recite.Util.each(d.skipConcatenation.elementTypes,function(a,b){k.push(b.toLowerCase())});var m=0<=Recite.Util.inArray(Recite.Dom.getStyle(b,"display"),j),l=0<=Recite.Util.inArray(b.tagName.toLowerCase(),k),p=!1;Recite.Util.each(d.skipConcatenation.selectors,function(a,c){var d=Recite.Sizzle(c);Recite.Util.each(d,
function(a,c){c==b&&(p=!0)})});if(m=m&&!l&&!p){a:{if(1===b.nodeType){m=b.getElementsByTagName("*");for(l=0;l<m.length;l++)if("block"===Recite.Dom.getStyle(m[l],"display")){m=!0;break a}}m=!1}m=!m}if(m||"INPUT"==b.nodeName||"TEXTAREA"==b.nodeName&&"true"!==b.getAttribute("data-recite-skip"))g=!0}else 3===b.nodeType&&(g=!0);!0===g&&(c[c.length-1]!==b.previousSibling&&(f.push(c),c=[]),c.push(b),e=!0);g=0;m=b.childNodes[g];if(!e)for(;m;)h(m,a+1,f),g++,m=b.childNodes[g]}return f}var d={maxCharacters:1E3,
minCharacters:1,wrapTag:"recite",elementAttribute:"data-recite-ele",concatenateTypes:["inline","inline-block"],skipConcatenation:{elementTypes:["li","img"],selectors:[]},skipElements:"SCRIPT STYLE SELECT OPTION FRAMESET FRAME IFRAME NOSCRIPT".split(" "),parseImgAltAttribute:!0,bubbleEvents:!1,bubbleStyles:!0,debug:{highlightElements:!1},concatenateElementExceptions:["li"]},c=[];return{setOptions:function(b){Recite.Debug.log("Recite.Parser.Html","Setting options");d=Recite.Util.merge(d,b)},parse:function(b){var a=
new Date,f=h(b,1),b=Recite.Sizzle("img");Recite.Util.each(b,function(a,b){"true"!==b.getAttribute("data-recite-skip")&&f.push([b])});0<c.length&&f.push(c);0===f[f.length-1].length&&f.pop();var g=[];Recite.Util.each(f,function(a,b){if(0!==b.length){var c=e(b);null!==c&&g.push(c)}});Recite.Debug.log("Recite.Parser.Html","Parsed "+g.length+" elements in: "+((new Date).getTime()-a.getTime())+"ms");!1!==d.bubbleEvents&&(a=Recite.Sizzle(".recite-ele"),Recite.DomEvent.add(a,"click",function(a){a.target.parentNode.click()}));
Recite.Event.publish("Recite.Parser:parsed");for(var a=document.getElementsByTagName("*"),b=0,i=a.length;b<i;b++)Recite.Style.getOptions().preserve_background_images&&""!=a[b].style.backgroundImage&&a[b].setAttribute("class",a[b].getAttribute("class")+" recite-ignore-styles-background ");return g},wrapElements:function(b){Recite.Util.each(b,function(a,b){e(b)})}}}();Recite.namespace("Recite.Parser.Selector");
Recite.Parser.Selector=function(){var e={maxCharacters:1E3,minCharacters:1,selector:".recite"};return{setOptions:function(h){Recite.Debug.log("Recite.Parser.Selector","Setting options");e=Recite.Util.merge(e,h)},parse:function(h){Recite.Debug.log("Recite.Parser.Selector","Parser invoked on element:",h);var d=Recite.Sizzle(e.selector,h);Recite.Util.each(d,function(c,b){var a=Recite.Dom.getText(b);(a.length<e.minCharacters||a.length>e.maxCharacters)&&d.splice(c)});return d}}}();Recite.namespace("PlayerControls");
Recite.PlayerControls=function(){function e(){null===d.provider?d.provider=d.enableMobileControls&&Recite.Browser.isMobile()?Recite.PlayerControls.Fixed:Recite.PlayerControls.Tooltip:"none"===d.provider?d.provider=Recite.PlayerControls.NoGUI:"disable"===d.provider&&(d.provider=null);null!=d.provider&&d.provider.init&&d.provider.init()}function h(){Recite.Preferences.get("playerControls.enabled")?Recite.PlayerControls.enable():Recite.PlayerControls.disable()}var d={provider:null,enableMobileControls:!0,
minSkipTime:300},c=null;Recite.Event.subscribe("Recite.Dom.Observor:change",function(b,a){void 0!=a&&a.hasOwnProperty("affectedElements")&&(Recite.PlayerControls.invoke(a.affectedElements),Recite.PlayerControls.invalidate())});Recite.Event.subscribe("Recite:load",e);Recite.Event.subscribe("Preferences:load",h);Recite.Event.subscribe("Preferences:set",h);Recite.Event.subscribe("Preferences:reset",h);return{init:e,setOptions:function(b){b.provider&&d.provider&&d.provider.destroy();d=Recite.Util.merge(d,
b);Recite.PlayerControls.Tooltip.setOptions(b.Tooltip);Recite.PlayerControls.Fixed.setOptions(b.Fixed);Recite.PlayerControls.NoGUI.setOptions(b.NoGUI);b.provider&&b.provider.init&&d.provider.init()},invoke:function(b){null!=d.provider&&d.provider.invoke(b)},enable:function(){null!=d.provider&&d.provider.enable()},disable:function(){null!=d.provider&&d.provider.disable()},hide:function(){null!=d.provider&&d.provider.hide()},invalidate:function(){null!=d.provider&&d.provider.invalidate()},getControls:function(){return null!=
d.provider?d.provider.getControls():null},getProvider:function(){return d.provider},play:function(){return null!=d.provider?document.activeElement!==document.body?d.provider.play(document.activeElement):d.provider.play():null},stop:function(){return null!=d.provider?d.provider.stop():null},next:function(b){var a=Math.floor(Date.now());window.clearTimeout(null);if(null==c||a-c>d.minSkipTime)return c=a,Recite.Player.stop(),Recite.Debug.log("Recite.PlayerControls","next"),Recite.FrameUpdater.isActive()&&
Recite.FrameUpdater.hasActiveChildFrame()?(Recite.FrameUpdater.activeFramePlayNext(),null):null!=d.provider?d.provider.next(b):null;Recite.Debug.log("Recite.PlayerControls","Skipping too fast, halting")},previous:function(b){var a=Math.floor(Date.now());window.clearTimeout(null);if(null==c||a-c>d.minSkipTime)return c=a,Recite.Player.stop(),Recite.Debug.log("Recite.PlayerControls","prev"),Recite.FrameUpdater.isActive()&&Recite.FrameUpdater.hasActiveChildFrame()?(Recite.FrameUpdater.activeFramePlayPrev(),
null):null!=d.provider?d.provider.previous(b):null;Recite.Debug.log("Recite.PlayerControls","Skipping too fast, halting")},first:function(){var b=Math.floor(Date.now());window.clearTimeout(null);if(null==c||b-c>d.minSkipTime)return c=b,Recite.Player.stop(),Recite.Debug.log("Recite.PlayerControls","first"),null!=d.provider?d.provider.first():null;Recite.Debug.log("Recite.PlayerControls","Skipping too fast, halting")},last:function(){var b=Math.floor(Date.now());window.clearTimeout(null);if(null==c||
b-c>d.minSkipTime)return c=b,Recite.Player.stop(),Recite.Debug.log("Recite.PlayerControls","last"),null!=d.provider?d.provider.last():null;Recite.Debug.log("Recite.PlayerControls","Skipping too fast, halting")}}}();Recite.namespace("PlayerControls.Tooltip");
Recite.PlayerControls.Tooltip=function(){function e(a){Recite.Util.each(i,function(b,d){!Recite.Dom.isDescendant(a.target,d)&&(a.target!==d&&!Recite.Dom.isDescendant(a.target,k)&&a.target!==k&&!Recite.Dom.isDescendant(a.target,Recite.Sizzle("#recite-header")[0]))&&c(d)})}function h(){if(f){clearTimeout(a.timeout);var b=this;k!==this&&(a.timeout=setTimeout(function(){d(b)},a.intent))}}function d(a){null!==a&&(null!==k&&(null!=k.getAttribute("class")&&k.setAttribute("class",k.getAttribute("class").replace("recite-selected",
"")),Recite.Event.publish("Recite.Tooltip:hide",{target:k})),k=a,b(a),k.setAttribute("class",k.getAttribute("class")+" recite-selected"),Recite.Event.publish("Recite.Tooltip:show",{target:k}),Recite.Preferences.get("player.autoplay")&&Recite.PlayerControls.Tooltip.play())}function c(a){a.style.display="none";null!==k&&(null!=k.getAttribute("class")&&k.setAttribute("class",k.getAttribute("class").replace("recite-selected","")),Recite.Event.publish("Recite.Tooltip:hide",{target:k}));k=null}function b(b){var c,
d=Recite.Sizzle("#recite-tooltip",g)[0];"undefined"===typeof d&&(Recite.Debug.log("Recite.Tooltip","Adding tooltip to document"),d=g.createElement("div"),d.setAttribute("class","recite-tooltip small"),d.setAttribute("id","recite-tooltip"),d.style.position="absolute",d.innerHTML='<div class="recite-tooltip-content">'+a.content+'</div>                         <div class="recite-sprite-tip-bottomleft" id="recite-tip"></div>',Recite.Sizzle("body",g)[0].appendChild(d),Recite.getOptions(),!1!==Recite.Controls.Desktop.getOptions().showLogo&&
(!1!==Recite.getOptions("showBrand")&&!1===Recite.Controls.Desktop.getOptions().customLogo)&&(document.getElementById("recite-tooltip-logo").setAttribute("class","recite-sprite-tooltip-logo"),d.setAttribute("class","recite-tooltip")),Recite.Debug.log("Recite.Tooltip","Binding buttons for tooltip"),c=g.getElementById("recite-play"),Recite.DomEvent.add(c,"click",function(){Recite.PlayerControls.Tooltip.play()}),c=g.getElementById("recite-stop"),Recite.DomEvent.add(c,"click",function(){Recite.Player.stop()}),
c=g.getElementById("recite-back"),Recite.DomEvent.add(c,"click",function(){Recite.Player.rewind()}),c=g.getElementById("recite-forward"),Recite.DomEvent.add(c,"click",function(){Recite.Player.forward()}),i.push(d));c=d;c.style.display="block";for(var f=0;f<i.length;f++)i[f]!==c&&(i[f].style.display="none");var e=g.body,j=Recite.Dom.getPosition(b),f=Recite.Dom.getScroll(b.ownerDocument.defaultView),h=j.top-c.offsetHeight-a.adjust.y,k=j.left+("right"==a.position?b.offsetWidth:0),d="recite-sprite-tip-bottom-left",
l=h-f.y-a.adjust.y,m=k+c.offsetWidth-f.x;c.style.position="absolute";for(var p=Recite.Dom.getAncestors(b),f=0;f<p.length;f++)"fixed"===Recite.Dom.getStyle(p[f],"position")&&(c.style.position="fixed",l=h-a.adjust.y);l<a.protect.top-a.adjust.y?(h=j.top+b.offsetHeight+a.adjust.y,d="recite-sprite-tip-top-left",m>e.clientWidth-a.protect.right&&(k=j.left-c.offsetWidth+a.adjust.x,d="recite-sprite-tip-top-right")):m>e.clientWidth&&(k=j.left-c.offsetWidth+a.adjust.x,d="recite-sprite-tip-bottom-right");c.style.top=
h+"px";c.style.left=k+"px";b=g.getElementById("recite-tip");b.setAttribute("class",d);b.setAttribute("className",d)}var a={dimensions:{height:0},adjust:{x:0,y:15},protect:{top:40,right:0,bottom:0,left:0},position:"left",intent:500,timeout:null,content:'<div id="recite-tooltip-logo" data-recite-skip="true"></div>               <a id="recite-play" class="recite-sprite-tooltip-btn recite-sprite-tooltip-play"></a><a id="recite-stop" class="recite-sprite-tooltip-btn recite-sprite-tooltip-stop"></a>               <a id="recite-back" class="recite-sprite-tooltip-btn recite-sprite-tooltip-back"></a><a id="recite-forward" class="recite-sprite-tooltip-btn recite-sprite-tooltip-forward"></a>'},
f=!0,g,i=[],k=null,j=!1,m=null,l,p;l=p=function(){k&&b(k)};return{init:function(){if(!j){m=Recite.Event.subscribe("Style:updated",Recite.PlayerControls.Tooltip.invalidate);for(var a=[window],b=0;b<a.length;b++)Recite.DomEvent.add(a[b],"resize",p),Recite.DomEvent.add(a[b],"scroll",l),Recite.DomEvent.add(a[b],"click",e);j=!0}},destroy:function(){Recite.Event.unsubscribe(m);Recite.Util.each([window],function(a,b){Recite.DomEvent.remove(b,"resize",p);Recite.DomEvent.remove(b,"scroll",l);Recite.DomEvent.remove(b,
"click",e)});j=!1},enable:function(){f=!0},disable:function(){f=!1;Recite.Util.each(i,function(a,b){c(b)})},hide:function(){Recite.Util.each(i,function(a,b){c(b)})},setOptions:function(b){a=Recite.Util.merge(a,b)},getOptions:function(){return a},invoke:function(b){this.init();Recite.Debug.log("Recite.PlayerControls.Tooltip","Invoking tooltip controls.");g=b.ownerDocument?b.ownerDocument:document;Recite.DomEvent.add(b,"mouseover",h);Recite.DomEvent.add(b,"mouseout",function(){clearTimeout(a.timeout)})},
invalidate:function(){k&&b(k)},play:function(a){a?(Recite.PlayerDispatcher.dispatch(a),d(a)):null===k?Recite.PlayerControls.next():Recite.PlayerDispatcher.dispatch(k)},stop:function(){Recite.Player.stop()},seekingSupported:function(){return!0},next:function(a){"undefined"!=typeof a&&(k=a);a=Recite.Dom.getNextElement(k);if(a===k||null==a)return Recite.Debug.log("Recite.PlayerControls.Tooltip","next element same as current or null, halting"),null;d(a);Recite.Dom.isVisible(a)||Recite.Dom.scrollTo(a)},
previous:function(a){"undefined"!=typeof a&&(k=a);a=Recite.Dom.getPreviousElement(k);if(a===k||null==a)return Recite.Debug.log("Recite.PlayerControls.Tooltip","prev element same as current or null, halting"),null;d(a);Recite.Dom.isVisible(a)||Recite.Dom.scrollTo(a)},first:function(){var a=Recite.Dom.getFirstElement();if(null!=a)d(a);else return Recite.Debug.log("Recite.PlayerControls.Tooltip","no first element, halting"),null;Recite.Dom.isVisible(a)||Recite.Dom.scrollTo(a)},last:function(){var a=
Recite.Dom.getLastElement();if(null!=a)d(a);else return Recite.Debug.log("Recite.PlayerControls.Tooltip","no last element, halting"),null;Recite.Dom.isVisible(a)||Recite.Dom.scrollTo(a)},current:k}}();Recite.namespace("PlayerControls.Fixed");
Recite.PlayerControls.Fixed=function(){function e(){l=Recite.Event.subscribe("Style:updated",Recite.PlayerControls.Tooltip.invalidate);for(var a=[window],b=0;b<a.length;b++)Recite.DomEvent.add(a[b],"resize",v),Recite.DomEvent.add(a[b],"scroll",p),Recite.DomEvent.add(a[b],"click",n)}function h(){Recite.Event.unsubscribe(l);Recite.Util.each([window],function(a,b){Recite.DomEvent.remove(b,"resize",v);Recite.DomEvent.remove(b,"scroll",p);Recite.DomEvent.remove(b,"click",n)})}function d(){if(g){clearTimeout(f.timeout);
var a=this;j!==this&&(f.timeout=setTimeout(function(){c(a)},f.intent))}}function c(b){null!==j&&null!=j.getAttribute("class")&&j.setAttribute("class",j.getAttribute("class").replace("recite-selected",""));j=b;a(b);Recite.Preferences.get("player.autoplay")&&Recite.PlayerDispatcher.dispatch(j);j.setAttribute("class",j.getAttribute("class")+" recite-selected")}function b(a){a.style.display="none";null!==j&&null!=j.getAttribute("class")&&j.setAttribute("class",j.getAttribute("class").replace("recite-selected",
""));Recite.Sizzle("body",document)[0].style.paddingBottom="0px";j=null}function a(){var a;a=Recite.Sizzle("#recite-tooltip",i)[0];if("undefined"===typeof a){Recite.Debug.log("Recite.PlayerControls.Fixed","Adding fixed controls to document");a=i.createElement("div");a.setAttribute("class","recite-tooltip-fixed");a.setAttribute("id","recite-tooltip");a.style.position="absolute";a.innerHTML='<div class="recite-tooltip-content">'+f.content+'</div>               <div class="recite-tip-bottomleft" id="recite-tip"></div>';
Recite.Sizzle("body",i)[0].appendChild(a);Recite.Debug.log("Recite.PlayerControls.Fixed","Binding buttons for fixed controls");var b=i.getElementById("recite-play");Recite.DomEvent.add(b,"click",function(){Recite.PlayerDispatcher.dispatch(j)});b=i.getElementById("recite-stop");Recite.DomEvent.add(b,"click",function(){Recite.Player.stop()});b=i.getElementById("recite-back");Recite.DomEvent.add(b,"click",function(){Recite.PlayerControls.previous()});b=i.getElementById("recite-forward");Recite.DomEvent.add(b,
"click",function(){Recite.PlayerControls.next()});k.push(a)}Recite.Debug.log("Recite.PlayerControls.Fixed","Fixed controls added to document: "+a);a.style.display="block";a.style.position="fixed";for(b=0;b<k.length;b++)k[b]!==a&&(k[b].style.display="none");Recite.Sizzle("body",document)[0].style.paddingBottom=f.dimensions.height+"px"}var f={dimensions:{height:98},intent:500,timeout:null,content:'<a id="recite-back" class="recite-sprite-mobile-previous" onclick="Recite.PlayerControls.previous();"></a>                   <a id="recite-play" class="recite-sprite-mobile-play"></a>                   <a id="recite-stop" class="recite-sprite-mobile-stop"></a>                   <a id="recite-forward" class="recite-sprite-mobile-next" onclick="Recite.PlayerControls.next();"></a>'},
g=!0,i,k=[],j=null,m=!1,l=null,p,v;p=v=function(){j&&a(j)};var n=function(a){Recite.Util.each(k,function(c,d){!Recite.Dom.isDescendant(a.target,d)&&(a.target!==d&&!Recite.Dom.isDescendant(a.target,j)&&a.target!==j&&!Recite.Dom.isDescendant(a.target,Recite.Sizzle("#recite-header")[0]))&&b(d)})};return{init:function(){m||(e(),m=!0)},destroy:function(){h();m=!1},enable:function(){g||e();g=!0},disable:function(){g&&h();g=!1},hide:function(){Recite.Util.each(k,function(a,c){b(c)})},setOptions:function(a){f=
Recite.Util.merge(f,a)},getOptions:function(){return f},invoke:function(a){Recite.Debug.log("Recite.Tooltop.Desktop","Invoking fixed playerControls");i=a.ownerDocument?a.ownerDocument:document;Recite.DomEvent.add(a,"mouseover",d);Recite.DomEvent.add(a,"mouseout",function(){clearTimeout(f.timeout)})},invalidate:function(){j&&a(j)},seekingSupported:function(){return!0},play:function(a){a?(Recite.PlayerDispatcher.dispatch(a),c(a)):null===j?Recite.PlayerControls.next():Recite.PlayerDispatcher.dispatch(j)},
stop:function(){Recite.Player.stop()},next:function(a){"undefined"!=typeof a&&(j=a);a=Recite.Dom.getNextElement(j);a===j||null===a?Recite.Debug.log("Recite.PlayerControls.Fixed","next element same as current or null, halting"):(c(a),Recite.Dom.isVisible(a)||Recite.Dom.scrollTo(a))},previous:function(a){"undefined"!=typeof a&&(j=a);a=Recite.Dom.getPreviousElement(j);a===j||null===a?Recite.Debug.log("Recite.PlayerControls.Fixed","prev element same as current or null, halting"):(c(a),Recite.Dom.isVisible(a)||
Recite.Dom.scrollTo(a))},first:function(){var a=Recite.Dom.getFirstElement();if(null!=a)c(a);else return Recite.Debug.log("Recite.PlayerControls.Fixed","no first element, halting"),null;Recite.Dom.isVisible(a)||Recite.Dom.scrollTo(a)},last:function(){var a=Recite.Dom.getLastElement();if(null!=a)c(a);else return Recite.Debug.log("Recite.PlayerControls.Fixed","no last element, halting"),null;Recite.Dom.isVisible(a)||Recite.Dom.scrollTo(a)},current:j}}();Recite.namespace("PlayerControls.NoGUI");
Recite.PlayerControls.NoGUI=function(){function e(a){null!==a&&(null!==b&&null!=b.getAttribute("class")&&b.setAttribute("class",b.getAttribute("class").replace("recite-selected","")),b=a,b.setAttribute("class",b.getAttribute("class")+" recite-selected"),Recite.Preferences.get("player.autoplay")&&Recite.PlayerControls.NoGUI.play())}function h(){if(c){clearTimeout(d.timeout);var a=this;b!==this&&(d.timeout=setTimeout(function(){e(a)},d.intent))}}var d={timeout:null,dimensions:{height:0}},c=!0,b=null,
a=!1;return{init:function(){a||(Recite.Event.subscribe("Style:updated",Recite.PlayerControls.Tooltip.invalidate),a=!0)},destroy:function(){a=!1},enable:function(){c=!0},disable:function(){c=!1},hide:function(){null!==b&&(null!=b.getAttribute("class")&&b.setAttribute("class",b.getAttribute("class").replace("recite-selected","")),Recite.Event.publish("Recite.Tooltip:hide",{target:b}));b=null},setOptions:function(a){d=Recite.Util.merge(d,a)},getOptions:function(){return d},invoke:function(a){this.init();
Recite.Debug.log("Recite.PlayerControls.NoGUI","Invoking NoGUI controls.");Recite.DomEvent.add(a,"mouseover",h);Recite.DomEvent.add(a,"mouseout",function(){clearTimeout(d.timeout)})},invalidate:function(){},play:function(a){a?(Recite.PlayerDispatcher.dispatch(a),e(a)):null===b?Recite.PlayerControls.next():Recite.PlayerDispatcher.dispatch(b)},stop:function(){Recite.Player.stop()},seekingSupported:function(){return!0},next:function(a){"undefined"!=typeof a&&(b=a);a=Recite.Dom.getNextElement(b);a===
b||null===a?Recite.Debug.log("Recite.PlayerControls.NoGUI","next element same as current or null, halting"):e(a)},previous:function(a){"undefined"!=typeof a&&(b=a);a=Recite.Dom.getPreviousElement(b);a===b||null===a?Recite.Debug.log("Recite.PlayerControls.NoGUI","prev element same as current or null, halting"):e(a)},first:function(){var a=Recite.Dom.getFirstElement();if(null!=a)e(a);else return Recite.Debug.log("Recite.PlayerControls.NoGUI","no first element, halting"),null},last:function(){var a=
Recite.Dom.getLastElement();if(null!=a)e(a);else return Recite.Debug.log("Recite.PlayerControls.NoGUI","no last element, halting"),null},current:b}}();Recite.namespace("PlayerControls.MobileControls");
Recite.PlayerControls.MobileControls=function(){function e(){n=Recite.Event.subscribe("Style:updated",Recite.PlayerControls.Tooltip.invalidate);for(var a=[window],b=0;b<a.length;b++)Recite.DomEvent.add(a[b],"resize",t),Recite.DomEvent.add(a[b],"scroll",s),Recite.DomEvent.add(a[b],"click",u)}function h(){Recite.Event.unsubscribe(n);Recite.Util.each([window],function(a,b){Recite.DomEvent.remove(b,"resize",t);Recite.DomEvent.remove(b,"scroll",s);Recite.DomEvent.remove(b,"click",u)})}function d(){if(k)if(p)p=
!1;else{Recite.Player.prepare();clearTimeout(i.timeout);var a=this;l!==this&&(i.timeout=setTimeout(function(){c(a)},i.intent))}}function c(a){null!==l&&null!=l.getAttribute("class")&&l.setAttribute("class",l.getAttribute("class").replace("recite-selected",""));l=a;g(a);Recite.Preferences.get("player.autoplay")&&(Recite.Debug.log("Recite.MobileControls","Playing audio..."),Recite.PlayerDispatcher.dispatch(l));l.setAttribute("class",l.getAttribute("class")+" recite-selected")}function b(a){a.style.display=
"none";null!==l&&null!=l.getAttribute("class")&&l.setAttribute("class",l.getAttribute("class").replace("recite-selected",""));Recite.Sizzle("body",document)[0].style.paddingBottom="0px";l=null}function a(){j.getElementById("recite-play").setAttribute("class","recite-sprite-mobile-play")}function f(){j.getElementById("recite-play").setAttribute("class","recite-sprite-mobile-stop")}function g(){var b;b=Recite.Sizzle("#recite-tooltip",j)[0];if("undefined"===typeof b){Recite.Debug.log("Recite.PlayerControls.MobileControls",
"Adding mobile controls to document");b=j.createElement("div");b.setAttribute("class","recite-tooltip-mobile");b.setAttribute("id","recite-tooltip");b.style.position="absolute";b.innerHTML='<div class="recite-tooltip-content">'+i.content+'</div>               <div class="recite-tip-bottomleft" id="recite-tip"></div>';Recite.Sizzle("body",j)[0].appendChild(b);Recite.Debug.log("Recite.PlayerControls.MobileControls","Binding buttons for mobile controls");var c=j.getElementById("recite-play");Recite.DomEvent.add(c,
"click",function(){j.getElementById("recite-play");q?(a(),Recite.Player.stop(),q=!1):(f(),Recite.PlayerDispatcher.dispatch(l),q=!0)});c=j.getElementById("recite-back");Recite.DomEvent.add(c,"click",function(){Recite.PlayerControls.Mobile.previous()});c=j.getElementById("recite-forward");Recite.DomEvent.add(c,"click",function(){Recite.PlayerControls.next()});m.push(b)}Recite.Debug.log("Recite.PlayerControls.MobileControls","Mobile controls added to document: "+b);b.style.display="block";b.style.position=
"mobile";for(c=0;c<m.length;c++)m[c]!==b&&(m[c].style.display="none");Recite.Sizzle("body",document)[0].style.paddingBottom=i.dimensions.height+"px"}var i={dimensions:{height:58},intent:500,timeout:null,content:'<a id="recite-back" class="recite-sprite-mobile-previous" onclick="Recite.PlayerControls.previous();"></a>                   <a id="recite-play" class="recite-sprite-mobile-play"></a>                   <a id="recite-forward" class="recite-sprite-mobile-next" onclick="Recite.PlayerControls.next();"></a>'},
k=!0,j,m=[],l=null,p=!1,v=!1,n=null,q=!1,s,t;s=t=function(){l&&g(l)};var u=function(a){Recite.Util.each(m,function(c,d){!Recite.Dom.isDescendant(a.target,d)&&(a.target!==d&&!Recite.Dom.isDescendant(a.target,l)&&a.target!==l&&!Recite.Dom.isDescendant(a.target,Recite.Sizzle("#recite-header")[0]))&&b(d)})};return{init:function(){v||(e(),v=!0)},destroy:function(){h();v=!1},enable:function(){k||e();k=!0},disable:function(){k&&h();k=!1},hide:function(){Recite.Util.each(m,function(a,c){b(c)})},setOptions:function(a){i=
Recite.Util.merge(i,a)},getOptions:function(){return i},invoke:function(b){Recite.Debug.log("Recite.Tooltop.Desktop","Invoking mobile playerControls");j=b.ownerDocument?b.ownerDocument:document;Recite.DomEvent.add(b,"touchmove",function(){p=!0});Recite.DomEvent.add(b,"click",d);Recite.Event.subscribe("Audio:started",function(){q=!0;f()});Recite.Event.subscribe("Audio:ended",function(){a()});Recite.event},invalidate:function(){l&&g(l)},seekingSupported:function(){return!0},play:function(a){a?(Recite.PlayerDispatcher.dispatch(a),
c(a)):null===l?Recite.PlayerControls.next():Recite.PlayerDispatcher.dispatch(l)},stop:function(){Recite.Player.stop()},next:function(a){"undefined"!=typeof a&&(l=a);a=Recite.Dom.getNextElement(l);a===l||null===a?Recite.Debug.log("Recite.PlayerControls.MobileControls","next element same as current or null, halting"):(c(a),Recite.Dom.isVisible(a)||Recite.Dom.scrollTo(a))},previous:function(a){"undefined"!=typeof a&&(l=a);a=Recite.Dom.getPreviousElement(l);a===l||null===a?Recite.Debug.log("Recite.PlayerControls.MobileControls",
"prev element same as current or null, halting"):(c(a),Recite.Dom.isVisible(a)||Recite.Dom.scrollTo(a))},first:function(){var a=Recite.Dom.getFirstElement();if(null!=a)c(a);else return Recite.Debug.log("Recite.PlayerControls.MobileControls","no first element, halting"),null;Recite.Dom.isVisible(a)||Recite.Dom.scrollTo(a)},last:function(){var a=Recite.Dom.getLastElement();if(null!=a)c(a);else return Recite.Debug.log("Recite.PlayerControls.MobileControls","no last element, halting"),null;Recite.Dom.isVisible(a)||
Recite.Dom.scrollTo(a)},current:l}}();Recite.namespace("PlayerDispatcher");
Recite.PlayerDispatcher=function(){function e(b){if("undefined"==typeof b)return"";var a=Recite.Dom.getText(b);Recite.Util.each(d.readElements,function(c,d){b.tagName===c&&""!==a&&(a=d+". "+a)});return a}function h(b,a){var d=null,g=null;"string"===typeof b?d=b:(d=e(b),g=b.getAttribute("data-recite-voice")||null);try{if(d&&0<d.length&&(Recite.Player.play(d,a,g),Recite.getOptions().autoCache&&"string"!==typeof b)){var i=Recite.Dom.getNextElement(b,!0);i!==b&&null!=i&&setTimeout(function(){c===b&&Recite.Player.cache(e(i),
a,g)},500)}}catch(h){if(h instanceof Recite.Player.PlayerException)switch(h.code){case 400:Recite.Gui.Notification.show("This language is not supported by Recite",{play:!0})}}}var d={readElements:{A:"Link",IMG:"Image"}},c=null;return{setOptions:function(b){d=Recite.Util.merge(d,b)},dispatch:function(b){(null===Recite.Player.getPlayer()||Recite.Player.getPlayer().getOptions().prepareAudio)&&Recite.Player.prepare();var a=null,d=null;"string"===typeof b?a=b:(d=Recite.Dom.getLanguage(b),c=b,a=Recite.Dom.getText(b));
var g=Recite.Player.getOptions().languageDetection;2===g||null===d&&1<=g?d=Recite.Dom.detectLanguage(a,function(a){"und"===a&&(a=null);h(b,a)}):h(b,d)}}}();Recite.namespace("Player");
Recite.Player=function(){function e(){if(c)return c;Recite.Audio.HTML5.support()?(Recite.Debug.log("Recite.Player","HTML5 Audio support detected, using Recite.Audio.HTML5 as backend."),Recite.Audio.HTML5.init(),c=Recite.Audio.HTML5):Recite.Audio.SoundManager.support()?(Recite.Debug.log("Recite.Player","HTML5 Audio not supported, using Recite.Audio.SoundManager as backend."),Recite.Audio.SoundManager.init(),c=Recite.Audio.SoundManager):alert("Sorry, Recite requires either an HTML5 compatible browser or Flash support. Please upgrade your browser or install Flash to use Recite.");
return c}function h(a,f,g,i,h){f=f||b.language;g=g||null;if(!Recite.Player.languageSupported(f))throw Recite.Debug.log("Recite.Player","Language not supported:"+f),new Recite.Player.PlayerException(400,"Unsupported Language");var j=e().format(),m={q:a,f:j};if(null!==f){m.l=f;var g=d(f)||g,l=Recite.Preferences.get("voices");"undefined"!==typeof l[f]&&(null!=l[f]&&null===d(f))&&(g=l[f]);null!==g&&(m.vo=g)}Recite.Debug.log("Recite.Player","Audio request: "+a);0>a.length&&!i.cache?(Recite.Debug.log("Recite.Player",
"GET Request"),Recite.Api.getUri("tts",{authRequired:!0,data:m,success:function(a){Recite.Debug.log("Recite.Player","Request url: "+a);h&&h(a)}})):(Recite.Debug.log("Recite.Player","POST Request"),c.getOptions().playlist||(m.playlist=!1),c.getOptions().waitForAudioProcessing&&(m.waitForProcessing=!0),Recite.Api.call("tts","POST",{data:m,contentType:"application/json; charset=UTF-8",success:function(a){var b=a.data;Recite.Auth.getStatus(function(a){i.cache&&h.call();var c=[];Recite.Debug.log("Recite.Player",
"POST Callback");void 0!==b.id?(Recite.Debug.log("Recite.Player","Playing single file"),c.push(Recite.baseUrl+"/api/tts/"+b.id+"?f="+j+"&access_token="+a.access_token)):(Recite.Debug.log("Recite.Player","Playing multiple files - create a playlist"),Recite.Util.each(b,function(b,d){Recite.Debug.log("Recite.Player","Adding to playlist: "+d.id);c.push(Recite.baseUrl+"/api/tts/"+d.id+"?f="+j+"&access_token="+a.access_token);Recite.Debug.log("Recite.Player","Added to playlist: "+d.id)}));h&&(Recite.Debug.log("Recite.Player",
"Calling callback with playlist"),h(c))})}}));Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Player",event:"play ("+f+")"})}function d(a){return"undefined"!==typeof b.voices[a]?b.voices[a]:null}var c=null,b={language:null,voices:{},languages:["cy","cy-gb","en","en-gb","en-us","en-in","en-au","fr","fr-ca","cn","da","nl","de","hi","is","it","ja","ko","no","pl","pt-br","pt","ro","ru","es","es-mx","es-us","sv","tr","cy","cy-gb","en","en-gb","en-us","en-in","en-au","fr","fr-ca","cn","da","nl","de","hi","is","it","ja","ko","no","pl","pt-br","pt","ro","ru","es","es-mx","es-us","sv","tr","cy","cy-gb","en","en-gb","en-us","en-in","en-au","fr","fr-ca","cn","da","nl","de","hi","is","it","ja","ko","no","pl","pt-br","pt","ro","ru","es","es-mx","es-us","sv","tr","en","EN-US","en-us","en-gb","en-sc","en-au","ar-ae","ar","tr","it","ko","zh-CN","zh-TW","th","ja","id","eu","ca","cs","da","nl","fi","fr","fr-fr","de","el","hi","hu","no","pl","pt","ro","ru","sk","es","sv","gl","iw","en","EN-US","en-us","en-gb","en-sc","en-au","ar-ae","ar","tr","it","ko","zh-CN","zh-TW","th","ja","id","eu","ca","cs","da","nl","fi","fr","fr-fr","de","el","hi","hu","no","pl","pt","ro","ru","sk","es","sv","gl","iw","en","EN-US","en-us","en-gb","en-sc","en-au","ar-ae","ar","tr","it","ko","zh-CN","zh-TW","th","ja","id","eu","ca","cs","da","nl","fi","fr","fr-fr","de","el","hi","hu","no","pl","pt","ro","ru","sk","es","sv","gl","iw","en","EN-US","en-us","en-gb","en-sc","en-au","ar-ae","ar","tr","it","ko","zh-CN","zh-TW","th","ja","id","eu","ca","cs","da","nl","fi","fr","fr-fr","de","el","hi","hu","no","pl","pt","ro","ru","sk","es","sv","gl","iw","en","EN-US","en-us","en-gb","en-sc","en-au","ar-ae","ar","tr","it","ko","zh-CN","zh-TW","th","ja","id","eu","ca","cs","da","nl","fi","fr","fr-fr","de","el","hi","hu","no","pl","pt","ro","ru","sk","es","sv","gl","iw","en","EN-US","en-us","en-gb","en-sc","en-au","ar-ae","ar","tr","it","ko","zh-CN","zh-TW","th","ja","id","eu","ca","cs","da","nl","fi","fr","fr-fr","de","el","hi","hu","no","pl","pt","ro","ru","sk","es","sv","gl","iw","en","EN-US","en-us","en-gb","en-sc","en-au","ar-ae","ar","tr","it","ko","zh-CN","zh-TW","th","ja","id","eu","ca","cs","da","nl","fi","fr","fr-fr","de","el","hi","hu","no","pl","pt","ro","ru","sk","es","sv","gl","iw","en","EN-US","en-us","en-gb","en-sc","en-au","ar-ae","ar","tr","it","ko","zh-CN","zh-TW","th","ja","id","eu","ca","cs","da","nl","fi","fr","fr-fr","de","el","hi","hu","no","pl","pt","ro","ru","sk","es","sv","gl","iw","en","EN-US","en-us","en-gb","en-sc","en-au","ar-ae","ar","tr","it","ko","zh-CN","zh-TW","th","ja","id","eu","ca","cs","da","nl","fi","fr","fr-fr","de","el","hi","hu","no","pl","pt","ro","ru","sk","es","sv","gl","iw","en","EN-US","en-us","en-gb","en-sc","en-au","ar-ae","ar","tr","it","ko","zh-CN","zh-TW","th","ja","id","eu","ca","cs","da","nl","fi","fr","fr-fr","de","el","hi","hu","no","pl","pt","ro","ru","sk","es","sv","gl","iw","en","EN-US","en-us","en-gb","en-sc","en-au","ar-ae","ar","tr","it","ko","zh-CN","zh-TW","th","ja","id","eu","ca","cs","da","nl","fi","fr","fr-fr","de","el","hi","hu","no","pl","pt","ro","ru","sk","es","sv","gl","iw","en","EN-US","en-us","en-gb","en-sc","en-au","ar-ae","ar","tr","it","ko","zh-CN","zh-TW","th","ja","id","eu","ca","cs","da","nl","fi","fr","fr-fr","de","el","hi","hu","no","pl","pt","ro","ru","sk","es","sv","gl","iw","en","EN-US","en-us","en-gb","en-sc","en-au","ar-ae","ar","tr","it","ko","zh-CN","zh-TW","th","ja","id","eu","ca","cs","da","nl","fi","fr","fr-fr","de","el","hi","hu","no","pl","pt","ro","ru","sk","es","sv","gl","iw","en","EN-US","en-us","en-gb","en-sc","en-au","ar-ae","ar","tr","it","ko","zh-CN","zh-TW","th","ja","id","eu","ca","cs","da","nl","fi","fr","fr-fr","de","el","hi","hu","no","pl","pt","ro","ru","sk","es","sv","gl","iw","en","EN-US","en-us","en-gb","en-sc","en-au","ar-ae","ar","tr","it","ko","zh-CN","zh-TW","th","ja","id","eu","ca","cs","da","nl","fi","fr","fr-fr","de","el","hi","hu","no","pl","pt","ro","ru","sk","es","sv","gl","iw","cy","cy-gb","en","en-gb","en-us","en-in","en-au","fr","fr-ca","cn","da","nl","de","hi","is","it","ja","ko","no","pl","pt-br","pt","ro","ru","es","es-mx","es-us","sv","tr","cy","cy-gb"],languageDetection:1};Recite.Event.subscribe("Audio:ended",function(){Recite.Debug.log("Recite.Player","-------\>Audio ended")});return{setOptions:function(a){b=Recite.Util.merge(b,a)},getOptions:function(){return b},init:function(){if(null===
b.language){var a=document.documentElement.lang;0<a.length&&this.setOptions({language:a})}},prepare:function(){e().getOptions().prepareAudio&&(Recite.Debug.log("Recite.Player","--------------------\> Preloading audio..."),e().play(Recite.baseUrl+"/audio/blank.mp3"))},play:function(a,b,c){e().getOptions().playlist&&e().clearPlaylist();h(a,b,c,{},function(a){Recite.Debug.log("Recite.Player","In callback");1==a.length?(Recite.Debug.log("Recite.Player","Queue length == 1 ... "+a[0]),e().play(a[0])):(Recite.Debug.log("Recite.Player",
"Queue length = "+a.length),Recite.Util.each(a,function(a,b){Recite.Debug.log("Recite.Player","Adding URL to playlist: "+b);e().addToPlaylist(b)}),Recite.Debug.log("Recite.Player","Play the playlist"),e().playPlaylist(),Recite.Debug.log("Recite.Player","Finished invoking play"))})},pause:function(){e().pause()},restart:function(){e().restart()},resume:function(){e().resume()},cache:function(a,b,c){h(a,b,c,{cache:!0},function(){Recite.Debug.log("Recite.Player","Cached audio for: "+a)})},stop:function(){e().stop()},
rewind:function(){e().rewind()},forward:function(){e().forward()},setPlayer:function(a){c=a},getPlayer:function(){return c},getSupportedLanguauges:function(){return b.languages},languageSupported:function(a){return-1<Recite.Util.inArray(a,b.languages)||null===a}}}();Recite.Player.PlayerException=function(e,h){this.code=e;this.message=h};Recite.namespace("Audio.WebAudio");
Recite.Audio.WebAudio=function(){function e(){Recite.Player.getPlayer().play(d[0]);d.splice(0,1)}var h="",d=[],c=null,b=null,a={prepareAudio:!0,playlist:!0,waitForAudioProcessing:!1};return{setOptions:function(b){a=Recite.Util.merge(a,b)},init:function(){Recite.Debug.log("Recite.Audio.WebAudio","Init");h=Recite.Audio.WebAudio.support();Recite.Debug.log("Recite.Audio.WebAudio","Preferred format detected as:"+h);Recite.Debug.log("Recite.Audio.WebAudio",h)},play:function(a){Recite.Debug.log("Recite.Audio.WebAudio",
"Webaudio play called!");var g=new XMLHttpRequest;g.open("GET",a,!0);g.responseType="arraybuffer";g.onload=function(){Recite.Debug.log("Recite.Audio.WebAudio","ONLOAD CALLED!");b.decodeAudioData(g.response,function(a){Recite.Debug.log("Recite.Audio.WebAudio","PLAY SOUND CALLED!");null!=c&&Recite.Audio.WebAudio.stop();Recite.Event.publish("Audio:started");c=b.createBufferSource();c.buffer=a;c.connect(b.destination);c.start(0);c.onended=function(){0<d.length?(Recite.Event.publish("Audio:playlist-item-ended"),
e()):Recite.Preferences.get("player.continuePlay")?Recite.PlayerControls.next():Recite.Event.publish("Audio:ended")}})};g.send()},stop:function(){null!=c&&(c.onended=null,c.stop(0),Recite.Event.publish("Audio:ended"))},rewind:function(){},forward:function(){},support:function(){try{var a=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.oAudioContext||window.msAudioContext;return AudioContext?(window.AudioContext=a,b=new a,!0):!1}catch(c){return!1}},format:function(){return"mp3"},
getOptions:function(){return a},getPlaylistState:function(){return _playlistPlaying},addToPlaylist:function(a){d.push(a);return d},clearPlaylist:function(){return d=[]},playPlaylist:function(){e()}}}();Recite.namespace("Audio.HTML5");
Recite.Audio.HTML5=function(){function e(){var a=b[0];b.splice(0,1);Recite.Player.getPlayer().play(a)}function h(){Recite.Debug.log("Recite.Audio.HTML5","Moving onto next playlist item");Recite.Preferences.get("player.continuePlay")&&0>=b.length?Recite.PlayerControls.next():(Recite.Debug.log("Recite.Audio.HTML5","Playlist length: "+b.length),Recite.Event.publish("Audio:playlist-item-ended"))}var d=null,c="",b=[],a={prepareAudio:!0,playlist:!0,waitForAudioProcessing:!1};return{setOptions:function(b){a=
Recite.Util.merge(a,b)},init:function(){Recite.Event.subscribe("Audio:playlist-item-ended",function(){0<b.length?e():Recite.Event.publish("Audio:ended")});null==d&&(Recite.Debug.log("Recite.Audio.HTML5","Init"),d=document.createElement("audio"),c=Recite.Audio.HTML5.format(),d.addEventListener("ended",function(){h()},!1),d.addEventListener("error",function(){Recite.Debug.log("Recite.Audio.HTML5","Audio failed");h()},!1),d.addEventListener("canplay",function(){Recite.Debug.log("Recite.Audio.HTML5",
"Can play");d.play()},!1),Recite.Debug.log("Recite.Audio.HTML5","Preferred format detected as:"+c),Recite.Debug.log("Recite.Audio.Html5",c))},play:function(a){Recite.Event.publish("Audio:started");d.setAttribute("src",a);d.load();Recite.Debug.log("Recite.Audio.HTML5","PLAY CALLED..."+a)},pause:function(){d.pause();Recite.Event.publish("Audio:paused")},resume:function(){d.play();Recite.Event.publish("Audio:started")},restart:function(){d.currentTime=0;d.load();d.play()},stop:function(){Recite.Debug.log("Recite.Audio.HTML5",
"STOP CALLED...");d.pause();b=[];Recite.Event.publish("Audio:ended")},rewind:function(){d.currentTime-=1},forward:function(){d.currentTime+=2},support:function(){var a=document.createElement("audio"),b=!!a.canPlayType;b&&(b=new Boolean(b),b.ogg=a.canPlayType('audio/ogg; codecs="vorbis"'),b.mp3=a.canPlayType("audio/mpeg;"),b.wav=a.canPlayType('audio/wav; codecs="1"'),b.m4a=a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;"));return b},format:function(){var a=Recite.Audio.HTML5.support();return a.ogg?
"ogg":a.mp3?"mp3":a.wav?"wav":a.m4a?"m4a":!1},getOptions:function(){return a},getPlaylistState:function(){return _playlistPlaying},addToPlaylist:function(a){b.push(a);return b},clearPlaylist:function(){Recite.Debug.log("Recite.Audio.HTML5","CLEAR PLAYLIST CALLED...");return b=[]},playPlaylist:function(){e()}}}();Recite.namespace("Audio.SoundManager");
Recite.Audio.SoundManager=function(){function e(){Recite.Player.getPlayer().play(d[0]);d.splice(0,1)}var h=null,d=[],c={path:Recite.baseUrl+"/common/js/soundmanager/soundmanager2-jsmin.js",soundmanager:{debugMode:!1,debug:!1,url:Recite.baseUrl+"/common/swf/"},prepareAudio:!0,playlist:!0,waitForAudioProcessing:!1};return{setOptions:function(b){c=Recite.Util.merge(c,b)},init:function(){Recite.Debug.log("Recite.Audio.SoundManager","Init soundmanager");Recite.Event.subscribe("Audio:ended",function(){Recite.Preferences.get("player.continuePlay")&&
Recite.PlayerControls.next()});Recite.Event.subscribe("Audio:playlist-item-ended",function(){0<d.length?e():Recite.Event.publish("Audio:ended")})},play:function(b){Recite.Debug.log("Recite.Audio.SoundManager","Play called");window.soundManager?((h=soundManager.getSoundById(b))||(h=soundManager.createSound({id:b,url:b})),soundManager.stopAll(),h.play({onload:function(a){a||(Recite.Debug.log("Recite.Audio.SoundManager","Cannot load audio file"),Recite.Event.publish("Audio:playlist-item-ended"))},onfinish:function(){Recite.Debug.log("Recite.Audio.SoundManager",
"Onfinish called");Recite.Event.publish("Audio:playlist-item-ended")},ondataerror:function(){Recite.Debug.log("Sound manager --- > Item failed: "+b);Recite.Event.publish("Audio:playlist-item-ended")}})):Recite.AssetLoader.js(c.path,function(){window.soundManager=new SoundManager;Recite.Util.each(c.soundmanager,function(a,b){soundManager[a]=b});soundManager.beginDelayedInit();soundManager.stopAll();soundManager.onready(function(){h=soundManager.createSound({id:b,url:b}).play({onload:function(a){a||
(Recite.Debug.log("Recite.Audio.SoundManager","Cannot load audio file"),Recite.Event.publish("Audio:playlist-item-ended"))},onfinish:function(){Recite.Debug.log("Recite.Audio.SoundManager","Onfinish called");Recite.Event.publish("Audio:playlist-item-ended")},ondataerror:function(){Recite.Debug.log("Sound manager --- > Item failed: "+b);Recite.Event.publish("Audio:playlist-item-ended")}})})});Recite.Event.publish("Audio:started")},preload:function(b){Recite.Audio.SoundManager.play(b)},pause:function(){h.pause();
Recite.Event.publish("Audio:paused")},resume:function(){h.resume();Recite.Event.publish("Audio:started")},restart:function(){h&&(Recite.Debug.log("Recite.Audio.Soundmanager","Restarting track"),h.setPosition(0))},stop:function(){h&&h.stop();Recite.Event.publish("Audio:ended")},rewind:function(){h&&(Recite.Debug.log("Recite.Audio.Soundmanager","Skiping backwards"),h.setPosition(h.position-500))},forward:function(){h?(Recite.Debug.log("Recite.Sudio.Soundmanager","Skiping forward"),h.setPosition(h.position+
500)):Recite.Debug.log("Recite.Sudio.Soundmanager","No sound object!?")},support:function(){return!0},format:function(){return"mp3"},addToPlaylist:function(b){d.push(b);return d},clearPlaylist:function(){return d=[]},playPlaylist:function(){e()},getOptions:function(){return c}}}();Recite.namespace("Audio.Download");
Recite.Audio.Download=function(){var e={prepareAudio:!1,playlist:!1,waitForAudioProcessing:!0};return{setOptions:function(h){e=Recite.Util.merge(e,h)},init:function(){},play:function(e){Recite.Player.setPlayer(null);Recite.Debug.log("Recite.Audio.Download","PLAY");window.location.href=e+"&download=true"},stop:function(){},rewind:function(){},forward:function(){},support:function(){return!0},format:function(){return"mp3"},getOptions:function(){return e}}}();Recite.namespace("Style");
Recite.Style=function(){function e(){var b="",a=Recite.Preferences.get("style"),d=Recite.Preferences.get("textMode.enabled");null!==a.marginSize&&d&&(b+="#recite-wrapper, #recite-dictionary * { padding: 0 "+a.marginSize+"; } body { padding-left: 0 !important; padding-right: 0 !important; margin-left: 0 !important; margin-right: 0 !important; } ",a.marginSize!==c.marginSize&&(c.marginSize=a.marginSize,Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Style",event:"margin: "+a.marginSize})));
null!==a.textAlign&&d&&(b+="#recite-wrapper, #recite-dictionary * { text-align: "+a.textAlign+"; }",a.textAlign!==c.textAlign&&(c.textAlign=a.textAlign,Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Style",event:"textAlign: "+a.textAlign})));a.font&&null!==a.font.face&&(b+="#recite-wrapper, #recite-wrapper *, #recite-dictionary * { font-family: "+a.font.face+" !important; }",a.font.face!==c.font.face&&(c.font.face=a.font.face,Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Style",
event:"font-family: "+a.font.face})));a.font&&null!==a.font.size&&(b+=".recite-ele, #recite-dictionary * { font-size: "+a.font.size+"% !important; } ",a.font.size!==c.font.size&&(c.font.size=a.font.size,Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Style",event:"font-size: "+a.font.size+"%"})));a.font&&null!==a.font.color&&(b+="#recite-wrapper, #recite-wrapper *, #recite-dictionary * { color: "+a.font.color+" !important; text-shadow: none !important; }",b+="*::-webkit-input-placeholder { color: "+
a.font.color+" !important; }",b+="*:-moz-placeholder { color: "+a.font.color+" !important; }",b+="*::-moz-placeholder { color: "+a.font.color+" !important; }",b+="*::-ms-input-placeholder { color: "+a.font.color+" !important; }",b+="input:not(.recite-colorpicker) { color: "+a.font.color+" !important; }",b+="textarea { color: "+a.font.color+" !important; }",b+="select { color: "+a.font.color+" !important; }",b+="button { color: "+a.font.color+" !important; }",a.font.color!==c.font.color&&(c.font.color=
a.font.color,Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Style",event:"font-colour: "+a.font.color})));a.link&&null!==a.link.color&&(b+="#recite-wrapper a { color: "+a.link.color+" !important; } ",a.link.color!==c.link.color&&(c.link.color=a.link.color,Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Style",event:"link-colour: "+a.link.color})));null!==a.backgroundColor&&(b+="#recite-wrapper *:not(.recite-ignore-styles-background), #recite-dictionary, #recite-dictionary * { background: "+
a.backgroundColor+" !important; box-shadow: none !important; }",b+="body, html, #recite-wrapper { background: "+a.backgroundColor+" !important; }",b+="input:not(.recite-colorpicker) { background: "+a.backgroundColor+" !important; }",b+="textarea { background: "+a.backgroundColor+" !important; }",b+="select { background: "+a.backgroundColor+" !important; }",b+="button:not(#recite-header button) { background: "+a.backgroundColor+" !important; }",a.backgroundColor!==c.backgroundColor&&(c.backgroundColor=
a.backgroundColor,Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Style",event:"background-colour: "+a.backgroundColor})));a.ruler&&null!==a.ruler.color&&a.ruler.color!==c.ruler.color&&(c.ruler.color=a.ruler.color,Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Style",event:"ruler-colour: "+a.ruler.color}));a.screenMask&&null!==a.screenMask.color&&a.screenMask.color!==c.screenMask.color&&(c.screenMask.color=a.screenMask.color,Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Style",
event:"screenMask-colour: "+a.screenMask.color}));if(null!==a.zoom&&void 0!==a.zoom){var d=parseInt(a.zoom),g=d/100,b=b+("#recite-wrapper {  -moz-transform: scale( "+g+" , "+g+" ); /* Moz-browsers */  zoom: "+g+"; /* Other non-webkit browsers */  zoom: "+d+"%; /* Webkit browsers*/ } ");a.zoom!==c.zoom&&(c.zoom=a.zoom,Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Style",event:"zoom: "+a.zoom}))}null!==a.lineHeight&&(b+=".recite-ele, #recite-dictionary * { line-height: "+a.lineHeight+"% !important; } ",
a.lineHeight!==c.lineHeight&&(c.lineHeight=a.lineHeight,Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Style",event:"line-height: "+a.lineHeight+"%"})));null!==a.charSpacing&&(b+=".recite-ele, #recite-dictionary * { letter-spacing: "+a.charSpacing+"px !important; } ",a.charSpacing!==c.charSpacing&&(c.charSpacing=a.charSpacing,Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Style",event:"character-spacing: "+a.charSpacing+"px"})));return b}function h(){var b;b=window.document;var a=
Recite.Sizzle("style[id=recite-style]");0===a.length?(a=b.createElement("style"),a.type="text/css",a.id="recite-style",a.setAttribute("data-recite-skip","true"),Recite.Sizzle("head",b)[0].appendChild(a)):a=a[0];b=a;if(b.styleSheet)b.styleSheet.cssText=e();else{for(a=window.document.createTextNode(e());b.hasChildNodes();)b.removeChild(b.lastChild);b.appendChild(a)}Recite.Event.publish("Style:updated",{origin:"Recite.Style"})}var d={preserve_background_images:!1},c={marginSize:null,font:{color:null,
face:null,size:null},backgroundColor:null,link:{color:null},ruler:{color:null},screenMask:{color:null,opacity:1},zoom:null,lineHeight:null,charSpacing:null};Recite.Event.subscribe("Preferences:load",function(){h()});Recite.Event.subscribe("Preferences:set",function(){h()});Recite.Event.subscribe("Preferences:reset",function(){h()});Recite.Event.subscribe("Recite:enable",function(){var b=Recite.Sizzle("body > *",document),a=Recite.Sizzle("body",document)[0];Recite.Debug.log("Recite.Style","Wrapping body elements in a recite-wrapper.");
var c=document.createElement("div");c.id="recite-wrapper";Recite.Util.each(b,function(a,b){"true"!==b.getAttribute("data-recite-skipwrap")&&(b.parentNode.removeChild(b),c.appendChild(b))});a.appendChild(c);Recite.Event.publish("Recite:Style:wrappedElements")});return{setOptions:function(b){d=Recite.Util.merge(d,b)},getOptions:function(){return d},update:h}}();Recite.namespace("Ruler");
Recite.Ruler=function(){function e(){Recite.Preferences.get("style.ruler.enabled")?Recite.Ruler.enable():Recite.Ruler.disable();c()}function h(a){var c=Recite.Sizzle("#recite-ruler",a);if(0==c.length){var f=Recite.Sizzle("body",a)[0],c=a.createElement("div");c.id="recite-ruler";c.style.backgroundColor=d();c.style.opacity=b.opacity;f.appendChild(c)}else c=c[0];return c}function d(){var a=Recite.Preferences.get("style.ruler.color");if(null==a||"null"==a||""==a.trim())a=b.backgroundColor;return a}function c(c){if(b.enabled&&
!a){clearTimeout(b.timeout);Recite.Util.unSetIFramePointerEvents();b.timeout=setTimeout(function(){Recite.Util.reSetIFramePointerEvents()},b.intent);var f=h(document);switch(b.mode){case "bottom":void 0!=c&&(f.style.bottom=0,f.style.top=c.screenY+b.modes.bottom.yOffset+"px");break;case "top":void 0!=c&&(f.style.top=0,f.style.height=c.screenY+b.modes.top.yOffset+"px");break;case "bar":void 0!=c&&(f.style.bottom="auto",f.style.top=c.screenY+b.modes.bar.yOffset+"px"),f.style.height=b.modes.bar.height+
"px"}f.style.backgroundColor=d();f.style.opacity=b.opacity}}var b={enabled:!1,mode:"bar",backgroundColor:"#000",opacity:1,modes:{top:{yOffset:-80},bottom:{yOffset:-80},bar:{yOffset:-80,height:160}},timeout:null,intent:200},a=!1,f=null;Recite.Event.subscribe("Preferences:load",e);Recite.Event.subscribe("Preferences:set",e);Recite.Event.subscribe("Preferences:reset",e);return{setOptions:function(a){b=Recite.Util.merge(b,a)},enable:function(){if(Recite.Browser.isMobile())Recite.Debug.log("Recite.Ruler",
"Preventing load as feature not supported on mobile"),Recite.Gui.Notification.show("This feature is not available on your platform.",{read:!1});else if(!a&&!b.enabled){Recite.Debug.log("Recite.Ruler","Enabled ruler");Recite.PlayerControls.disable();Recite.Player.stop();Recite.ScreenMask.disable();Recite.Magnifier.disable();var d=Recite.Sizzle("body",document)[0];h(document);if(null==f){var e=Recite.Sizzle("iframe");f=[];Recite.Util.each(e,function(a,b){f.push({frame:b,state:void 0==b.style.pointerEvents?
"all":b.style.pointerEvents})})}Recite.Util.unSetIFramePointerEvents();Recite.DomEvent.add(d,"mousemove",c);b.enabled=!0;Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Ruler",event:"enable"})}},disable:function(){if(b.enabled){Recite.Debug.log("Recite.Ruler","Disabled ruler");Recite.Util.reSetIFramePointerEvents();Recite.PlayerControls.enable();Recite.Preferences.set("style.ruler.enabled",!1);var a=Recite.Sizzle("body",document)[0];Recite.DomEvent.remove(a,"mousemove",c);a=h(document);a.parentNode.removeChild(a);
b.enabled=!1;Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Ruler",event:"disable"});Recite.Event.publish("Recite.Dom.Observor:change")}},disableInstance:function(){a=!0},isEnabled:function(){return b.enabled}}}();Recite.namespace("ScreenMask");
Recite.ScreenMask=function(){function e(){Recite.Preferences.get("style.screenMask.enabled")?Recite.ScreenMask.enable():Recite.ScreenMask.disable();d()}function h(a){var d=Recite.Sizzle("#recite-screen-mask-top",a),e=Recite.Sizzle("#recite-screen-mask-bottom",a);if(0==d.length){var h=Recite.Sizzle("body",a)[0],d=a.createElement("div");d.id="recite-screen-mask-top";d.style.backgroundColor=c();d.style.opacity=b.opacity;h.appendChild(d)}else d=d[0];0==e.length?(h=Recite.Sizzle("body",a)[0],e=a.createElement("div"),
e.id="recite-screen-mask-bottom",e.style.backgroundColor=c(),e.style.opacity=b.opacity,h.appendChild(e)):e=e[0];return{top:d,bottom:e}}function d(d){if(!a){clearTimeout(b.timeout);Recite.Util.unSetIFramePointerEvents();b.timeout=setTimeout(function(){Recite.Util.reSetIFramePointerEvents()},b.intent);var e=h(document);if(b.enabled){var i=b.height/2;if(void 0!=d){var k=d.clientY+b.yOffset,d=k+i,i=k-i;e.top.style.height=(0<i?i:0)+"px";e.bottom.style.top=(0<d?d:0)+"px"}e.top.style.backgroundColor=c();
e.bottom.style.backgroundColor=c();e.top.style.opacity=b.opacity;e.bottom.style.opacity=b.opacity}}}function c(){var a=Recite.Preferences.get("style.screenMask.color");if(null==a||"null"==a||""==a.trim())a=b.backgroundColor;return a}var b={enabled:!1,height:160,yOffset:0,backgroundColor:"#000",opacity:1,timeout:null,intent:200},a=!1;Recite.Event.subscribe("Preferences:load",e);Recite.Event.subscribe("Preferences:set",e);Recite.Event.subscribe("Preferences:reset",e);return{setOptions:function(a){b=
Recite.Util.merge(b,a)},enable:function(){if(Recite.Browser.isMobile())Recite.Debug.log("Recite.ScreenMask","Preventing load as feature not supported on mobile"),Recite.Gui.Notification.show("This feature is not available on your platform.",{read:!1});else if(!a&&!b.enabled){Recite.Debug.log("Recite.ScreenMask","Enabled ScreenMask");Recite.PlayerControls.disable();Recite.Player.stop();Recite.Ruler.disable();Recite.Magnifier.disable();var c=Recite.Sizzle("body",document)[0];h(document);Recite.Util.unSetIFramePointerEvents();
Recite.DomEvent.add(c,"mousemove",d);b.enabled=!0;Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.ScreenMask",event:"enable"})}},disable:function(){if(b.enabled){Recite.Debug.log("Recite.ScreenMask","Disabled screen mask");Recite.Preferences.set("style.screenMask.enabled",!1);Recite.Util.reSetIFramePointerEvents();Recite.PlayerControls.enable();var a=Recite.Sizzle("body",document)[0];Recite.DomEvent.remove(a,"mousemove",d);var a=h(document),c=a.top.parentNode;c.removeChild(a.top);c.removeChild(a.bottom);
b.enabled=!1;Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.ScreenMask",event:"disable"});Recite.Event.publish("Recite.Dom.Observor:change")}},isEnabled:function(){return b.enabled},disableInstance:function(){a=!0}}}();Recite.namespace("Browser");
Recite.Browser=function(){function e(){c=h(g)||"unknown browser";b=d(navigator.userAgent)||d(navigator.appVersion)||"unknown version";a=h(i)||"unknown OS"}function h(a){for(var b=0;b<a.length;b++){var c=a[b].string,d=a[b].prop;f=a[b].versionSearch||a[b].identity;if(c){if(-1!==c.indexOf(a[b].subString))return a[b].subString}else if(d)return a[b].subString}return!1}function d(a){var b=a.indexOf(f);return-1===b?!1:parseFloat(a.substring(b+f.length+1))}var c,b,a,f,g=[{string:navigator.userAgent,subString:"Chrome",
identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,subString:"Opera",identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",
identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Internet Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],i=[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,
subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.userAgent,subString:"Android",identity:"Andriod"},{string:navigator.platform,subString:"Linux",identity:"Linux"},{string:navigator.platform,subString:"Andriod",identity:"Andriod"}];return{getName:function(){e();return c},getVersion:function(){e();return b},getOS:function(){e();return a},getData:function(){e();return{name:c,version:b,OS:a}},isMobile:function(){return"Android"===
Recite.Browser.getOS()||"iPhone"===Recite.Browser.getOS()||"iPad"===Recite.Browser.getOS()?!0:!1}}}();Recite.namespace("Selection");
Recite.Selection=function(){function e(){var d="";"undefined"!==typeof window.getSelection?d=window.getSelection().toString():"undefined"!==typeof document.selection&&"Text"===document.selection.type&&(d=document.selection.createRange().text);return d.replace(/^\s+|\s+$/g,"")}var h={playOnSelection:!1};Recite.DomEvent.add(document,"mouseup",function(){var d=e();0<d.length&&(Recite.Event.publish("Selection:textSelection",{method:"selection",text:d}),h.playOnSelection&&Recite.Player.play(d))});return{setOptions:function(d){h=
Recite.Util.merge(h,d)},getOptions:function(){return h},getTextSelection:e}}();Recite.namespace("AudioDownload");
Recite.AudioDownload=function(){function e(b){Recite.Player.stop();Recite.Gui.Notification.show("Your download file is being created.  It will be automatically downloaded once created",{read:!1});Recite.Player.setPlayer(Recite.Audio.Download);Recite.PlayerDispatcher.dispatch(b);Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Audio",event:"download"});d=null}var h={enabled:!0},d=null,c=!1;Recite.Event.subscribe("Selection:textSelection",function(b,a){"selection"===a.method&&h.enabled&&(c&&
(e(a.text),c=!1),d=a.text)});return{setOptions:function(b){h=Recite.Util.merge(h,b)},getOptions:function(){return h},getEnabled:function(){return h.enabled},generateDownload:function(b){h.enabled?(b||(b=d),b?e(b):(Recite.Gui.Notification.show("Please select some text.",{read:!0}),c=!0)):Recite.Gui.Notification.show("MP3 download functionality currently disabled",{read:!0})},init:function(){}}}();Recite.namespace("TextMode");
Recite.TextMode=function(){function e(c,b){Recite.Util.each(c.styleSheets,function(a,c){if(b){if("true"!==(c.ownerNode||c.owningElement).getAttribute("data-recite-skip"))c.prevState=c.disabled,c.disabled=!0}else"undefined"!==typeof c.prevState?(c.disabled=c.prevState,c.prevState=null):c.disabled=!1})}var h={disableInlineStyles:!0,disableStylesheets:!0,hideElements:["img","iframe","object","embed"]},d=[];Recite.Event.subscribe("Preferences:load",function(){if(Recite.Preferences.get("textMode.enabled")){var c=
Recite.Sizzle("#recite-wrapper")[0];Recite.TextMode.transform(c)}});Recite.Event.subscribe("Preferences:set",function(){var c=Recite.Preferences.get("textMode.enabled"),b=Recite.Sizzle("#recite-wrapper")[0];c?Recite.TextMode.transform(b):Recite.TextMode.restore(b)});Recite.Event.subscribe("Preferences:reset",function(){var c=Recite.Preferences.get("textMode.enabled"),b=Recite.Sizzle("#recite-wrapper")[0];!0===c?Recite.TextMode.transform(b):Recite.TextMode.restore(b)});return{setOptions:function(c){h=
Recite.Util.merge(h,c)},transform:function(c){if(!(0<=Recite.Util.inArray(c,d))){d.push(c);var b=c.ownerDocument;h.disableStylesheets&&e(b,!0);b=Recite.Sizzle("*",c);h.disableInlineStyles&&Recite.Util.each(b,function(a,b){null!==b.getAttribute("style")&&(b.setAttribute("data-recite-restore-style",b.getAttribute("style")),b.setAttribute("style",null))});Recite.Util.each(h.hideElements,function(a,b){var d=Recite.Sizzle(b,c);Recite.Util.each(d,function(a,b){b.setAttribute("data-recite-restore-display",
Recite.Dom.getStyle(b,"display"));b.style.display="none"})});Recite.Event.publish("TextMode:enabled");Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.TextMode",event:"enable"})}},restore:function(c){var b=Recite.Util.inArray(c,d);if(!(0>b)){var a=c.ownerDocument;h.disableStylesheets&&e(a,!1);a=Recite.Sizzle("*",c);h.disableInlineStyles&&Recite.Util.each(a,function(a,b){null!==b.getAttribute("data-recite-restore-style")&&(b.setAttribute("style",b.getAttribute("data-recite-restore-style")),
b.setAttribute("data-recite-restore-style",null))});Recite.Util.each(h.hideElements,function(a,b){var d=Recite.Sizzle(b,c);Recite.Util.each(d,function(a,b){null!==b.getAttribute("data-recite-restore-display")&&(b.style.display=b.getAttribute("data-recite-restore-display"),b.setAttribute("data-recite-restore-display",null))})});d.splice(b,1);Recite.Event.publish("TextMode:disabled");Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.TextMode",event:"disable"})}}}}();Recite.namespace("Recite.Dictionary");
Recite.Dictionary=function(){function e(){Recite.Preferences.get("dictionary.enabled")?Recite.Dictionary.enable():Recite.Dictionary.disable()}function h(a){var b=Recite.Sizzle("#recite-dictionary-inner-words",document)[0];b.innerHTML=a?"<strong>Recite English Dictionary</strong> <br /><br />"+a:"<strong>Recite English Dictionary</strong> <br /> Select one or more words to get definition";a=Recite.Parser.Html.parse(b);Recite.PlayerControls.invoke(a);Recite.DomEvent.add(Recite.Sizzle(".recite-dictionary-synonym"),
"click",function(a){c({text:a.target.innerHTML})})}function d(a,b){if("selection"===b.method){if(!f||""===b.text||!1===b.text||b.text===g)return!1;c(b);g=b.text}return!0}function c(a){h("Getting definition...");a=a.text.replace(/ /g,",");Recite.Debug.log("Recite.Dictionary","Start ajax");Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Dictionary",event:"definition: "+a});Recite.Api.call("dictionary","POST",{data:{words:escape(a)},contentType:"application/json",success:function(a){h("");var b=
"";Recite.Util.each(a,function(a,c){b+="<strong>"+unescape(c.word)+"</strong><br />"+unescape(c.definition)+"<br /><br />";c.synonyms&&(b+="<strong>Synonyms</strong><br />",Recite.Util.each(c.synonyms,function(a,c){b+="<span class='recite-dictionary-synonym'>"+unescape(c)+"</span>,<br />"}),b+="<hr />")});h(b)}})}var b={offsets:{height:140},position:"top-left",dimensions:{width:"250px",height:"400px"},content:'<div id="recite-dictionary-inner">                        <div id="recite-dictionary-inner-words">                        </div>                  </div>                  <div id="recite-dictionary-inner-reveal">                  </div>'},
a=null,f=!1,g=null;Recite.Event.subscribe("Recite.disable",function(){Recite.Dictionary.disable()});Recite.Event.subscribe("Preferences:load",e);Recite.Event.subscribe("Preferences:set",e);Recite.Event.subscribe("Preferences:reset",e);return{enable:function(){if(!f){var c=document.createElement("div");c.id="recite-dictionary";c.setAttribute("data-recite-skip","true");c.innerHTML=b.content;document.body.appendChild(c);c.className="recite-dictionary-"+b.position;"header"!==b.position&&(c.style.width=
b.dimensions.width,c.style.height=b.dimensions.height);(function(){Recite.Sizzle("#recite-dictionary",document)[0].style.display="block";Recite.DomEvent.add(Recite.Sizzle("#recite-dictionary-inner-reveal",document)[0],"click",function(){if(""===Recite.Sizzle("#recite-dictionary-inner",document)[0].style.height){var a=Recite.Sizzle("#recite-dictionary-inner",document)[0],c=Recite.Dom.getWindowDimensions(window).height-b.offsets.height;a.style.height=c+"px";a.style.overflow="auto";Recite.Event.publish("Recite:ModuleEvent",
{name:"Recite.Dictionary",event:"enable"})}else a=Recite.Sizzle("#recite-dictionary-inner",document)[0],a.style.height="",a.style.overflow="hidden",Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Dictionary",event:"disable"})});h()}).call();a=Recite.Event.subscribe("Selection:textSelection",d);f=!0;Recite.PlayerControls.disable();Recite.Player.stop();Recite.Debug.log("Recite.Dictionary","Dictionary enabled");Recite.Gui.Notification.show("Recite dictionary enabled.  Select any word on the page to view it's definition");
Recite.Event.publish("Recite.Dictionary.enabled");Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Dictionary",event:"enable"})}},disable:function(){f&&(Recite.Sizzle("#recite-dictionary",document)[0].style.display="none",Recite.Event.unsubscribe(a),f=!1,Recite.PlayerControls.enable(),Recite.Gui.Notification.show("Dictionary disabled"),Recite.Event.publish("Recite.Dictionary.disabled"),Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Dictionary",event:"disable"}))},isEnabled:function(){return f},
setOptions:function(a){b=Recite.Util.merge(b,a)}}}();Recite.namespace("Docreader");
Recite.Docreader=function(){function e(a){a.setAttribute("href",b.endpoint+encodeURI(h(a.getAttribute("href"))))}function h(a){var b=document.createElement("span");b.innerHTML='<a href="'+a.split("&").join("&amp;").split('"').join("&quot;").split("<").join("&lt;")+'">&nbsp;</a>';return b.firstChild.href}var d=[],c=["pdf"],b={enabled:!0,selector:"docreader",urlMatches:[],endpoint:"http://docreader.reciteme.com/doc/url?q="};return{setOptions:function(a){b=Recite.Util.merge(b,a)},enabled:function(){return b.enabled},setEnabled:function(a){b.enabled=
a},load:function(){if(b.enabled){d=document.getElementsByTagName("a");for(var a=0;a<d.length;a++){var f=d[a];if(null!==f.getAttribute("href")){for(var g=f,h=0;h<b.urlMatches.length;h++)null!==g.getAttribute("href").match(b.urlMatches[h])&&e(g);for(var g=f,h=g.getAttribute("href").split(".").pop(),k=0;k<c.length;k++)h===c[k]&&e(g);(-1!==f.className.indexOf(" "+b.selector)||-1!==f.className.indexOf(b.selector+" ")||f.className===b.selector||f.getAttribute("id")===b.selector)&&e(f)}}}}}}();Recite.namespace("Keyboard");
Recite.Keyboard=function(){function e(){Recite.Debug.log("Recite.Keyboard","Binding keyboard keys");h.enabled&&Recite.Util.each(h.key_bindings,function(d,c){Recite.Key(d,c)})}var h={enabled:!0,key_bindings:{"ctrl+right":function(){Recite.PlayerControls.next();return!1},"ctrl+left":function(){Recite.PlayerControls.previous();return!1},"ctrl+alt+p":function(){Recite.PlayerControls.play();return!1},"ctrl+alt+f":function(){Recite.Sizzle(".recite-sprite-button-font")[0].click();return!1},"ctrl+alt+c":function(){Recite.Sizzle(".recite-sprite-button-themes")[0].click();
return!1},"ctrl+r":function(){Recite.Sizzle(".recite-sprite-button-ruler")[0].click();return!1},"ctrl+d":function(){Recite.Sizzle(".recite-sprite-button-dictionary")[0].click();return!1},"ctrl+l":function(){Recite.Sizzle(".recite-sprite-button-translate")[0].click();return!1},"ctrl+x":function(){Recite.Sizzle(".recite-sprite-button-textmode")[0].click();return!1},"ctrl+m":function(){Recite.Sizzle(".recite-sprite-button-margin")[0].click();return!1},"ctrl+shift+o":function(){Recite.Sizzle(".recite-sprite-button-settings")[0].click();
return!1},"ctrl+s":function(){Recite.Sizzle(".recite-sprite-button-save")[0].click();return!1}}};Recite.Event.subscribe("Recite:enable",e);return{setOptions:function(d){h=Recite.Util.merge(h,d)},enabled:function(){return h.enabled},setEnabled:function(d){h.enabled=d},load:function(){e()}}}();Recite.namespace("Tracker");
Recite.Tracker=function(){var e={enabled:!0};return{setOptions:function(h){e=Recite.Util.merge(e,h);Recite.Tracker.Api.setOptions(e.Api);Recite.Tracker.Ga.setOptions(e.Ga)},track:function(e,d){Recite.Debug.log("Recite.Tracker",e);Recite.Tracker.Api.track(e,d);Recite.Tracker.Ga.track(e,d)}}}();Recite.namespace("Tracker.Ga");
Recite.Tracker.Ga=function(){var e={enabled:!1,trackerName:void 0};return{setOptions:function(h){e=Recite.Util.merge(e,h)},track:function(h,d){e.enabled?(window.hasOwnProperty=window.hasOwnProperty||Object.prototype.hasOwnProperty,window.hasOwnProperty("GoogleAnalyticsObject")&&"function"==typeof window[window.GoogleAnalyticsObject]&&(Recite.Debug.log("Recite.Tracker.Ga",h),window[window.GoogleAnalyticsObject](void 0==e.trackerName?"send":e.trackerName+".send","event","ReciteMe",h+": "+d))):Recite.Debug.log("Recite.Tracker.Ga",
"Not enabled, ignoring")}}}();Recite.namespace("Tracker.Api");
Recite.Tracker.Api=function(){var e={enabled:!0};return{setOptions:function(h){e=Recite.Util.merge(e,h)},track:function(h,d){if(e.enabled){Recite.Debug.log("Recite.Tracker.Api",h);var c={};c.type=h;c.value=d;c.uri=window.location.toString();c.referrer=window.document.referrer||null;Recite.Api.call("tracking","POST",{data:{events:[c],system_info:{type:"browser",recite_version:"3.2.38",screenWidth:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,screenHeight:window.innerHeight||
document.documentElement.clientHeight||document.body.clientHeight}},success:function(){Recite.Debug.log("Recite.Tracker.Api","Tracked event type: "+h)}})}}}}();Recite.namespace("Language.Translate");
Recite.Language.Translate=function(){function e(){var c=Recite.Dom.getLanguage(b);null==c&&(c="en");null==a.sourceLanguage&&(a.sourceLanguage=c);null==a.workingPageLanguage&&(a.workingPageLanguage=c);a.listenForPreferenceChanges?(Recite.Debug.log("Recite.Language.Translate","Listening for prerefrence changes"),Recite.Event.subscribe("Preferences:load",h),Recite.Event.subscribe("Preferences:set",h),Recite.Event.subscribe("Preferences:reset",h)):Recite.Debug.log("Recite.Language.Translate","NOT Listening for prerefrence changes")}
function h(){var b=Recite.Preferences.get("language");null==a.sourceLanguage&&e();null!==b?(Recite.Language.Translate.translate(Recite.Sizzle("#recite-wrapper")[0],b),Recite.Language.Translate.translate(Recite.Sizzle("#recite-header")[0],b)):(Recite.Language.Translate.restore(),Recite.Language.Translate.setWorkingPageLaguage(b));if(null!==b)var c=Recite.Event.subscribe("Translate:complete",function(){Recite.Language.Translate.setWorkingPageLaguage(b);Recite.Event.unsubscribe(c)})}var d=[],c=[],b=
Recite.Sizzle("html")[0];Text.prototype.originalContent=null;Text.prototype.originalLang=null;Text.prototype.originalParentLang=null;var a={sourceLanguage:"en",workingPageLanguage:null,maxChunkSize:100,maxCharacterLimit:3E3,disallowedTags:["SCRIPT","STYLE","NOSCRIPT"],translateableAttributes:["title","alt","placeholder"],translateIgnore:"data-recite-translate-skip",listenForPreferenceChanges:!0};Recite.Event.subscribe("Recite.Dom.Observor:change",function(b,c){var d=Recite.Preferences.get("language");
null!=d&&(void 0!=c&&c.hasOwnProperty("affectedElements"))&&Recite.Util.each(c.affectedElements,function(b,c){Recite.Debug.log("Recite.Language.Translate","DOM observer detected change");Recite.Debug.log("Recite.Language.Translate",c);if(void 0==c.getAttribute("lang")){var f=Recite.Dom.getLanguage(c.textContent),f=null===f?a.sourceLanguage:f;c.setAttribute("lang",f)}Recite.Language.Translate.translate(c,d)})});return{init:function(){e()},setOptions:function(b){null!=b.sourceLanguage&&(b.workingPageLanguage=
b.sourceLanguage);a=Recite.Util.merge(a,b)},getOptions:function(){return a},translate:function(b,e){if(Recite.Dom.getLanguage(b)==e&&(e===a.sourceLanguage||0===e.indexOf(a.sourceLanguage)))Recite.Language.Translate.restore();else{Recite.Event.publish("Translate:begin");var b=Recite.Util.isArray(b)?b:[b],h=[],k=[],j=e,m={};Recite.Util.each(b,function(b,c){var d=null;for("undefined"!=typeof c&&(d=c.childNodes[0]);null!==d&&"undefined"!=typeof d;){var e=!1;if("undefined"!=typeof d.getAttribute&&("true"===
d.getAttribute("data-recite-skip")||null!=a.translateIgnore&&void 0!=d.getAttribute(a.translateIgnore)))e=!0;if(!e&&3===d.nodeType&&0<d.nodeValue.trim().length){if("undefined"===typeof d.originalContent||null===d.originalContent){d.originalContent=d.nodeValue;var f=Recite.Dom.getLanguage(d);d.originalLang=null!==f?f:a.sourceLanguage;d.originalParentLang=d.parentNode.lang}if(d.originalLang===j||d.originalLang.split("-")[0]===j){if(d.nodeValue=d.originalContent,d.parentNode.lang=d.originalParentLang||
null,null==d.parentNode.lang||"null"==d.parentNode.lang)d.parentNode.lang=a.sourceLanguage}else f=d.originalLang.split("-")[0],"undefined"===typeof m[f]&&(m[f]=[]),m[f].push(d)}if(d.hasChildNodes()&&0>Recite.Util.inArray(d.tagName,a.disallowedTags)&&!e)d=d.firstChild;else{for(;null===d.nextSibling&&d!==c;)d=d.parentNode;d=d===c?null:d.nextSibling}}});h=m;var l=e,p={};0!==a.translateableAttributes.length&&Recite.Util.each(b,function(b,c){var d=null;for("undefined"!=typeof c&&(d=c.childNodes[0]);null!==
d&&"undefined"!=typeof d;){d.affectedAttributes=[];var e=!1;if("undefined"!==typeof d.attributes&&null!==d.attributes){for(var f=0;f<a.translateableAttributes.length;f++)for(b=0;b<d.attributes.length;b++)if(d.attributes[b].nodeName===a.translateableAttributes[f]){d.affectedAttributes.push(d.attributes[b].nodeName);"undefined"===typeof d.originalContent&&(d.originalContent=[]);if("undefined"===typeof d.originalContent[a.translateableAttributes[f]]||null===d.originalContent[a.translateableAttributes[f]])d.originalContent[a.translateableAttributes[f]]=
d.getAttribute(a.translateableAttributes[f]),d.originalLang=null!==Recite.Dom.getLanguage(d)?Recite.Dom.getLanguage(d):a.sourceLanguage,d.originalParentLang=d.parentNode.lang;if(d.originalLang===l||"string"===typeof d.originalLang&&d.originalLang.split("-")[0]===l)d.setAttribute(d.attributes[b].nodeName,d.originalContent[a.translateableAttributes[f]]),d.parentNode.lang=d.originalParentLang||a.sourceLanguage,null==d.parentNode.lang&&(d.parentNode.lang=a.sourceLanguage),e=!0}!e&&"undefined"!==typeof d.originalLang&&
(e=d.originalLang.split("-")[0],"undefined"===typeof p[e]&&(p[e]=[]),p[e].push(d))}if(d.hasChildNodes()&&0>Recite.Util.inArray(d.tagName,a.disallowedTags))d=d.firstChild;else{for(;null===d.nextSibling&&d!==c;)d=d.parentNode;d=d===c?null:d.nextSibling}}});k=p;for(var v in k){var n=[];Recite.Util.each(k[v],function(a,b){for(var c=0;c<b.affectedAttributes.length;c++)n.push(b.originalContent[b.affectedAttributes[c]])});var q="null"!=v?v:a.sourceLanguage,s=-1!==q.indexOf("-")?q.substring(0,q.indexOf("-")):
q,t=-1!==e.indexOf("-")?e.substring(0,e.indexOf("-")):e;"zh"!==s&&(q=s);"zh"!==t&&(e=t);if(q!=e){var u={target:e,source:q,text:n};Recite.Api.call("translate","POST",{data:u,contentType:"application/json",success:function(a){Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Language",event:"translate:"+e});for(var b in k)Recite.Util.each(k[b],function(b,d){for(var f=0;f<d.affectedAttributes.length;f++)d.setAttribute(d.affectedAttributes[f],a[0]),d.lang=e,a.shift();c.push(d)})}})}}for(v in h){var r=
[],B=0,x=[];Recite.Util.each(h[v],function(b,c){if(null!==a.maxChunkSize&&x.length>=a.maxChunkSize||null!==a.maxCharacterLimit&&B>=a.maxCharacters)r.push(x),x=[],B=0;x.push(c.originalContent);B+=c.originalContent.length});r.push(x);Recite.Util.each(r,function(b,c){var f="null"!=v?v:a.sourceLanguage,j=-1!==f.indexOf("-")?f.substring(0,f.indexOf("-")):f,k=-1!==e.indexOf("-")?e.substring(0,e.indexOf("-")):e;"zh"!==j&&(f=j);"zh"!==k&&(e=k);f!=e&&(u={target:e,source:f,text:c},Recite.Api.call("translate",
"POST",{data:u,contentType:"application/json",success:function(c){Recite.Util.each(c,function(c,j){var k=h[f][b*a.maxChunkSize+c];3===k.nodeType?(k.nodeValue=j,k.parentNode&&(k.parentNode.lang=e)):(k.innerHTML=j,k.lang=e);d.push(k)});Recite.Event.publish("Translate:complete");Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Language",event:"translate:"+e})}}))})}}},restore:function(){Recite.Language.Translate.resetWorkingPageLanguage();0<d.length&&(Recite.Debug.log("Language","Restoring source language"),
Recite.Event.publish("Translate:restore_begin"),Recite.Util.each(d,function(b,c){c.nodeValue=c.originalContent;c.parentNode&&(c.parentNode.lang=null!==c.originalParentLang?c.originalParentLang:a.sourceLanguage)}),Recite.Util.each(c,function(b,c){for(b=0;b<c.attributes.length;b++)for(var d=0;d<a.translateableAttributes.length;d++)a.translateableAttributes[d]===c.attributes[b].nodeName&&(c.setAttribute(c.attributes[b].nodeName,c.originalContent[c.attributes[b].nodeName]),c.lang=null!==c.originalLang?
c.originalLang:a.sourceLanguage)}),d=[],c=[],Recite.Event.publish("Translate:restore_complete"))},setWorkingPageLaguage:function(c){if(null!=c){if(null==b.originalLang||"undefined"==typeof b.originalLang)b.originalLang=Recite.Dom.getLanguage(b);"undefined"!=typeof b.getAttribute&&b.setAttribute("lang",c);a.workingPageLanguage=c}},getWorkingPageLanguage:function(){return a.workingPageLanguage},resetWorkingPageLanguage:function(){null===b.originalLang&&(b.originalLang=a.sourceLanguage);null!==b.originalLang&&
"undefined"!==typeof b.originalLang&&b.setAttribute("lang",b.originalLang);a.workingPageLanguage=a.sourceLanguage},hasActiveWorkingPageLanguage:function(){return a.workingPageLanguage!=a.sourceLanguage?!0:!1}}}();Recite.namespace("Gui.Notification");
Recite.Gui.Notification=function(){function e(a){try{document.body.removeChild(a),b.splice(b.indexOf(a.id),1)}catch(c){}}function h(a){var b=[];null==a?b=d():b.push(a);var c=null;Recite.Language.Translate.hasActiveWorkingPageLanguage()&&(c=Recite.Language.Translate.getWorkingPageLanguage());null==c&&(c=Recite.Dom.getLanguage(Recite.Sizzle("html")[0]));null!==c&&Recite.Util.each(b,function(a,b){"object"==typeof b&&Recite.Language.Translate.translate(b,c)})}function d(){var a=Recite.Sizzle(".recite-notification");
return 1<a.length?a:[]}var c={position:"top-right",timeout:4E3,read:!1,elementTopMgn:5,suppress:!1,localize:!0},b=[],a=0;Recite.Event.subscribe("Translate:restore_complete",h);Recite.Event.subscribe("Translate:complete",h);return{show:function(d,g){if(!c.suppress&&!Recite.Browser.isMobile()){Recite.Gui.Notification.setOptions(g);var i=document.createElement("div");i.innerHTML=d;i.id=a;i.content=d;i.setAttribute("role","alert");a++;var k=!1;Recite.Util.each(b,function(a,b){b.content==i.content&&(k=
!0)});k||(b.push(i),document.body.appendChild(i));i.className="recite-notification recite-notification-"+c.position;var j=Recite.Sizzle(".recite-notification");1<j.length&&(j=j[j.length-2],j=parseInt(j.offsetTop+j.offsetHeight+c.elementTopMgn,10),i.style.top=j+"px");i.style.display="block";i.setAttribute("lang","en");c.timeout&&setTimeout(function(){e(i)},c.timeout);if(c.read)try{Recite.Player.play(i.innerHTML)}catch(m){}c.localize&&h(i);Recite.DomEvent.add(i,"click",function(){e(i)})}},destroy:function(a){e(a)},
setOptions:function(a){c=Recite.Util.merge(c,a)},getOptions:function(){return c},getActive:function(){return d()},localizeActive:function(){h()}}}();Recite.namespace("Gui.Modal");
Recite.Gui.Modal=function(){function e(){i||(Recite.DomEvent.add(Recite.Sizzle("#recite-wrapper")[0],"click",function(){Recite.Gui.Modal.hide()}),Recite.Key("enter",function(){null!=c&&document.activeElement.click()}),Recite.Key("esc",function(){null!=c&&g.click()}),i=!0)}function h(){if(null!=c){c.parentNode.removeChild(c);c=null;var a=Recite.Sizzle("#recite-wrapper")[0];a.setAttribute("class",a.getAttribute("class").replace(" recite-fade",""))}}function d(a){var b=[];null==a?null!=c&&b.push(c):
b.push(a);if(0!=b.length){var d=null;Recite.Language.Translate.hasActiveWorkingPageLanguage()&&(d=Recite.Language.Translate.getWorkingPageLanguage());null==d&&(d=Recite.Dom.getLanguage(Recite.Sizzle("html")[0]));null!==d&&Recite.Util.each(b,function(a,b){"object"==typeof b&&Recite.Language.Translate.translate(b,d)})}}var c=null,b=null,a=null,f=null,g=null,i=!1;Recite.Event.subscribe("Translate:restore_complete",d);Recite.Event.subscribe("Translate:complete",d);return{init:function(){e()},show:function(i,
j,m,l,p,v){e();h();if(null==c){var n=document.createElement("div");n.id="recite-modal";n.setAttribute("aria-modal","true");c=n;var q=document.createElement("div");q.id="recite-modal-header";n.appendChild(q);b=q;q=document.createElement("div");q.id="recite-modal-content";n.appendChild(q);a=q;q=document.createElement("div");q.id="recite-modal-buttons";n.appendChild(q);var s=document.createElement("a");s.id="recite-modal-button-ok";s.className="recite-modal-button";s.setAttribute("tabindex",9001);s.innerHTML=
"OK";q.appendChild(s);f=s;s=document.createElement("a");s.id="recite-modal-button-cancel";s.className="recite-modal-button";s.setAttribute("tabindex",9002);s.innerHTML="Cancel";q.appendChild(s);g=s;document.body.appendChild(n)}b.innerHTML=i;a.innerHTML=j;null!=m&&(f.innerHTML=m);null!=l&&(g.innerHTML=l);Recite.DomEvent.add(f,"click",function(){h();p.call()});Recite.DomEvent.add(g,"click",function(){h();v.call()});c.style.display="block";c.setAttribute("lang","en");var t=[];Recite.Util.each(Recite.Sizzle("#recite-modal [tabindex]"),
function(a,b){t.push(b)});0<t.length&&(t[0].focus(),Recite.Key("tab",function(){if(document.activeElement==t[t.length-1])return t[0].focus(),!1}),Recite.Key("shift+tab",function(){if(document.activeElement==t[0])return t[t.length-1].focus(),!1}));i=Recite.Sizzle("#recite-wrapper")[0];i.setAttribute("class",i.getAttribute("class")+" recite-fade");d(c)},hide:function(){h()},localizeActive:function(){d()}}}();Recite.namespace("Magnifier");
Recite.Magnifier=function(){var e,h;function d(){Recite.Preferences.get("magnifier.enabled")&&!q?Recite.Magnifier.enable():q&&!Recite.Preferences.get("magnifier.enabled")&&Recite.Magnifier.disable()}function c(){var a=document.documentElement.scrollTop||document.body.scrollTop;Recite.Sizzle("#recite-header")[0].style.top=a-60+"px"}function b(){if(!i){if(s||!q)return!1;Recite.Debug.log("Recite.Magnifier","Rendering Magnifier ...");s=!0;if(t){j=document.createElement("div");j.className=p;j.id=p;m=document.createElement("div");
m.className=l;m.id=l;j.appendChild(m);var b=document.createElement("div");b.className=n;b.id=n;j.appendChild(b);document.body.appendChild(j)}var c=document.createElement("div");c.className=v;c.id=v;c.innerHTML+=Recite.Sizzle("body")[0].innerHTML;b=c.getElementsByClassName(p);Recite.Util.each(b,function(b,d){a(d,c)});a(Recite.Sizzle("#recite-header",c)[0],c);b=c.getElementsByTagName("script");Recite.Util.each(b,function(b,d){a(d,c)});c.style.visibility="hidden";c.style.top=A+"px";c.style.left=x+"px";
c.style.width=window.innerWidth+"px";c.style.height="auto";b=window.getComputedStyle(Recite.Sizzle("body")[0],null).getPropertyValue("padding-top");c.style.paddingTop=b;""!=Recite.Dom.getStyle(document.body,"background")&&(c.style.background=Recite.Dom.getStyle(document.body,"background"));m.appendChild(c);c.style.visibility="visible";k&&a(k,document);k=c;t&&(b=window.pageXOffset,j.style.top=window.pageYOffset+30+"px",j.style.left=b+30+"px",t=!1);s=!1}}function a(a){try{a.parentNode.removeChild(a)}catch(b){Recite.Debug.log("Recite.Magnifier",
"Error "+b)}}function f(a,b){for(var c in b)a[c]=b[c];return a}var g={realtimeRender:!0,followMouse:!1,scale:2,allowHighlights:!1,cacheImages:!0},i=!1,k=!1,j=!1,m=!1,l="magnifying_glass",p="magnifying_holder",v="magnifying_content",n="magnifying_handle",q=!1,s=!1,t=!0,u=null;h=e=0;var r={HTMLEvents:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,MouseEvents:/^(?:click|hover|dblclick|mouse(?:down|up|over|move|out))$/},B={pointerX:0,pointerY:0,button:0,ctrlKey:!1,
altKey:!1,shiftKey:!1,metaKey:!1,bubbles:!0,cancelable:!0},x=100,A=100;Recite.Event.subscribe("Preferences:load",d);Recite.Event.subscribe("Preferences:set",d);Recite.Event.subscribe("Preferences:reset",d);return{enable:function(){if(Recite.Browser.isMobile())Recite.Debug.log("Recite.Magnifier","Preventing load as feature not supported on mobile"),Recite.Gui.Notification.show("This feature is not available on your platform.",{read:!1});else if(!q){q=!0;if(!i){Recite.Ruler.disable();Recite.ScreenMask.disable();
b();if(g.followMouse)document.onmousemove=function(a){var b=a.pageY-j.offsetHeight/2,c=a.pageX-j.offsetWidth/2,d=-(Math.abs(a.pageY)*g.scale)+j.offsetHeight-20,a=-(Math.abs(a.pageX)*g.scale)+j.offsetWidth;j.style.top=b+"px";j.style.left=c+"px";k.style.top=d+"px";k.style.left=a+"px"};else{var a=document.getElementById(p);document.getElementById(l);var d=document.getElementById(v);Recite.DomEvent.add(d,"mousedown",function(a){var b;b=[];var c=Recite.Dom.getIndex(j),d=Recite.Dom.getPath(a.target),c=
d.indexOf(c);d[c]-=1;var e=Recite.Dom.getPath(k.querySelector("#recite-wrapper")),g=Recite.Dom.getPath(document.querySelector("#recite-wrapper"));e[c]-=1;for(var h in e)-1>=g.indexOf(e[h])&&b.push(h);for(h in b)d.splice(b[0],1);b=Recite.Dom.getNode(d);a=a.target;"INPUT"==a.nodeName&&a.focus();try{Recite.Debug.log("Recite.Magnifier","simulate mousedown");var i=f(B,{}),d=a=null,l;for(l in r)if(r[l].test("mousedown")){d=l;break}if(!d)throw new SyntaxError("Only HTMLEvents and MouseEvents interfaces are supported");
if(document.createEvent)a=document.createEvent(d),"HTMLEvents"==d?a.initEvent("mousedown",i.bubbles,i.cancelable):a.initMouseEvent("mousedown",i.bubbles,i.cancelable,document.defaultView,i.button,i.pointerX,i.pointerY,i.pointerX,i.pointerY,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.button,b),b.dispatchEvent(a);else{i.clientX=i.pointerX;i.clientY=i.pointerY;var m=document.createEventObject(),a=f(m,i);b.fireEvent("onmousedown",a)}}catch(n){Recite.Debug.log("Recite.Magnifier","Error "+n)}});Recite.DomEvent.add(a,
"mousedown",function(a){a.preventDefault();this.setAttribute("data-drag",!0);this.setAttribute("data-dragMouseTop",a.pageY);this.setAttribute("data-dragMouseLeft",a.pageX);this.setAttribute("data-dragOffsetTop",parseInt(document.defaultView.getComputedStyle(this,null).getPropertyValue("top")));this.setAttribute("data-dragOffsetLeft",parseInt(document.defaultView.getComputedStyle(this,null).getPropertyValue("left")))});Recite.DomEvent.add(document,"mousemove",function(a){e=a.pageX;h=a.pageY;if("true"==
j.getAttribute("data-drag")){var a=parseInt(j.getAttribute("data-dragOffsetLeft"))+(e-j.getAttribute("data-dragMouseLeft")),b=parseInt(j.getAttribute("data-dragOffsetTop"))+(h-j.getAttribute("data-dragMouseTop"));j.style.top=b+60+"px";j.style.left=a+"px";b=-(b*g.scale)-j.offsetHeight/2;a=-(a*g.scale)-j.offsetWidth/2;k.style.top=b+"px";k.style.left=a+"px";x=a;A=b}});Recite.DomEvent.add(window,"mouseup",function(){j.setAttribute("data-drag",!1)})}!0==g.realtimeRender&&(u=Recite.Event.subscribe("Recite.Dom.Observor:change",
b));if(g.allowHighlights){var m=!1;window.onkeydown=function(a){17==a.keyCode&&(j.style.borderColor="#FF9600",j.style.pointerEvents="none",k.style.pointerEvents="none",m=!0==m?!1:!0);if(192==a.keyCode){var a=e,b=h,c=j;c.setAttribute("data-dragMouseTop",b);c.setAttribute("data-dragMouseLeft",a);c.setAttribute("data-dragOffsetTop",b);c.setAttribute("data-dragOffsetLeft",a);a=e-j.offsetWidth/2;b=h-j.offsetHeight/2;a=parseInt(j.getAttribute("data-dragOffsetLeft"))+(a-j.getAttribute("data-dragMouseLeft"));
b=parseInt(j.getAttribute("data-dragOffsetTop"))+(b-j.getAttribute("data-dragMouseTop"));j.style.top=b+"px";j.style.left=a+"px";b=-(b*g.scale)-j.offsetHeight/2;a=-(a*g.scale)-j.offsetWidth/2;k.style.top=b+"px";k.style.left=a+"px";x=a;A=b}};window.onkeyup=function(a){!1==m&&17==a.keyCode&&(j.style.borderColor="#333333",j.style.pointerEvents="inherit",k.style.pointerEvents="inherit",m=!1)}}Recite.Debug.log("Recite.Magnifier","Magnifier enabled");Recite.Gui.Notification.show("Recite magnifier enabled");
Recite.Event.publish("Recite.Magnifier.enabled");Recite.Sizzle("#recite-header")[0].style.position="absolute";Recite.Sizzle("#recite-header")[0].style.top="-60px";c();Recite.DomEvent.add(window,"scroll",c);Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Magnifier",event:"enable"})}a=[window];for(d=0;d<a.length;d++)Recite.DomEvent.add(a[d],"resize",b)}},disable:function(){if(q){q=!1;a(j,document);t=!0;Recite.Event.unsubscribe(u);Recite.Debug.log("Recite.Magnifier","Magnifier disabled");Recite.Gui.Notification.show("Recite magnifier disabled");
Recite.Event.publish("Recite.Magnifier.disabled");Recite.Sizzle("#recite-header")[0].style.position="fixed";Recite.Sizzle("#recite-header")[0].style.top="0px";Recite.DomEvent.remove(window,"scroll",c);Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Magnifier",event:"disable"});Recite.Preferences.set("magnifier.enabled",!1);for(var d=[window],e=0;e<d.length;e++)Recite.DomEvent.remove(d[e],"resize",b)}},toggle:function(){Recite.Magnifier.isEnabled()?Recite.Magnifier.disable():Recite.Magnifier.enable()},
isEnabled:function(){return q},setOptions:function(a){g=Recite.Util.merge(g,a)},disableInstance:function(){i=!0}}}();Recite.namespace("FrameUpdater");
Recite.FrameUpdater=function(){function e(a){var b=!1;a.hasOwnProperty("msgType")&&Recite.Util.each(l.validMessages,function(c,d){a.msgType==d&&(b=c)});return b}function h(b,d){if(a&&!0==l.enable.post)for(var e=0;e<f.length;e++)("undefined"==typeof d||"undefined"!=typeof d&&-1==d.indexOf(f[e]))&&c(f[e],b)}function d(b){a&&!0==l.enable.post&&c(window.top,b)}function c(b,c){if(a&&!0==l.enable.post)try{var d=JSON.stringify(c);b.postMessage(d,"*")}catch(e){}}function b(b){if(a&&!0==l.enable.listen&&"undefined"!=
typeof b.data)try{var i=JSON.parse(b.data);if(!1!==e(i)){var n=JSON.parse(b.data),q=e(n);if(!1!=q&&a&&!0==l.enable.listen){"setChildFrame"==q&&(f.push(b.source),c(b.source,{msgType:l.validMessages.HideControls}));"HideControls"==q&&(Recite.Controls.disable(),Recite.Controls.disableInstanceOverlay());"PreferencesSet"==q&&n.hasOwnProperty("payload")&&Recite.Preferences.set(n.payload);"PreferencesReset"==q&&n.hasOwnProperty("payload")&&Recite.Preferences.resetAll();"playerControlsShown"==q&&(g&&h({msgType:l.validMessages.playerControlsShown},
[b.source]),Recite.PlayerControls.hide(),Recite.PlayerControls.stop());"disable"==q&&(g&&h({msgType:l.validMessages.disable},[b.source]),Recite.disable(!0));if("playNext"==q&&n.hasOwnProperty("payload"))if(n.payload.hasOwnProperty("playParent"))g&&(k=null,setTimeout(function(){Recite.PlayerControls.next(m)},400));else if(n.payload.hasOwnProperty("src")){if(n.payload.src==window.self.location.href){var s={msgType:l.validMessages.setActiveChildFrame};d(s);j=!0;Recite.PlayerControls.first()}}else if(n.payload.hasOwnProperty("playActiveChild")&&
j){var t=Recite.PlayerControls.next();if(null==t&&"undefined"!=typeof t){var u={msgType:l.validMessages.removeActiveChildFrame};d(u);j=!1;d({msgType:l.validMessages.playNext,payload:{playParent:!0,src:window.location.href}})}}"playPrev"==q&&n.hasOwnProperty("payload")&&(n.payload.hasOwnProperty("playParent")?g&&(k=null,setTimeout(function(){Recite.PlayerControls.previous(m)},400)):n.payload.hasOwnProperty("src")?n.payload.src==window.self.location.href&&(s={msgType:l.validMessages.setActiveChildFrame},
d(s),j=!0,Recite.PlayerControls.last()):n.payload.hasOwnProperty("playActiveChild")&&j&&(t=Recite.PlayerControls.previous(),null==t&&"undefined"!=typeof t&&(u={msgType:l.validMessages.removeActiveChildFrame},d(u),j=!1,d({msgType:l.validMessages.playPrev,payload:{playParent:!0,src:window.location.href}}))));"setActiveChildFrame"==q&&(g?k=b.source:(k=null,j=!1));"removeActiveChildFrame"==q&&(g&&(u={msgType:l.validMessages.removeActiveChildFrame},h(u,[b.source])),j=!1,k=null)}}}catch(r){}}var a=!1,f=
[],g=null,i=null,k=null,j=!1,m=null,l={enabled:!1,enable:{post:!0,listen:!0},validOrigins:[window.location.origin],validDestinations:[window.location.origin],validMessages:{PreferencesSet:"Recite.PreferencesSet",PreferencesReset:"Recite.PreferencesReset",setChildFrame:"iknowittobetrue",playerControlsShown:"playerControlsShown",HideControls:"HideControls",playNext:"playNext",playPrev:"playPrev",setActiveChildFrame:"setActiveChildFrame",removeActiveChildFrame:"removeActiveChildFrame",disable:"disable"},
preferencesReloadDelay:100,parentSetDelay:1E3,maxTries:10};return{setOptions:function(a){l=Recite.Util.merge(l,a)},getOptions:function(){return l},load:function(){if(!a){Recite.Debug.log("FrameUpdater","Enabling");if(!a&&(window.top==window.self?g=!0:i=!0,a=!0==l.enable.post||!0==l.enable.listen,!0==l.enable.listen&&window.addEventListener("message",b),!0==l.enable.post)){var e={msgType:l.validMessages.PreferencesSet},f={msgType:l.validMessages.PreferencesReset},n={msgType:l.validMessages.playerControlsShown},
q={msgType:l.validMessages.playNext},s={msgType:l.validMessages.playPrev};Recite.Event.subscribe("Preferences:set",function(){e.payload=Recite.Preferences.get();h(e)});Recite.Event.subscribe("Preferences:load",function(){e.payload=Recite.Preferences.get();h(e)});Recite.Event.subscribe("Preferences:reset",function(){f.payload=Recite.Preferences.get();h(f)});Recite.Event.subscribe("Recite.Tooltip:show",function(){d({msgType:l.validMessages.removeActiveChildFrame});g?(h(n),k=null):(d(n),d({msgType:l.validMessages.setActiveChildFrame}),
j=!0)});Recite.Event.subscribe("FrameUpdater:EnterFrame",function(a,b){b.hasOwnProperty("element")&&(b.hasOwnProperty("direction")&&"next"==b.direction?(q.payload={src:b.element.src},m=b.element,h(q)):b.hasOwnProperty("direction")&&"prev"==b.direction?(s.payload={src:b.element.src},m=b.element,h(s)):(q.payload={src:b.element.src},m=b.element,h(q)))});g&&Recite.Event.subscribe("Recite:disable",function(){h({msgType:l.validMessages.disable})})}i&&c(window.parent,{msgType:l.validMessages.setChildFrame});
g&&(Recite.Util.each(window.frames,function(){}),Recite.Util.each(Recite.Sizzle("iframe"),function(a,b){Recite.DomEvent.add(b,"mouseover",function(){m=b})}))}},disable:function(){a=!1},enabled:function(){return l.enabled},isActive:function(){return a},isParentFrame:function(){return g},isChildFrame:function(){return i},getActiveChildFrame:function(){return k},hasActiveChildFrame:function(){return g&&null!=k?!0:!1},activeFramePlayNext:function(){h({msgType:l.validMessages.playNext,payload:{playActiveChild:!0}})},
activeFramePlayPrev:function(){h({msgType:l.validMessages.playPrev,payload:{playActiveChild:!0}})}}}();
